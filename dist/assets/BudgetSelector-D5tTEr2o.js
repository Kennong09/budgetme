import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{r as d}from"./react-vendor-D4A9EtXC.js";import{u as I,b as A,B as G}from"./index-BbApZ7g3.js";const ee=d.memo(({selectedBudgetId:f="",selectedCategoryId:l,transactionAmount:n=0,transactionType:b="expense",onBudgetSelect:O,onCategoryAutoSelect:C,className:q="",disabled:_=!1})=>{console.log("ðŸŽ£ BudgetSelector: Component initialized/re-rendered with props:",{selectedBudgetId:f,selectedCategoryId:l,transactionAmount:n,transactionType:b,disabled:_});const{user:u}=I(),{showErrorToast:T}=A(),[x,E]=d.useState([]);d.useEffect(()=>{console.log("ðŸ“‹ BudgetSelector: budgets state updated",{budgetCount:x.length,budgets:x.map(s=>({id:s.id,name:s.budget_name,status:s.status,category_id:s.category_id,category_name:s.category_name}))})},[x]),d.useEffect(()=>{console.log("ðŸ”„ BudgetSelector: Dependencies changed for budget fetching:",{userId:u?.id,selectedCategoryId:l,transactionType:b,timestamp:new Date().toISOString()})},[u?.id,l,b]);const[j,B]=d.useState(!1),[D,v]=d.useState(null),[H,W]=d.useState([]),[R,J]=d.useState(!1),[k,z]=d.useState(!1),[y,L]=d.useState(""),[t,$]=d.useState(null),P=s=>{const i=new Date;console.log("ðŸ” BudgetSelector: Starting budget filtering (showing all budgets)",{totalBudgets:s.length,selectedCategoryId:l,transactionType:b,currentDate:i.toISOString()});const r=s.filter(a=>(console.log(`ðŸ“‹ Checking budget: ${a.budget_name}`,{id:a.id,status:a.status,category_id:a.category_id,category_name:a.category_name,amount:a.amount,spent:a.spent,start_date:a.start_date,end_date:a.end_date}),a.status==="deleted"||a.status==="archived"?(console.log(`âŒ Budget ${a.budget_name} filtered out: status is ${a.status}`),!1):(console.log(`âœ… Budget ${a.budget_name} included`),!0)));return console.log("ðŸŽ¯ BudgetSelector: Filtering complete (showing all budgets)",{originalCount:s.length,filteredCount:r.length,filteredBudgets:r.map(a=>({id:a.id,name:a.budget_name,category:a.category_name}))}),r.sort((a,o)=>{const c=new Date,g=new Date(a.start_date),m=new Date(a.end_date),F=new Date(o.start_date),M=new Date(o.end_date),N=a.status==="active",S=o.status==="active",h=c>=g&&c<=m,w=c>=F&&c<=M,X=a.amount-(a.spent||0)>0,U=o.amount-(o.spent||0)>0,Z=l&&a.category_id===l,Y=l&&o.category_id===l;return l&&Z!==Y?Y?1:-1:N!==S?S?1:-1:h!==w?w?1:-1:X!==U?U?1:-1:a.budget_name.localeCompare(o.budget_name)}),console.log("ðŸ”„ BudgetSelector: Budgets sorted by priority:",{selectedCategoryId:l,sortedBudgets:r.map(a=>{const o=new Date,c=new Date(a.start_date),g=new Date(a.end_date);return{id:a.id,name:a.budget_name,category:a.category_name,status:a.status,isActive:a.status==="active",isCurrent:o>=c&&o<=g,hasRemaining:a.amount-(a.spent||0)>0,matchesCategory:l&&a.category_id===l}})}),r},p=P(x).filter(s=>s.budget_name.toLowerCase().includes(y.toLowerCase())||s.category_name?.toLowerCase().includes(y.toLowerCase())||s.description?.toLowerCase().includes(y.toLowerCase()));console.log("ðŸ† BudgetSelector: Final filtered budgets after search:",{searchTerm:y,beforeSearchFilter:P(x).length,afterSearchFilter:p.length,finalBudgets:p.map(s=>({id:s.id,name:s.budget_name}))}),d.useEffect(()=>{if(f){const s=x.find(i=>i.id===f);$(s||null)}else $(null)},[f,x]);const K=(s,i)=>{const r=[],a=(s.spent||0)+i,o=a/s.amount*100;a>s.amount?r.push({type:"overrun",message:`Transaction would exceed budget by â‚±${(a-s.amount).toFixed(2)} (${o.toFixed(1)}% utilization)`,severity:"warning"}):o>=80&&r.push({type:"threshold",message:`Transaction would put budget at ${o.toFixed(1)}% utilization`,severity:"warning"});const c=new Date(s.end_date),g=new Date,m=Math.ceil((c.getTime()-g.getTime())/(1e3*60*60*24));return m<=7&&m>0&&r.push({type:"period_expiry",message:`Budget period expires in ${m} day${m===1?"":"s"}`,severity:"info"}),r},Q=s=>{console.log("ðŸ’° BudgetSelector: Budget selected",{budgetId:s.id,budgetName:s.budget_name,categoryId:s.category_id,categoryName:s.category_name}),$(s),O(s),z(!1),L(""),(s.category_id||s.category_name)&&C&&(console.log("ðŸ”„ BudgetSelector: Auto-selecting category from budget",{categoryId:s.category_id,categoryName:s.category_name,usingFallback:!s.category_id&&!!s.category_name}),s.category_id?C(s.category_id,s.category_name):s.category_name&&C("",s.category_name))},V=()=>{$(null),O(null),z(!1),L("")};return d.useEffect(()=>{console.log("ðŸš€ BudgetSelector: useEffect triggered for budget fetching",{userId:u?.id,selectedCategoryId:l,transactionType:b,hasUser:!!u}),(async()=>{if(!u){console.log("âš ï¸ BudgetSelector: No user found, clearing budgets"),E([]);return}console.log("ðŸ” BudgetSelector: Starting budget fetch for user:",u.id),B(!0),v(null);try{const i=G.getInstance();console.log("ðŸ“ˆ BudgetSelector: Calling budgetService.getBudgets with userId:",u.id);const r=await i.getBudgets(u.id);if(console.log("ðŸ“Š BudgetSelector: Raw service response:",{source:r.source,hasData:!!r.data,dataLength:r.data?.length||0,error:r.error}),r.source==="error")throw console.error("âŒ BudgetSelector: Service returned error:",r.error),new Error(r.error||"Failed to load budgets");console.log("ðŸ“Š BudgetSelector: Fetched budgets from service",{source:r.source,totalBudgets:r.data.length,budgets:r.data.map(a=>({id:a.id,name:a.budget_name,status:a.status,category_id:a.category_id,category_name:a.category_name,amount:a.amount,spent:a.spent||0,remaining:a.amount-(a.spent||0),start_date:a.start_date,end_date:a.end_date,period:a.period,description:a.description}))}),r.data.forEach(a=>{const o=new Date,c=new Date(a.start_date),g=new Date(a.end_date),m=a.amount-(a.spent||0);console.log(`ðŸ” Debug analysis for budget: ${a.budget_name}`,{status:a.status,statusCheck:a.status==="active",dateRange:{current:o.toISOString().split("T")[0],start:c.toISOString().split("T")[0],end:g.toISOString().split("T")[0],isWithinRange:o>=c&&o<=g},allocation:{amount:a.amount,spent:a.spent||0,remaining:m,hasRemaining:m>0}})}),console.log("ðŸŽ¯ BudgetSelector: Setting budgets state with",r.data.length,"budgets"),E(r.data)}catch(i){const r=i instanceof Error?i.message:"Failed to load budgets";console.error("âŒ BudgetSelector: Error in fetchBudgets:",{error:i,errorMessage:r,stack:i instanceof Error?i.stack:void 0}),v(r),T(r)}finally{console.log("ðŸ BudgetSelector: Fetch complete, setting loading to false"),B(!1)}})()},[u?.id,l,b,T]),d.useEffect(()=>{if(f&&n>0){const s=x.find(i=>i.id===f);if(s){const i=K(s,n);W(i)}}else W([])},[f,n,x]),b==="income"?null:e.jsxs("div",{className:`budget-selector selector-container ${q}`,children:[e.jsxs("div",{className:"form-group mb-3 md:mb-4",children:[e.jsx("label",{htmlFor:"budget_id",className:"text-sm md:text-base font-weight-bold text-gray-800",children:"Budget Assignment (Optional)"}),e.jsxs("div",{className:"position-relative",children:[e.jsxs("div",{className:`d-flex align-items-center justify-content-between px-2 md:px-3 py-1.5 md:py-2 border bg-white ${_||j?"bg-light":""} ${k?"border-primary":"border-secondary"}`,onClick:()=>!_&&!j&&z(!k),style:{cursor:_||j?"not-allowed":"pointer",borderRadius:"0.375rem",minHeight:"38px"},children:[t?e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{children:e.jsx("div",{className:"text-sm md:text-base font-weight-medium text-gray-800",children:t.budget_name})})}):e.jsx("span",{className:"text-xs md:text-sm text-muted",children:j?"Loading budgets...":"Select Budget (Optional)"}),e.jsxs("div",{className:"d-flex align-items-center",children:[t&&e.jsx("button",{type:"button",className:"btn btn-sm text-danger mr-2",onClick:s=>{s.stopPropagation(),V()},title:"Clear selection",style:{border:"none",background:"none",padding:"2px 6px"},children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("i",{className:`fas fa-chevron-${k?"up":"down"} text-gray-400`})]})]}),k&&e.jsxs("div",{className:"position-absolute w-100 bg-white border shadow-lg",style:{zIndex:1050,maxHeight:"300px",overflowY:"auto",top:"100%",borderRadius:"0.375rem",borderColor:"#dee2e6"},children:[e.jsx("div",{className:"p-2 md:p-3 border-bottom",children:e.jsx("input",{type:"text",className:"px-2 py-1.5 md:px-3 md:py-2 w-100 border text-xs md:text-sm",placeholder:"Search budgets...",value:y,onChange:s=>L(s.target.value),autoFocus:!0,style:{borderRadius:"0.25rem",borderColor:"#dee2e6",outline:"none"}})}),e.jsx("div",{className:"py-1",children:D?e.jsx("div",{className:"px-2 md:px-3 py-1.5 md:py-2 text-muted text-center",children:"Unable to load budgets"}):p.length===0?e.jsx("div",{className:"px-2 md:px-3 py-1.5 md:py-2 text-muted text-center",children:y?"No budgets match your search":x.length===0?"No budgets available":"No budgets found"}):p.map(s=>{const i=l&&s.category_id===l,r=s.category_name&&s.category_name.trim()!=="",a=new Date,o=new Date(s.start_date),c=new Date(s.end_date),g=s.amount-(s.spent||0),m=s.status==="active",F=a>c,M=a<o,N=g<0,S=g>0&&(s.spent||0)/s.amount>=.8;let h=null;return m?N?h=e.jsx("span",{className:"badge badge-danger ml-2",style:{fontSize:"10px"},children:"Over Budget"}):F?h=e.jsx("span",{className:"badge badge-warning ml-2",style:{fontSize:"10px"},children:"Expired"}):M?h=e.jsx("span",{className:"badge badge-info ml-2",style:{fontSize:"10px"},children:"Upcoming"}):S&&(h=e.jsx("span",{className:"badge badge-warning ml-2",style:{fontSize:"10px"},children:"Near Limit"})):h=e.jsx("span",{className:"badge badge-secondary ml-2",style:{fontSize:"10px"},children:"Inactive"}),e.jsxs("div",{className:`px-2 md:px-3 py-1.5 md:py-2 d-flex align-items-center ${t?.id===s.id?"bg-primary text-white":""}`,onClick:()=>Q(s),style:{cursor:"pointer",transition:"background-color 0.15s ease-in-out",opacity:!m||F?.7:1},onMouseEnter:w=>{t?.id!==s.id&&(w.currentTarget.style.backgroundColor="#f8f9fc")},onMouseLeave:w=>{t?.id!==s.id&&(w.currentTarget.style.backgroundColor="")},children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"text-sm md:text-base font-weight-medium d-flex align-items-center",children:[s.budget_name,i&&e.jsxs("span",{className:"badge badge-success ml-2",style:{fontSize:"10px"},children:[e.jsx("i",{className:"fas fa-check mr-1"}),"Match"]}),h]}),r&&e.jsxs("div",{className:"text-xs md:text-sm text-muted",children:[e.jsx("i",{className:"fas fa-tag mr-1"}),s.category_name]}),e.jsxs("div",{className:`text-xs md:text-sm ${N?"text-danger font-weight-bold":S?"text-warning":"text-muted"}`,children:["â‚±",Math.abs(g).toFixed(2)," ",N?"over budget":"remaining"]})]}),t?.id===s.id&&e.jsx("i",{className:`fas fa-check ${t?.id===s.id?"text-white":"text-primary"}`})]},s.id)})})]})]}),e.jsxs("small",{className:"form-text text-xs md:text-sm text-muted",children:["Choose a budget to track this expense against. Showing all ",p.length," budget",p.length!==1?"s":"",".",l&&e.jsxs("span",{className:"d-block mt-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Budgets matching your selected category are shown first, followed by other budgets."]}),p.length===0&&x.length>0&&e.jsxs("span",{className:"text-warning d-block mt-1",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),"No budgets available. Create a budget to start tracking expenses."]}),p.length>0&&e.jsxs("span",{className:"text-info d-block mt-1",children:[e.jsx("i",{className:"fas fa-lightbulb mr-1"}),"You can assign expenses to any budget, including expired and over-budget ones. Over-budget transactions are allowed and will be tracked."]})]})]}),t&&e.jsx("div",{className:"card bg-light mt-3",children:e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("h6",{className:"mb-0 font-weight-bold text-primary",children:t.budget_name}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>J(!R),children:[R?"Hide":"Show"," Details"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-weight-medium text-gray-700",children:["Budget Progress ",n>0&&"(Including Transaction)"]}),e.jsxs("span",{className:`font-weight-bold text-sm ${((t.spent||0)+n)/t.amount>1||((t.spent||0)+n)/t.amount>=.9?"text-danger":((t.spent||0)+n)/t.amount>=.8?"text-warning":((t.spent||0)+n)/t.amount>=.6?"text-info":"text-success"}`,children:[(((t.spent||0)+n)/t.amount*100).toFixed(1),"%",((t.spent||0)+n)/t.amount>1&&e.jsx("small",{className:"ml-1 text-danger font-weight-normal",children:"(Over Budget)"})]})]}),e.jsxs("div",{className:"position-relative",children:[e.jsxs("div",{className:"progress",style:{height:"12px",borderRadius:"6px",backgroundColor:"#f1f3f4",boxShadow:"inset 0 1px 2px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"progress-bar bg-secondary",style:{width:`${Math.min(100,(t.spent||0)/t.amount*100)}%`,borderRadius:"6px",transition:"width 0.6s ease-in-out",opacity:n>0?.7:1,position:(t.spent||0)/t.amount>1?"relative":"static"},children:(t.spent||0)/t.amount>1&&e.jsx("div",{className:"bg-danger",style:{position:"absolute",right:"-5px",top:"-2px",width:"10px",height:"16px",borderRadius:"2px",border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},title:"Budget exceeded"})}),n>0&&e.jsx("div",{className:`progress-bar ${((t.spent||0)+n)/t.amount>=.9?"bg-danger":((t.spent||0)+n)/t.amount>=.8?"bg-warning":((t.spent||0)+n)/t.amount>=.6?"bg-info":"bg-success"}`,role:"progressbar",style:{width:`${Math.min(100,n/t.amount*100)}%`,borderRadius:"6px",transition:"width 0.6s ease-in-out, background-color 0.3s ease",background:((t.spent||0)+n)/t.amount>=.9?"linear-gradient(45deg, #dc3545, #c82333)":((t.spent||0)+n)/t.amount>=.8?"linear-gradient(45deg, #ffc107, #e0a800)":((t.spent||0)+n)/t.amount>=.6?"linear-gradient(45deg, #17a2b8, #138496)":"linear-gradient(45deg, #28a745, #218838)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",marginLeft:`${(t.spent||0)/t.amount*100}%`,position:"absolute",left:0,top:0,height:"100%"},"aria-valuenow":Math.min(100,((t.spent||0)+n)/t.amount*100),"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Budget utilization including transaction: ${(((t.spent||0)+n)/t.amount*100).toFixed(1)}% of ${t.budget_name}`,children:((t.spent||0)+n)/t.amount>=.8&&e.jsx("div",{className:"progress-bar-striped progress-bar-animated",style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",background:"linear-gradient(45deg, rgba(255,255,255,0.2) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.2) 75%, transparent 75%, transparent)",backgroundSize:"1rem 1rem",animation:"progress-bar-stripes 1s linear infinite"}})}),n===0&&e.jsxs("div",{className:`progress-bar ${(t.spent||0)/t.amount>=.9?"bg-danger":(t.spent||0)/t.amount>=.8?"bg-warning":(t.spent||0)/t.amount>=.6?"bg-info":"bg-success"}`,role:"progressbar",style:{width:`${Math.min(100,(t.spent||0)/t.amount*100)}%`,borderRadius:"6px",transition:"width 0.6s ease-in-out, background-color 0.3s ease",background:(t.spent||0)/t.amount>=.9?"linear-gradient(45deg, #dc3545, #c82333)":(t.spent||0)/t.amount>=.8?"linear-gradient(45deg, #ffc107, #e0a800)":(t.spent||0)/t.amount>=.6?"linear-gradient(45deg, #17a2b8, #138496)":"linear-gradient(45deg, #28a745, #218838)",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",position:(t.spent||0)/t.amount>1?"relative":"static"},"aria-valuenow":Math.min(100,(t.spent||0)/t.amount*100),"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Budget utilization: ${((t.spent||0)/t.amount*100).toFixed(1)}% of ${t.budget_name}`,children:[(t.spent||0)/t.amount>=.8&&e.jsx("div",{className:"progress-bar-striped progress-bar-animated",style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",background:"linear-gradient(45deg, rgba(255,255,255,0.2) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.2) 75%, transparent 75%, transparent)",backgroundSize:"1rem 1rem",animation:"progress-bar-stripes 1s linear infinite"}}),(t.spent||0)/t.amount>1&&e.jsx("div",{className:"bg-danger",style:{position:"absolute",right:"-5px",top:"-2px",width:"10px",height:"16px",borderRadius:"2px",border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},title:"Budget exceeded"})]})]}),e.jsxs("div",{className:"position-absolute d-flex justify-content-between w-100",style:{top:"-2px",fontSize:"10px"},children:[e.jsx("div",{className:"text-muted",style:{marginLeft:"60%"},children:"60%"}),e.jsx("div",{className:"text-muted",style:{marginRight:"20%"},children:"80%"})]})]}),e.jsxs("div",{className:"mt-2 d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:`fas fa-circle mr-2 ${((t.spent||0)+n)/t.amount>1||((t.spent||0)+n)/t.amount>=.9?"text-danger":((t.spent||0)+n)/t.amount>=.8?"text-warning":((t.spent||0)+n)/t.amount>=.6?"text-info":"text-success"}`,style:{fontSize:"8px"}}),e.jsx("span",{className:"text-xs text-muted",children:((t.spent||0)+n)/t.amount>1?"Over Budget: Exceeds allocated amount":((t.spent||0)+n)/t.amount>=.9?"Critical: Near budget limit":((t.spent||0)+n)/t.amount>=.8?"Warning: Approaching budget limit":((t.spent||0)+n)/t.amount>=.6?"Moderate: Good progress":"Healthy: Well within budget"})]}),n>0&&e.jsxs("span",{className:"text-xs font-weight-bold text-primary",children:["+â‚±",n.toFixed(2)," this transaction"]})]})]}),e.jsxs("div",{className:"row text-sm",children:[e.jsxs("div",{className:"col-4 text-center",children:[e.jsxs("div",{className:"font-weight-bold text-gray-800",children:["â‚±",t.amount.toFixed(2)]}),e.jsx("div",{className:"text-muted",children:"Total Budget"})]}),e.jsxs("div",{className:"col-4 text-center",children:[e.jsxs("div",{className:"font-weight-bold text-gray-600",children:["â‚±",(t.spent||0).toFixed(2),n>0&&e.jsxs("span",{className:"text-primary font-weight-normal",children:[" (+â‚±",n.toFixed(2),")"]})]}),e.jsx("div",{className:"text-muted",children:n>0?"Current + Transaction":"Current Spent"})]}),e.jsxs("div",{className:"col-4 text-center",children:[e.jsxs("div",{className:`font-weight-bold ${t.amount-(t.spent||0)-n<0?"text-danger":"text-success"}`,children:["â‚±",(t.amount-(t.spent||0)-n).toFixed(2)]}),e.jsx("div",{className:"text-muted",children:n>0?"After Transaction":"Remaining"})]})]}),n>0&&e.jsxs("div",{className:"mt-2 p-2 bg-white rounded border",children:[e.jsx("small",{className:"text-muted d-block mb-1",children:"After this transaction:"}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"New spent amount:"}),e.jsxs("span",{className:"font-weight-bold",children:["â‚±",((t.spent||0)+n).toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"Remaining:"}),e.jsxs("span",{className:`font-weight-bold ${t.amount-(t.spent||0)-n<0?"text-danger":"text-success"}`,children:["â‚±",(t.amount-(t.spent||0)-n).toFixed(2)]})]})]}),R&&e.jsxs("div",{className:"mt-3 pt-3 border-top",children:[e.jsxs("div",{className:"row text-sm",children:[e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Category:"})," ",t.category_name||"Uncategorized"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Period:"})," ",t.period]})]}),e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Start:"})," ",new Date(t.start_date).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"End:"})," ",new Date(t.end_date).toLocaleDateString()]})]})]}),t.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("strong",{children:"Description:"})," ",t.description]})]})]})}),H.length>0&&e.jsx("div",{className:"mt-3",children:H.map((s,i)=>e.jsxs("div",{className:`alert alert-${s.severity==="error"?"danger":s.severity==="warning"?"warning":"info"} alert-dismissible fade show mb-2`,role:"alert",children:[e.jsx("i",{className:`fas ${s.severity==="error"?"fa-exclamation-triangle":s.severity==="warning"?"fa-exclamation-circle":"fa-info-circle"} mr-2`}),s.message]},i))}),D&&e.jsxs("div",{className:"mt-3 p-3 bg-light rounded text-center",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-warning mb-2"}),e.jsx("p",{className:"mb-2 text-muted",children:D}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{v(null),u&&(async()=>{B(!0);try{const r=await G.getInstance().getBudgets(u.id);if(r.source==="error")throw new Error(r.error||"Failed to load budgets");E(r.data),v(null)}catch(i){const r=i instanceof Error?i.message:"Failed to load budgets";v(r)}finally{B(!1)}})()},children:[e.jsx("i",{className:"fas fa-sync-alt mr-1"}),"Retry"]})]}),!j&&!D&&p.length===0&&l&&e.jsxs("div",{className:"mt-3 p-3 bg-light rounded text-center",children:[e.jsx("i",{className:"fas fa-info-circle text-muted mb-2"}),e.jsx("p",{className:"mb-2 text-muted",children:"No active budgets available for this category."}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>{},children:"Create Budget"})]})]})});ee.displayName="BudgetSelector";export{ee as B};
