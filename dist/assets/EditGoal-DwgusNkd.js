import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{i as L,u as W,r as n,L as F}from"./react-vendor-D4A9EtXC.js";import{i as O,u as Y,b as z,f as g,d as v,s as w,h as K}from"./index-BbApZ7g3.js";import{G as H}from"./GoalErrorBoundary-DGeAozu0.js";import{T as I,P}from"./GoalProgressSection-Cn9Xum9Y.js";import"./ContributionMobileFooter-vJRvixwu.js";/* empty css                       */import"./chart-vendor-B0c7K_uV.js";import"./ErrorBoundary-BBG4Eo_2.js";const J=()=>{const{id:h}=L(),b=W(),{currencySymbol:Q}=O(),{user:c}=Y(),{showSuccessToast:q,showErrorToast:o}=z(),[M,N]=n.useState("form"),[u,G]=n.useState(!1),[m,f]=n.useState(null),[R,j]=n.useState(!0),[X,U]=n.useState(null),[_,p]=n.useState(!1),[D,k]=n.useState(null),[r,C]=n.useState(null),$={goal_name:"",target_amount:"",target_date:"",current_amount:"0",priority:"medium",notes:"",status:"in_progress",share_with_family:!1},[a,x]=n.useState($);n.useEffect(()=>{(async()=>{if(c)try{j(!0);const{data:t,error:l}=await w.from("family_members").select(`
            id,
            family_id,
            role,
            status,
            families:family_id (
              id,
              family_name
            )
          `).eq("user_id",c.id).eq("status","active").limit(1);if(!l&&t&&t.length>0)p(!0),k(t[0].family_id),C(t[0].role);else{const{data:i,error:y}=await w.rpc("check_user_family",{p_user_id:c.id});if(!y&&i&&(Array.isArray(i)&&i.length>0&&i[0].is_member||i.is_member)){const S=Array.isArray(i)?i[0].family_id:i.family_id;p(!0),k(S);const{data:A,error:V}=await w.from("family_members").select("role").eq("user_id",c.id).eq("family_id",S).single();!V&&A&&C(A.role)}else p(!1),k(null),C(null)}}catch(t){console.error("Error checking family status:",t),p(!1)}finally{j(!1)}})()},[c]),n.useEffect(()=>{(async()=>{try{if(j(!0),!c){o("Please sign in to edit goals"),b("/login");return}const t=await K.fetchGoalById(h,c.id);if(t.error)throw new Error(t.error.message);if(!t.data){o("Goal not found"),b("/goals");return}const l=t.data;U(l),x({goal_name:l.goal_name||"",target_amount:l.target_amount?.toString()||"",target_date:l.target_date||"",current_amount:l.current_amount?.toString()||"0",priority:l.priority||"medium",notes:l.notes||"",status:l.status||"in_progress",is_family_goal:!!l.family_id,family_id:l.family_id||void 0,share_with_family:!!l.family_id}),j(!1)}catch(t){console.error("Error loading goal:",t);const l=t instanceof Error?t.message:"Unknown error occurred";o(`Failed to load goal: ${l}`),f(l),j(!1),b("/goals")}})()},[h,c,b,o]);const d=s=>{const{name:t,value:l}=s.target;x(i=>({...i,[t]:l}))},E=s=>{if(s.preventDefault(),f(null),!a.goal_name){o("Please enter a goal name");return}if(!a.target_amount||parseFloat(a.target_amount)<=0){o("Please enter a valid target amount");return}if(!a.target_date){o("Please select a target date");return}N("review"),window.scrollTo(0,0)},T=async()=>{try{if(G(!0),f(null),!c||!c.id)throw new Error("User not authenticated");const s={goal_name:a.goal_name,target_amount:parseFloat(a.target_amount),current_amount:parseFloat(a.current_amount)||0,target_date:a.target_date,priority:a.priority,notes:a.notes,status:a.status};_&&D&&(a.share_with_family&&!a.is_family_goal?s.family_id=D:!a.share_with_family&&a.is_family_goal&&(s.family_id=null)),parseFloat(a.current_amount)>=parseFloat(a.target_amount)?s.status="completed":s.status==="completed"&&parseFloat(a.current_amount)<parseFloat(a.target_amount)&&(s.status="in_progress");const{data:t,error:l}=await w.from("goals").update(s).eq("id",h).select().single();if(l)throw new Error(l.message);q("Goal updated successfully!"),b(`/goals/${h}`)}catch(s){console.error("Error updating goal:",s);const t=s instanceof Error?s.message:"Unknown error occurred";o(`Failed to update goal: ${t}`),f(t),G(!1)}},B=()=>{if(!a.target_amount||!a.target_date)return null;const s=parseFloat(a.target_amount),t=parseFloat(a.current_amount)||0,l=new Date(a.target_date),i=new Date,y=(l.getFullYear()-i.getFullYear())*12+(l.getMonth()-i.getMonth());return y<=0?s-t:(s-t)/y};if(R)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading goal data..."})]})}),e.jsxs("div",{className:"text-center my-5 hidden md:block",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("p",{className:"mt-3 text-gray-700",children:"Loading goal data..."})]})]});if(M==="review"){const s=B();return e.jsxs("div",{className:"container-fluid animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Review Changes"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>N("form"),className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center shadow-sm transition-all active:scale-95","aria-label":"Back to edit",children:e.jsx("i",{className:"fas fa-arrow-left text-xs"})})})]})}),m&&e.jsx("div",{className:"bg-rose-50 border border-rose-200 rounded-xl p-3 mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-rose-500 text-sm"}),e.jsx("p",{className:"text-xs text-rose-700",children:m})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-4 mb-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Edit Goal"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-edit text-white text-sm"})})]}),e.jsx("div",{className:"text-white text-lg font-bold mb-1 truncate",children:a.goal_name}),e.jsxs("div",{className:"text-white/70 text-xs",children:["Target: ",g(parseFloat(a.target_amount))]})]}),e.jsx("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.share_with_family?"bg-blue-100":"bg-indigo-100"}`,children:e.jsx("i",{className:`fas ${a.share_with_family?"fa-users":"fa-user"} ${a.share_with_family?"text-blue-500":"text-indigo-500"} text-sm`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-800",children:a.share_with_family?"Family Shared Goal":"Personal Goal"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:a.share_with_family?"Visible to family members":"Only visible to you"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-blue-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-bullseye text-blue-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Target"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:g(parseFloat(a.target_amount))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-piggy-bank text-emerald-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Current"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:g(parseFloat(a.current_amount)||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-amber-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-calendar text-amber-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Target Date"}),e.jsx("p",{className:"text-xs font-bold text-gray-800",children:v(a.target_date)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-rose-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-flag text-rose-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Priority"}),e.jsx("p",{className:"text-xs font-bold text-gray-800 capitalize",children:a.priority})]})]}),s&&e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-4 mb-3 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chart-line text-white text-sm"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white/80 text-[10px] font-medium uppercase tracking-wide",children:"Monthly Saving"}),e.jsx("p",{className:"text-white text-lg font-bold",children:g(s)}),e.jsxs("p",{className:"text-white/60 text-[10px]",children:["To reach goal by ",v(a.target_date)]})]})]})}),a.notes&&e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 mb-3",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide mb-1",children:"Notes"}),e.jsx("p",{className:"text-xs text-gray-700",children:a.notes})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>N("form"),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left text-xs"}),"Edit"]}),e.jsxs("button",{onClick:T,disabled:u,className:"flex-1 py-3 bg-emerald-500 hover:bg-emerald-600 text-white text-sm font-medium rounded-xl transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx("i",{className:`fas ${u?"fa-spinner fa-spin":"fa-check"} text-xs`}),u?"Updating...":"Update Goal"]})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[e.jsx("h1",{className:"h3 mb-0 text-gray-800",children:"Review Your Changes"}),e.jsxs(F,{to:`/goals/${h}`,className:"btn btn-sm btn-secondary shadow-sm",children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm mr-2"})," Cancel"]})]}),m&&e.jsxs("div",{className:"alert alert-danger mb-4",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),m]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-8 mx-auto",children:e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.2s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsx("h6",{className:"m-0 font-weight-bold text-primary",children:"Goal Details"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:"Goal Name"}),e.jsx("h4",{className:"h4 mb-0 font-weight-bold text-gray-800",children:a.goal_name})]})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row no-gutters align-items-center",children:e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1",children:"Goal Type"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800 d-flex align-items-center",children:a.share_with_family?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2",children:e.jsx("i",{className:"fas fa-users text-info"})}),"Family Shared Goal",e.jsx("span",{className:"badge badge-info ml-2",children:"Visible to family members"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2",children:e.jsx("i",{className:"fas fa-user text-primary"})}),"Personal Goal",e.jsx("span",{className:"badge badge-primary ml-2",children:"Only visible to you"})]})})]})})})})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6 mb-4 mb-md-0",children:e.jsx("div",{className:"card border-left-primary shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:"Target Amount"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:g(parseFloat(a.target_amount))})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-bullseye fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-left-success shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-success text-uppercase mb-1",children:"Current Amount"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:g(parseFloat(a.current_amount)||0)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-piggy-bank fa-2x text-gray-300"})})]})})})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6 mb-4 mb-md-0",children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1",children:"Target Date"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:v(a.target_date)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-calendar fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-left-warning shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-warning text-uppercase mb-1",children:"Priority"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800 text-capitalize",children:a.priority})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-flag fa-2x text-gray-300"})})]})})})})]}),s&&e.jsx("div",{className:"card bg-success text-white shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.4s"},children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-white text-uppercase mb-1",children:"Recommended Monthly Saving"}),e.jsx("div",{className:"h3 mb-0 font-weight-bold text-white",children:g(s)}),e.jsxs("div",{className:"text-white-50 small mt-2",children:["To reach your goal by ",v(a.target_date)]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-chart-line fa-3x text-white-50"})})]})})}),a.notes&&e.jsx("div",{className:"card bg-light mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.5s"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:"Notes"}),e.jsx("p",{className:"mb-0",children:a.notes})]})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsxs("button",{onClick:()=>N("form"),className:"btn btn-light btn-icon-split mr-2",children:[e.jsx("span",{className:"icon text-gray-600",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("span",{className:"text",children:"Back to Edit"})]}),e.jsxs("button",{onClick:T,disabled:u,className:"btn btn-success btn-icon-split",children:[e.jsx("span",{className:"icon text-white-50",children:e.jsx("i",{className:u?"fas fa-spinner fa-spin":"fas fa-check"})}),e.jsx("span",{className:"text",children:u?"Updating...":"Update Goal"})]})]})]})]})})})]})]})}return e.jsxs("div",{className:"container-fluid animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Edit Goal"}),e.jsx(F,{to:`/goals/${h}`,className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center shadow-sm transition-all active:scale-95","aria-label":"Back to goal details",children:e.jsx("i",{className:"fas fa-arrow-left text-xs"})})]})}),m&&e.jsx("div",{className:"bg-rose-50 border border-rose-200 rounded-xl p-3 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-rose-500 text-sm"}),e.jsx("p",{className:"text-xs text-rose-700",children:m})]}),e.jsx("button",{onClick:()=>f(null),className:"text-rose-500",children:e.jsx("i",{className:"fas fa-times text-xs"})})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-4",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("h6",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-edit text-indigo-500 text-[10px]"}),"Goal Information"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:["Goal Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",name:"goal_name",value:a.goal_name,onChange:d,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"e.g., Vacation, Emergency Fund",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:["Target Amount ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"₱"}),e.jsx("input",{type:"number",name:"target_amount",value:a.target_amount,onChange:d,className:"w-full pl-7 pr-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Current Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"₱"}),e.jsx("input",{type:"number",name:"current_amount",value:a.current_amount,onChange:d,className:"w-full pl-7 pr-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"0.00",step:"0.01",min:"0"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[e.jsx(I,{selectedDate:a.target_date,onDateSelect:s=>x({...a,target_date:s}),required:!0,className:"mb-0"}),e.jsx(P,{selectedPriority:a.priority,onPrioritySelect:s=>x({...a,priority:s}),required:!0,showDescription:!1,className:"mb-0"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Status"}),e.jsxs("select",{name:"status",value:a.status,onChange:d,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all bg-white",children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",value:a.notes,onChange:d,rows:3,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all resize-none",placeholder:"Add any details about your goal"})]}),_&&e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 mb-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-users text-blue-500 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-800",children:"Family Sharing"}),e.jsxs("p",{className:"text-[10px] text-blue-600",children:["Role: ",r?r.charAt(0).toUpperCase()+r.slice(1):"N/A"]})]})]}),e.jsxs("label",{className:`flex items-center gap-2 ${r==="viewer"?"opacity-50":""}`,children:[e.jsx("input",{type:"checkbox",checked:a.share_with_family,disabled:r==="viewer",onChange:s=>x({...a,share_with_family:s.target.checked}),className:"w-4 h-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Share with family"})]}),a.share_with_family!==a.is_family_goal&&e.jsxs("p",{className:"text-[10px] text-amber-600 mt-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),a.share_with_family?"Will be shared with family":"Will no longer be shared"]})]}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-right text-xs"}),"Continue to Review"]})]})})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[e.jsx("h1",{className:"h3 mb-0 text-gray-800",children:"Edit Goal"}),e.jsxs(F,{to:`/goals/${h}`,className:"btn btn-sm btn-secondary shadow-sm",children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm mr-2"})," Back to Goal Details"]})]}),m&&e.jsxs("div",{className:"alert alert-danger mb-4",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),m,e.jsx("button",{onClick:()=>f(null),className:"close","aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 mx-auto",children:e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.2s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsx("h6",{className:"m-0 font-weight-bold text-primary",children:"Goal Information"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"goal_name",className:"font-weight-bold text-gray-800",children:["Goal Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"goal_name",name:"goal_name",value:a.goal_name,onChange:d,className:"form-control form-control-user",placeholder:"e.g., Vacation, Emergency Fund, New Car",required:!0}),e.jsx("small",{className:"form-text text-muted",children:"Give your goal a clear, specific name"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"target_amount",className:"font-weight-bold text-gray-800",children:["Target Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:"₱"})}),e.jsx("input",{type:"number",id:"target_amount",name:"target_amount",value:a.target_amount,onChange:d,className:"form-control",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"current_amount",className:"font-weight-bold text-gray-800",children:"Current Amount"}),e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:"₱"})}),e.jsx("input",{type:"number",id:"current_amount",name:"current_amount",value:a.current_amount,onChange:d,className:"form-control",placeholder:"0.00",step:"0.01",min:"0"})]}),e.jsx("small",{className:"form-text text-muted",children:"Money you've already saved towards this goal"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(I,{selectedDate:a.target_date,onDateSelect:s=>x({...a,target_date:s}),required:!0,label:"Target Date"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(P,{selectedPriority:a.priority,onPrioritySelect:s=>x({...a,priority:s}),required:!0,showDescription:!0,label:"Priority"})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"status",className:"font-weight-bold text-gray-800",children:"Status"}),e.jsxs("select",{id:"status",name:"status",value:a.status,onChange:d,className:"form-control",children:[e.jsx("option",{value:"not_started",children:"Not Started"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx("small",{className:"form-text text-muted",children:"Current status of your goal"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"notes",className:"font-weight-bold text-gray-800",children:"Notes (Optional)"}),e.jsx("textarea",{id:"notes",name:"notes",value:a.notes,onChange:d,className:"form-control",rows:4,placeholder:"Add any additional details or motivation for your goal"})]}),_&&e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"card border-left-info shadow p-3 mb-3",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h5",{className:"font-weight-bold text-info mb-0",children:[e.jsx("i",{className:"fas fa-users mr-2"}),"Family Goal Sharing"]}),e.jsx("div",{className:"alert alert-light mt-2 mb-0 py-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),e.jsxs("strong",{children:["Your family role: ",r?r.charAt(0).toUpperCase()+r.slice(1):"N/A"]}),r==="viewer"&&e.jsx("span",{className:"text-warning ml-2",children:"• Viewers can only view goals but cannot contribute to them or modify family goal settings"}),r==="member"&&e.jsx("span",{className:"text-success ml-2",children:"• Members can contribute to goals and modify family goal sharing settings"}),r==="admin"&&e.jsx("span",{className:"text-primary ml-2",children:"• Admins have full permissions including goal management and family administration"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("input",{type:"checkbox",className:"mr-2",id:"shareWithFamily",name:"share_with_family",checked:a.share_with_family,disabled:r==="viewer",onChange:s=>x({...a,share_with_family:s.target.checked})}),e.jsxs("label",{className:`font-weight-bold text-nowrap mb-0 ${r==="viewer"?"text-muted":""}`,htmlFor:"shareWithFamily",children:["Share this goal with my family ",r==="viewer"&&"(Not available for viewers)"]})]}),e.jsxs("small",{className:"form-text text-muted d-block",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),r==="viewer"?"Viewers can only view family goals but cannot modify family goal sharing settings or contribute to goals.":"When shared, this goal will appear in your family dashboard and family members can view and contribute to it."]}),e.jsxs("small",{className:"form-text text-muted d-block mt-1",children:[e.jsx("i",{className:"fas fa-lock mr-1"}),"If not shared, this will be a personal goal only visible to you."]}),a.share_with_family!==a.is_family_goal&&e.jsxs("div",{className:"alert alert-warning mt-2 py-2 mb-0",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),a.share_with_family?"This goal will now be shared with your family members.":"This goal will no longer be shared with your family members."]})]}),e.jsx("div",{className:"col-md-4"})]})]})}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"submit",className:"btn btn-primary btn-icon-split",children:[e.jsx("span",{className:"icon text-white-50",children:e.jsx("i",{className:"fas fa-arrow-right"})}),e.jsx("span",{className:"text",children:"Continue to Review"})]})})]})})]})}),e.jsx("div",{className:"col-lg-4 d-none d-lg-block",children:e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.3s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsx("h6",{className:"m-0 font-weight-bold text-primary",children:"Goal Editing Tips"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(78, 115, 223, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-bullseye text-primary"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Stay Focused"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Keep your goal specific and measurable"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(28, 200, 138, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-balance-scale text-success"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Adjust Realistically"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Make changes that reflect your current situation"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(246, 194, 62, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-clock text-warning"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Timeline Updates"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Set achievable deadlines if extending your goal"})]}),e.jsxs("div",{className:"mb-0",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(54, 185, 204, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-chart-line text-info"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Track Progress"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Update current amount to reflect your savings"})]})]})]})})]})]})]})};function ce(){return e.jsx(H,{children:e.jsx(J,{})})}export{ce as default};
