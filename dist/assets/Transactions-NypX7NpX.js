const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdfmake-B9-gh6SH.js","assets/react-vendor-D4A9EtXC.js","assets/vfs_fonts-DtMofV48.js"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{r as g,L as M,e as Ee,u as de}from"./react-vendor-D4A9EtXC.js";import{f as C,c as R,d as ae,u as q,b as X,s as D,_ as se}from"./index-BbApZ7g3.js";import{d as H,H as W}from"./chart-vendor-B0c7K_uV.js";import{E as Te}from"./enhancedTransactionService-DaGM5j0a.js";import{T as ne}from"./transactions-CJCWbHAc.js";import{p as re}from"./utils-vendor-DvLzUnYR.js";import{P as j,A as $,T as N,a as oe,b as L,c as ke,W as Ae,F as Ie,d as De}from"./index-CY0iYKBs.js";/* empty css                       */import"./transactionService-B7dXImam.js";const me=g.memo(({totalIncome:a,totalExpenses:r,netCashflow:o,onToggleTip:l})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block md:hidden mb-4",children:[e.jsxs("div",{className:`bg-gradient-to-br ${o>=0?"from-emerald-500 via-teal-500 to-cyan-500":"from-rose-500 via-red-500 to-orange-500"} rounded-2xl p-4 mb-3 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Net Cashflow"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-exchange-alt text-white text-sm"})})]}),e.jsx("div",{className:"text-white text-2xl font-bold mb-1",children:C(o)}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:`text-xs font-medium ${o>=0?"text-green-200":"text-red-200"}`,children:[e.jsx("i",{className:`fas fa-${o>=0?"arrow-up":"arrow-down"} text-[10px] mr-1`}),o>=0?"Positive":"Negative"," cashflow"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-arrow-up text-emerald-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Income"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:C(a)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-rose-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-arrow-down text-rose-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Expenses"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:C(r)})]})]})]}),e.jsxs("div",{className:"desktop-summary-cards",children:[e.jsx("div",{className:"col-xl-4 col-md-6 col-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-success shadow h-100 py-2 animate__animated animate__fadeIn",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-weight-bold text-success text-uppercase mb-1 d-flex align-items-center",style:{fontSize:"0.65rem"},children:["Total Income",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>l("totalIncome",s),"aria-label":"Total income information"})})]}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:C(a)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-solid fa-peso-sign fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-4 col-md-6 col-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-danger shadow h-100 py-2 animate__animated animate__fadeIn",style:{animationDelay:"0.1s"},children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-weight-bold text-danger text-uppercase mb-1 d-flex align-items-center",style:{fontSize:"0.65rem"},children:["Total Expenses",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>l("totalExpenses",s),"aria-label":"Total expenses information"})})]}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:C(r)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-credit-card fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-4 col-md-6 col-12 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-primary shadow h-100 py-2 animate__animated animate__fadeIn",style:{animationDelay:"0.2s"},children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1 d-flex align-items-center",style:{fontSize:"0.65rem"},children:["Net Cashflow",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>l("netCashflow",s),"aria-label":"Net cashflow information"})})]}),e.jsx("div",{className:`h5 mb-0 font-weight-bold ${o>=0?"text-success":"text-danger"}`,children:C(o)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-wallet fa-2x text-gray-300"})})]})})})})]}),e.jsx("style",{children:`
        .desktop-summary-cards { display: none; }
        @media (min-width: 768px) {
          .desktop-summary-cards { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; }
        }
      `})]}));me.displayName="TransactionSummaryCards";const xe=g.memo(({lineChartOptions:a,pieChartOptions:r,filteredTransactions:o,periodTitle:l,expensesRatio:s,onToggleTip:d})=>{const[x,i]=g.useState("overview"),m=a?{...a,chart:{...a.chart,type:"column",height:280,spacing:[10,10,10,10],backgroundColor:"transparent"},legend:{enabled:!1},xAxis:{...a.xAxis,labels:{...a.xAxis?.labels,style:{fontSize:"10px",color:"#6b7280"},rotation:0},lineColor:"#e5e7eb",tickColor:"#e5e7eb"},yAxis:{...a.yAxis,gridLineColor:"#f3f4f6",gridLineDashStyle:"Dot",labels:{...a.yAxis?.labels,style:{fontSize:"11px",color:"#6b7280"},formatter:function(){return this.value>=1e3?`₱${(this.value/1e3).toFixed(0)}k`:`₱${this.value}`}},title:{text:null}},plotOptions:{column:{pointPadding:.1,borderWidth:0,borderRadius:4,groupPadding:.15}},tooltip:{shared:!0,useHTML:!0,backgroundColor:"white",borderColor:"#e5e7eb",borderRadius:8,shadow:!0,style:{fontSize:"11px"}},series:a.series?.map(c=>({...c,type:"column",color:c.name==="Income"?"#10b981":"#ef4444"}))}:null,y=r?{...r,chart:{...r.chart,height:300,backgroundColor:"transparent"},plotOptions:{...r.plotOptions,pie:{...r.plotOptions?.pie,dataLabels:{enabled:!1},showInLegend:!0,size:"70%",innerSize:"50%",center:["50%","35%"],colors:["#60a5fa","#818cf8","#34d399","#fb923c","#f87171","#a78bfa","#fbbf24","#6ee7b7"]}},legend:{enabled:!0,layout:"horizontal",align:"center",verticalAlign:"bottom",itemStyle:{fontSize:"11px",fontWeight:"normal",color:"#374151"},symbolRadius:2,symbolHeight:10,symbolWidth:10,itemMarginTop:8,itemMarginBottom:4,padding:0},title:{text:null}}:null;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block md:hidden mb-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"flex bg-slate-50",children:[e.jsxs("button",{onClick:()=>i("overview"),className:`flex-1 py-3.5 text-sm font-semibold transition-all relative ${x==="overview"?"text-indigo-600 bg-white":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("i",{className:"fas fa-chart-bar mr-2 text-xs"}),"Overview",x==="overview"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]}),e.jsxs("button",{onClick:()=>i("categories"),className:`flex-1 py-3.5 text-sm font-semibold transition-all relative ${x==="categories"?"text-indigo-600 bg-white":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("i",{className:"fas fa-chart-pie mr-2 text-xs"}),"Categories",x==="categories"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]})]}),e.jsx("div",{className:"p-4",children:x==="overview"?m&&o.length>0?e.jsxs("div",{className:"animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-6 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-emerald-500"}),"Income"]}),e.jsxs("span",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-red-500"}),"Expenses"]})]}),e.jsx(H,{highcharts:W,options:m})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-chart-bar text-gray-400 text-2xl"})}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No transaction data yet"}),e.jsxs(M,{to:"/transactions/add",className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs"}),"Add Transaction"]})]}):y&&o.filter(c=>c.type==="expense").length>0?e.jsx("div",{className:"animate__animated animate__fadeIn",children:e.jsx(H,{highcharts:W,options:y})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-chart-pie text-gray-400 text-2xl"})}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"No expense data to categorize"}),e.jsxs(M,{to:"/transactions/add",className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white text-sm font-medium rounded-lg hover:bg-indigo-600 transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs"}),"Add Expense"]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden mt-3",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h6",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-percentage text-indigo-500 text-[10px]"}),"Spending Ratio"]}),o.length>0&&e.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full ${s>100?"bg-rose-100 text-rose-600":s>80?"bg-amber-100 text-amber-600":"bg-emerald-100 text-emerald-600"}`,children:s>100?"Overspending":s>80?"Warning":"On Track"})]}),e.jsx("div",{className:"p-4",children:o.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Income Spent"}),e.jsx("span",{className:`text-sm font-bold ${s>100?"text-rose-600":s>80?"text-amber-600":"text-emerald-600"}`,children:R(s)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${s>100?"bg-rose-500":s>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(s,100)}%`}})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:s>100?"You are spending more than you earn":s>80?"Consider reducing some expenses":"Great job keeping expenses under control!"})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-balance-scale text-gray-300 text-2xl mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add transactions to see ratio"})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden mt-3",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("h6",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-heartbeat text-indigo-500 text-[10px]"}),"Financial Status"]})}),e.jsx("div",{className:"p-4",children:o.length>0?e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 ${s>100?"bg-rose-100":s>80?"bg-amber-100":"bg-emerald-100"}`,children:e.jsx("i",{className:`fas fa-${s>100?"exclamation-triangle":s>80?"exclamation-circle":"check-circle"} text-xl ${s>100?"text-rose-500":s>80?"text-amber-500":"text-emerald-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-base font-bold mb-0.5 ${s>100?"text-rose-600":s>80?"text-amber-600":"text-emerald-600"}`,children:s>100?"Overspending":s>80?"Watch Spending":"On Track"}),e.jsx("p",{className:"text-[11px] text-gray-500 leading-tight",children:s>100?"You're spending more than you earn. Review your budget.":s>80?"You're close to your limit. Consider cutting back.":"Keep up the good financial habits!"})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-heartbeat text-gray-300 text-2xl mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Add transactions to see status"})]})})]})]}),e.jsxs("div",{className:"desktop-charts-section",children:[e.jsxs("div",{className:"col-xl-8 col-lg-7",children:[e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.3s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center",children:["Income vs Expenses Trend - ",l,e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:c=>d("linechart",c),"aria-label":"Line chart information"})})]})}),e.jsx("div",{className:"card-body",children:a&&o.length>0?e.jsxs(e.Fragment,{children:[e.jsx(H,{highcharts:W,options:a}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsx("i",{className:"fas fa-lightbulb text-warning mr-1"}),e.jsx("strong",{children:"Tip:"})," Hover over the lines to see exact amounts."]})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-chart-line fa-3x text-gray-300"})}),e.jsx("h5",{className:"text-gray-500 font-weight-light",children:"No transaction data available"}),e.jsx("p",{className:"text-gray-500 mb-0 small",children:"Add transactions to see your income and expense trends."}),e.jsxs(M,{to:"/transactions/add",className:"inline-flex items-center justify-center px-4 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-medium rounded shadow-sm transition-colors mt-3",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-1"})," Add New Transaction"]})]})})]}),e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.4s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"d-flex align-items-center mb-1 mb-md-0",children:["Spending to Income Ratio",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:c=>d("ratio",c),"aria-label":"Spending ratio information"})})]}),o.length>0&&e.jsx("div",{className:`badge badge-${s>100?"danger":s>80?"warning":"success"} ml-2`,children:s>100?"Overspending":s>80?"Warning":"On Track"})]})}),e.jsx("div",{className:"card-body",children:o.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2 d-flex justify-content-between",children:[e.jsx("span",{children:"Percentage of Income Spent"}),e.jsx("span",{className:`font-weight-bold ${s>100?"text-danger":s>80?"text-warning":"text-success"}`,children:R(s)})]}),e.jsx("div",{className:"progress mb-4",children:e.jsx("div",{className:`progress-bar ${s>100?"bg-danger":s>80?"bg-warning":"bg-success"}`,role:"progressbar",style:{width:`${s>100?100:s}%`},"aria-valuenow":s>100?100:s,"aria-valuemin":0,"aria-valuemax":100})}),e.jsx("div",{className:"mt-4 text-xs font-weight-bold text-gray-500 text-uppercase mb-1",children:"Financial Health"}),e.jsxs("div",{className:"row spending-ratio-cards",children:[e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card bg-success text-white shadow",children:e.jsxs("div",{className:"card-body py-3",children:["Healthy",e.jsx("div",{className:"text-white-50 small",children:"Spending less than 70% of income"})]})})}),e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card bg-warning text-white shadow",children:e.jsxs("div",{className:"card-body py-3",children:["Caution",e.jsx("div",{className:"text-white-50 small",children:"Spending 70-90% of income"})]})})}),e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card bg-danger text-white shadow",children:e.jsxs("div",{className:"card-body py-3",children:["Alert",e.jsx("div",{className:"text-white-50 small",children:"Spending over 90% of income"})]})})})]})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-balance-scale fa-3x text-gray-300"})}),e.jsx("h5",{className:"text-gray-500 font-weight-light",children:"No spending ratio data"}),e.jsx("p",{className:"text-gray-500 mb-0 small",children:"Add income and expense transactions to see your spending ratio."})]})})]})]}),e.jsxs("div",{className:"col-xl-4 col-lg-5",children:[e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.3s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center",children:["Expense Distribution - ",l,e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:c=>d("piechart",c),"aria-label":"Pie chart information"})})]})}),e.jsx("div",{className:"card-body",children:r&&o.filter(c=>c.type==="expense").length>0?e.jsxs(e.Fragment,{children:[e.jsx(H,{highcharts:W,options:r}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsx("i",{className:"fas fa-lightbulb text-warning mr-1"}),e.jsx("strong",{children:"Tip:"})," Click on a segment to see detailed transactions for that category."]})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-chart-pie fa-3x text-gray-300"})}),e.jsx("h5",{className:"text-gray-500 font-weight-light",children:"No expense data"}),e.jsx("p",{className:"text-gray-500 mb-0 small",children:"Add expense transactions to see your spending distribution."})]})})]}),e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn financial-status-card",style:{animationDelay:"0.4s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center",children:["Financial Status",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:c=>d("status",c),"aria-label":"Financial status information"})})]})}),e.jsx("div",{className:"card-body",children:o.length>0?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:`fas fa-${s>100?"exclamation-triangle text-danger":s>80?"exclamation-circle text-warning":"check-circle text-success"} fa-3x mb-3`})}),e.jsx("h4",{className:"font-weight-bold",style:{color:s>100?"#e74a3b":s>80?"#f6c23e":"#1cc88a"},children:s>100?"Overspending":s>80?"Watch Spending":"On Track"}),e.jsxs("p",{className:"mb-0",children:["You've spent ",R(s)," of your income.",s>100?" You're spending more than you earn.":s>80?" Consider reducing some expenses.":" Keep up the good financial habits!"]})]}):e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-heartbeat fa-3x text-gray-300"})}),e.jsx("h5",{className:"text-gray-500 font-weight-light",children:"No financial status data"}),e.jsx("p",{className:"text-gray-500 mb-0 small",children:"Add transactions to see your financial health status."})]})})]})]})]}),e.jsx("style",{children:`
        .desktop-charts-section { display: none; }
        @media (min-width: 768px) {
          .desktop-charts-section { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; }
        }
      `})]})});xe.displayName="TransactionCharts";const ze=(a,r,o)=>{let l=[...a];if(r.type!=="all"&&(l=l.filter(s=>s.type===r.type)),r.accountId!=="all"&&(l=l.filter(s=>s.account_id===r.accountId)),r.categoryId!=="all"&&(r.categoryId==="uncategorized"?l=l.filter(s=>!s.category_id):l=l.filter(s=>s.category_id&&s.category_id===r.categoryId)),r.goal_id&&(l=l.filter(s=>s.goal_id===r.goal_id)),(r.month!=="all"||r.year!=="all")&&(l=l.filter(s=>{const d=new Date(s.date);if(r.month!=="all"){const x=parseInt(r.month);if(d.getMonth()!==x)return!1}if(r.year!=="all"){const x=parseInt(r.year);if(d.getFullYear()!==x)return!1}return!0})),r.search.trim()!==""){const s=r.search.toLowerCase();l=l.filter(d=>d.description.toLowerCase().includes(s))}return r.scope!=="all"&&o&&(l=l.filter(s=>r.scope==="personal"?s.user_id===o:r.scope==="family"?s.user_id!==o:!0)),l},$e=a=>{const r=a.filter(i=>i.type==="income").reduce((i,m)=>i+m.amount,0),o=a.filter(i=>i.type==="expense").reduce((i,m)=>i+m.amount,0),l=a.filter(i=>i.type==="contribution").reduce((i,m)=>i+m.amount,0),s=o+l,d=r-s,x=r>0?s/r*100:0;return{totalIncome:r,totalExpenses:s,totalContributions:l,netCashflow:d,expensesRatio:x}},Le=a=>a.month!=="all"&&a.year!=="all"?`${new Date(0,parseInt(a.month)).toLocaleString("default",{month:"long"})} ${a.year}`:a.month!=="all"?`${new Date(0,parseInt(a.month)).toLocaleString("default",{month:"long"})} (All Years)`:a.year!=="all"?a.year:"All Time",le=(a,r,o)=>{if(!a||!o)return"Uncategorized";if(r==="income"){const d=o.incomeCategories.find(x=>x.id===a);return d?d.category_name:"Uncategorized"}else if(r==="expense"||r==="contribution"){const d=o.expenseCategories.find(x=>x.id===a);return d?d.category_name:"Uncategorized"}const l=o.incomeCategories.find(d=>d.id===a);if(l)return l.category_name;const s=o.expenseCategories.find(d=>d.id===a);return s?s.category_name:"Uncategorized"},ie=(a,r)=>{if(!r)return"Unknown Account";const o=r.accounts.find(l=>l.id===a);return o?o.account_name:"Unknown Account"},ce=(a,r,o)=>{if(!r)return"all";const l=r.incomeCategories.find(d=>d.id===a),s=r.expenseCategories.find(d=>d.id===a);return l&&s?o==="income"||o==="expense"||o==="contribution"?o:(s.category_name==="Housing","expense"):l?"income":s?"expense":"all"},Me=(a,r,o)=>{if(!a.length)return{lineChartOptions:null,pieChartOptions:null};let l=[],s=[],d=[];if(o.month!=="all"&&o.year!=="all"){const c=parseInt(o.year),t=parseInt(o.month),n=new Date(c,t+1,0).getDate();l=Array.from({length:n},(h,u)=>`${t+1}/${u+1}`),s=Array(n).fill(0),d=Array(n).fill(0),a.forEach(h=>{const u=new Date(h.date);if(u.getFullYear()===c&&u.getMonth()===t){const _=u.getDate()-1;h.type==="income"?s[_]+=h.amount:(h.type==="expense"||h.type==="contribution")&&(d[_]+=h.amount)}})}else if(o.year!=="all"){const c=parseInt(o.year);l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=Array(12).fill(0),d=Array(12).fill(0),a.forEach(n=>{const h=new Date(n.date);if(h.getFullYear()===c){const u=h.getMonth();n.type==="income"?s[u]+=n.amount:(n.type==="expense"||n.type==="contribution")&&(d[u]+=n.amount)}})}else if(o.month!=="all"){const c=parseInt(o.month),t=Array.from(new Set(a.map(n=>new Date(n.date).getFullYear()))).sort();l=t.map(n=>n.toString()),s=Array(t.length).fill(0),d=Array(t.length).fill(0),a.forEach(n=>{const h=new Date(n.date);if(h.getMonth()===c){const u=t.indexOf(h.getFullYear());u>=0&&(n.type==="income"?s[u]+=n.amount:(n.type==="expense"||n.type==="contribution")&&(d[u]+=n.amount))}})}else{const c=Array.from(new Set(a.map(t=>new Date(t.date).getFullYear()))).sort();l=c.map(t=>t.toString()),s=Array(c.length).fill(0),d=Array(c.length).fill(0),a.forEach(t=>{const n=new Date(t.date),h=c.indexOf(n.getFullYear());h>=0&&(t.type==="income"?s[h]+=t.amount:(t.type==="expense"||t.type==="contribution")&&(d[h]+=t.amount))})}const x={chart:{type:"line",style:{fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},backgroundColor:"transparent",animation:{duration:1e3},height:350},title:{text:null},xAxis:{categories:l,labels:{style:{color:"#858796"}}},yAxis:{title:{text:null},gridLineColor:"#eaecf4",gridLineDashStyle:"dash",labels:{formatter:function(){return C(this.value)},style:{color:"#858796"}}},tooltip:{shared:!0,useHTML:!0,style:{fontSize:"12px",fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},valuePrefix:"$"},plotOptions:{line:{marker:{radius:4,symbol:"circle"},lineWidth:3},series:{animation:{duration:1e3}}},credits:{enabled:!1},series:[{name:"Income",data:s,color:"#1cc88a"},{name:"Expenses",data:d,color:"#e74a3b"}]},i={};a.forEach(c=>{if(c.type==="expense"||c.type==="contribution"){let t="Uncategorized";if(c.category_id){const n=r.expenseCategories.find(h=>h.id===c.category_id);n&&(t=n.category_name)}c.type==="contribution"&&(t=c.goal_id?"Goal Contribution":"Contribution"),i[t]||(i[t]=0),i[t]+=c.amount}});const m=Object.keys(i).map(c=>({name:c,y:i[c],sliced:!1,selected:!1}));return m.sort((c,t)=>t.y-c.y),m.length>0&&(m[0].sliced=!0,m[0].selected=!0),{lineChartOptions:x,pieChartOptions:{chart:{type:"pie",backgroundColor:"transparent",style:{fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},height:350},title:{text:null},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b> (${point.y:,.2f})",valuePrefix:"$"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{fontWeight:"normal"},connectorWidth:0,distance:15},showInLegend:!1,size:"85%"}},legend:{enabled:!1},series:[{name:"Expenses",colorByPoint:!0,data:m}],credits:{enabled:!1}}}},Be=(a=5)=>Array.from({length:a},(r,o)=>new Date().getFullYear()-o),Ue=a=>{const r=a?.get("month")||"all",o=a?.get("year")||"all",l=a?.get("type")||"all",s=a?.get("categoryId")||"all",d=a?.get("accountId")||"all",x=a?.get("search")||"",i=a?.get("goal_id")||void 0;return{type:l,accountId:d,categoryId:s,startDate:"",endDate:"",minAmount:"",maxAmount:"",sortBy:"date",sortOrder:"desc",month:r,year:o,search:x,scope:"all",goal_id:i,currentPage:1,pageSize:10}},V=g.memo(({filter:a,userData:r,onFilterChange:o,onResetFilters:l,isFiltering:s})=>{const d=Be(5),[x,i]=g.useState(!1),m=a.type!=="all"||a.accountId!=="all"||a.categoryId!=="all"||a.month!=="all"||a.year!=="all"||a.search!==""||a.scope!=="all",y=()=>{let t=0;return a.type!=="all"&&t++,a.accountId!=="all"&&t++,a.categoryId!=="all"&&t++,a.month!=="all"&&t++,a.year!=="all"&&t++,a.search!==""&&t++,a.scope!=="all"&&t++,t},c=t=>t!=="all"?["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][parseInt(t)]:"";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block md:hidden px-3 py-2 bg-gray-50 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[e.jsxs("button",{onClick:()=>i(!x),className:`flex-shrink-0 flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[11px] font-medium transition-all ${m?"bg-indigo-500 text-white shadow-md":"bg-white text-gray-600 border border-gray-200"}`,children:[e.jsx("i",{className:"fas fa-sliders-h text-[10px]"}),"Filters",m&&e.jsx("span",{className:"w-4 h-4 rounded-full bg-white/30 flex items-center justify-center text-[9px]",children:y()})]}),["all","income","expense"].map(t=>e.jsx("button",{onClick:()=>o({target:{name:"type",value:t}}),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-[11px] font-medium transition-all ${a.type===t?t==="income"?"bg-emerald-500 text-white shadow-sm":t==="expense"?"bg-rose-500 text-white shadow-sm":"bg-indigo-500 text-white shadow-sm":"bg-white text-gray-600 border border-gray-200"}`,children:t==="all"?"All":t.charAt(0).toUpperCase()+t.slice(1)},t)),a.month!=="all"&&e.jsx("span",{className:"flex-shrink-0 px-2 py-1 rounded-full text-[10px] font-medium bg-blue-100 text-blue-700",children:c(a.month)}),a.year!=="all"&&e.jsx("span",{className:"flex-shrink-0 px-2 py-1 rounded-full text-[10px] font-medium bg-purple-100 text-purple-700",children:a.year}),m&&e.jsx("button",{onClick:l,className:"flex-shrink-0 w-7 h-7 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]}),x&&e.jsxs("div",{className:"mt-2 bg-white rounded-xl shadow-lg border border-gray-100 p-3 animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Type"}),e.jsxs("select",{name:"type",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400",value:a.type,onChange:o,disabled:s,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"income",children:"Income"}),e.jsx("option",{value:"expense",children:"Expense"}),e.jsx("option",{value:"contribution",children:"Contribution"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Account"}),e.jsxs("select",{name:"accountId",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400",value:a.accountId,onChange:o,disabled:s,children:[e.jsx("option",{value:"all",children:"All Accounts"}),r?.accounts.map(t=>e.jsx("option",{value:t.id,children:t.account_name},t.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Category"}),e.jsxs("select",{name:"categoryId",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400",value:a.categoryId,onChange:o,disabled:s,children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("option",{value:"uncategorized",children:"Uncategorized"}),a.type==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("optgroup",{label:"Income",children:r?.incomeCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`income-${t.id}`))}),e.jsx("optgroup",{label:"Expense",children:r?.expenseCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`expense-${t.id}`))})]}),a.type==="income"&&r?.incomeCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`income-${t.id}`)),a.type==="expense"&&r?.expenseCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`expense-${t.id}`))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Month"}),e.jsxs("select",{name:"month",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700",value:a.month,onChange:o,disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"0",children:"Jan"}),e.jsx("option",{value:"1",children:"Feb"}),e.jsx("option",{value:"2",children:"Mar"}),e.jsx("option",{value:"3",children:"Apr"}),e.jsx("option",{value:"4",children:"May"}),e.jsx("option",{value:"5",children:"Jun"}),e.jsx("option",{value:"6",children:"Jul"}),e.jsx("option",{value:"7",children:"Aug"}),e.jsx("option",{value:"8",children:"Sep"}),e.jsx("option",{value:"9",children:"Oct"}),e.jsx("option",{value:"10",children:"Nov"}),e.jsx("option",{value:"11",children:"Dec"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Year"}),e.jsxs("select",{name:"year",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700",value:a.year,onChange:o,disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),d.map(t=>e.jsx("option",{value:t.toString(),children:t},t))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Search"}),e.jsx("input",{type:"text",name:"search",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700",placeholder:"Search notes...",value:a.search,onChange:o,disabled:s})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Scope"}),e.jsxs("select",{name:"scope",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700",value:a.scope,onChange:o,disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"personal",children:"Personal"}),e.jsx("option",{value:"family",children:"Family"})]})]})]}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("button",{onClick:l,className:"text-[10px] text-gray-500 font-medium",disabled:s,children:[e.jsx("i",{className:"fas fa-undo mr-1 text-[8px]"}),"Reset"]}),e.jsx("button",{onClick:()=>i(!1),className:"text-[10px] text-indigo-600 font-medium",children:"Done"})]})]})]}),e.jsxs("div",{className:"desktop-filters-section card-body border-bottom bg-light py-2",children:[e.jsxs("div",{className:"row align-items-end",children:[e.jsxs("div",{className:"col-lg-2 col-md-3 col-6 mb-2",children:[e.jsx("label",{htmlFor:"type",className:"text-xs font-weight-bold text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{id:"type",name:"type",value:a.type,onChange:o,className:`form-control form-control-sm ${a.categoryId!=="all"?"border-info":""}`,disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"income",children:"Income"}),e.jsx("option",{value:"expense",children:"Expense"}),e.jsx("option",{value:"contribution",children:"Contribution"})]}),a.categoryId!=="all"&&e.jsxs("small",{className:"form-text text-info",style:{fontSize:"0.7rem",lineHeight:"1.2"},children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Auto-selected"]})]}),e.jsxs("div",{className:"col-lg-2 col-md-3 col-6 mb-2",children:[e.jsx("label",{htmlFor:"accountId",className:"text-xs font-weight-bold text-gray-700 mb-1",children:"Account"}),e.jsxs("select",{id:"accountId",name:"accountId",value:a.accountId,onChange:o,className:"form-control form-control-sm",disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),r?.accounts.map(t=>e.jsx("option",{value:t.id,children:t.account_name},t.id))]})]}),e.jsxs("div",{className:"col-lg-2 col-md-4 col-6 mb-2",children:[e.jsx("label",{htmlFor:"categoryId",className:"text-xs font-weight-bold text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{id:"categoryId",name:"categoryId",value:a.categoryId,onChange:o,className:`form-control form-control-sm ${a.type!=="all"?"border-info":""}`,disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"uncategorized",children:"Uncategorized"}),a.type==="all"&&e.jsxs(e.Fragment,{children:[e.jsx("optgroup",{label:"Income",children:r?.incomeCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`income-${t.id}`))}),e.jsx("optgroup",{label:"Expense",children:r?.expenseCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`expense-${t.id}`))})]}),a.type==="income"&&e.jsx("optgroup",{label:"Income",children:r?.incomeCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`income-${t.id}`))}),a.type==="expense"&&e.jsx("optgroup",{label:"Expense",children:r?.expenseCategories.map(t=>e.jsx("option",{value:t.id,children:t.category_name},`expense-${t.id}`))}),a.type==="contribution"&&e.jsx("optgroup",{label:"Contribution",children:r?.expenseCategories.filter(t=>t.category_name.toLowerCase().includes("contribution")).map(t=>e.jsx("option",{value:t.id,children:t.category_name},`contribution-${t.id}`))})]}),a.type!=="all"&&e.jsxs("small",{className:"form-text text-info",style:{fontSize:"0.7rem",lineHeight:"1.2"},children:[e.jsx("i",{className:"fas fa-filter mr-1"}),a.type," only"]})]}),e.jsxs("div",{className:"col-lg-1 col-md-2 col-6 mb-2",children:[e.jsx("label",{htmlFor:"month",className:"text-xs font-weight-bold text-gray-700 mb-1",children:"Month"}),e.jsxs("select",{id:"month",name:"month",value:a.month,onChange:o,className:"form-control form-control-sm",disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"0",children:"Jan"}),e.jsx("option",{value:"1",children:"Feb"}),e.jsx("option",{value:"2",children:"Mar"}),e.jsx("option",{value:"3",children:"Apr"}),e.jsx("option",{value:"4",children:"May"}),e.jsx("option",{value:"5",children:"Jun"}),e.jsx("option",{value:"6",children:"Jul"}),e.jsx("option",{value:"7",children:"Aug"}),e.jsx("option",{value:"8",children:"Sep"}),e.jsx("option",{value:"9",children:"Oct"}),e.jsx("option",{value:"10",children:"Nov"}),e.jsx("option",{value:"11",children:"Dec"})]})]}),e.jsxs("div",{className:"col-lg-1 col-md-2 col-3 mb-2",children:[e.jsx("label",{htmlFor:"year",className:"text-xs font-weight-bold text-gray-700 mb-1",children:"Year"}),e.jsxs("select",{id:"year",name:"year",value:a.year,onChange:o,className:"form-control form-control-sm",disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),d.map(t=>e.jsx("option",{value:t.toString(),children:t},t))]})]}),e.jsxs("div",{className:"col-lg-2 col-md-4 col-6 mb-2",children:[e.jsx("label",{htmlFor:"search",className:"text-xs font-weight-bold text-gray-700 mb-1",children:"Search"}),e.jsx("input",{type:"text",id:"search",name:"search",value:a.search,onChange:o,placeholder:"Search notes...",className:"form-control form-control-sm",disabled:s})]}),e.jsxs("div",{className:"col-lg-2 col-md-3 col-3 mb-2",children:[e.jsx("label",{htmlFor:"scope",className:"text-xs font-weight-bold text-gray-700 mb-1",children:"Scope"}),e.jsxs("select",{id:"scope",name:"scope",value:a.scope,onChange:o,className:"form-control form-control-sm",disabled:s,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"personal",children:"Personal"}),e.jsx("option",{value:"family",children:"Family"})]})]})]}),e.jsx("div",{className:"row mt-2",children:e.jsx("div",{className:"col-12 text-right",children:e.jsxs("button",{className:"inline-flex items-center justify-center px-3 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 text-sm font-medium rounded shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:l,disabled:s,children:[e.jsx("i",{className:"fas fa-undo text-xs mr-1"}),s?"Filtering...":"Reset Filters"]})})})]}),e.jsx("style",{children:`
        .desktop-filters-section { display: none; }
        @media (min-width: 768px) {
          .desktop-filters-section { display: block; }
        }
      `})]})});V.displayName="TransactionFilters";const J=g.memo(({filteredTransactions:a,userData:r,isFiltering:o,onDeleteTransaction:l,currentPage:s,pageSize:d,totalPages:x,totalItems:i,startIndex:m,endIndex:y,onPageChange:c,onPageSizeChange:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsx("div",{className:"px-3 py-2",children:o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Filtering transactions..."})]}):a.length>0?e.jsx("div",{className:"space-y-2",children:a.map((n,h)=>{let u="Uncategorized";return n.category_id&&(u=le(n.category_id,n.type==="contribution"?"expense":n.type,r)),n.type==="contribution"&&(u=n.goal_id?"Goal Contribution":"Contribution"),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 animate__animated animate__fadeIn relative",style:{animationDelay:`${h*.03}s`},children:[e.jsxs("div",{className:"flex items-start gap-2.5 mb-2",children:[e.jsx("div",{className:`w-11 h-11 rounded-xl flex items-center justify-center flex-shrink-0 ${n.type==="income"?"bg-emerald-100":n.type==="contribution"?"bg-blue-100":"bg-rose-100"}`,children:e.jsx("i",{className:`fas ${n.type==="income"?"fa-arrow-up text-emerald-500":n.type==="contribution"?"fa-flag text-blue-500":"fa-arrow-down text-rose-500"} text-sm`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-800 truncate max-w-[140px]",children:n.description||u}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{className:`text-[8px] px-1.5 py-0.5 rounded-full font-medium ${n.type==="income"?"bg-emerald-100 text-emerald-600":n.type==="contribution"?"bg-blue-100 text-blue-600":"bg-rose-100 text-rose-600"}`,children:n.type==="income"?"IN":n.type==="contribution"?"CON":"OUT"})})]}),e.jsxs("p",{className:`text-sm font-bold mb-1 ${n.type==="income"?"text-emerald-600":n.type==="contribution"?"text-blue-600":"text-rose-600"}`,children:[n.type==="income"?"+":"-",C(n.amount)]}),e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full ${u==="Uncategorized"?"bg-amber-100 text-amber-700":n.type==="income"?"bg-emerald-50 text-emerald-600":n.type==="contribution"?"bg-blue-50 text-blue-600":"bg-rose-50 text-rose-600"}`,children:u.length>15?u.substring(0,15)+"...":u})]}),e.jsxs("div",{className:"dropdown flex-shrink-0",children:[e.jsx("button",{className:"w-8 h-8 rounded-full bg-gray-50 hover:bg-gray-100 flex items-center justify-center text-gray-400 transition-colors",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:e.jsx("i",{className:"fas fa-ellipsis-v text-[10px]"})}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-right shadow-lg border-0 rounded-xl",style:{minWidth:"140px",position:"absolute",zIndex:9999},children:[e.jsxs(M,{to:`/transactions/${n.id}`,className:"dropdown-item py-2 text-xs flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-eye text-cyan-500 text-[10px] w-4"}),"View Details"]}),e.jsxs(M,{to:`/transactions/${n.id}/edit`,className:"dropdown-item py-2 text-xs flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-edit text-indigo-500 text-[10px] w-4"}),"Edit"]}),e.jsx("div",{className:"dropdown-divider my-1"}),e.jsxs("button",{className:"dropdown-item py-2 text-xs flex items-center gap-2 text-rose-600",onClick:()=>l(n.id),children:[e.jsx("i",{className:"fas fa-trash text-[10px] w-4"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-50 grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[8px] text-gray-400 uppercase tracking-wide mb-0.5",children:"Account"}),e.jsx("p",{className:"text-[9px] font-medium text-gray-600 truncate",children:ie(n.account_id,r)||"N/A"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[8px] text-gray-400 uppercase tracking-wide mb-0.5",children:"Date"}),e.jsx("p",{className:"text-[9px] font-medium text-gray-600",children:ae(n.date)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[8px] text-gray-400 uppercase tracking-wide mb-0.5",children:"Type"}),e.jsx("span",{className:`text-[9px] px-1.5 py-0.5 rounded-full font-medium ${n.type==="income"?"bg-emerald-100 text-emerald-600":n.type==="contribution"?"bg-blue-100 text-blue-600":"bg-rose-100 text-rose-600"}`,children:n.type.charAt(0).toUpperCase()+n.type.slice(1)})]})]})]},n.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-filter text-gray-400 text-lg"})}),e.jsx("p",{className:"text-xs text-gray-600 font-medium mb-1",children:"No transactions found"}),e.jsx("p",{className:"text-[10px] text-gray-400 mb-3",children:"Try adjusting your filters"}),e.jsxs(M,{to:"/transactions/add",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-indigo-500 text-white text-[11px] font-medium rounded-lg",children:[e.jsx("i",{className:"fas fa-plus text-[9px]"}),"Add Transaction"]})]})}),x>1&&e.jsxs("div",{className:"px-3 py-3 border-t border-gray-100 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-[10px] text-gray-500",children:[m+1,"-",y," of ",i]}),e.jsxs("select",{className:"text-[10px] px-2 py-1 bg-white border border-gray-200 rounded-lg text-gray-600",value:d,onChange:n=>t(Number(n.target.value)),children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>c(s-1),disabled:s===1,className:"w-8 h-8 rounded-lg bg-white border border-gray-200 flex items-center justify-center text-gray-500 disabled:opacity-50",children:e.jsx("i",{className:"fas fa-chevron-left text-[10px]"})}),Array.from({length:Math.min(x,5)},(n,h)=>{let u;return x<=5||s<=3?u=h+1:s>=x-2?u=x-4+h:u=s-2+h,e.jsx("button",{onClick:()=>c(u),className:`w-8 h-8 rounded-lg flex items-center justify-center text-[11px] font-medium transition-colors ${s===u?"bg-indigo-500 text-white":"bg-white border border-gray-200 text-gray-600"}`,children:u},u)}),e.jsx("button",{onClick:()=>c(s+1),disabled:s===x,className:"w-8 h-8 rounded-lg bg-white border border-gray-200 flex items-center justify-center text-gray-500 disabled:opacity-50",children:e.jsx("i",{className:"fas fa-chevron-right text-[10px]"})})]})]})]}),e.jsxs("div",{className:"desktop-table-section card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",width:"100%",cellSpacing:"0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Category"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:o?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("p",{className:"text-gray-600 mt-3",children:"Filtering transactions..."})]})}):a.length>0?a.map(n=>{let h="Uncategorized";n.category_id&&(h=le(n.category_id,n.type==="contribution"?"expense":n.type,r)),n.type==="contribution"&&(h=n.goal_id?"Goal Contribution":"Contribution");const u=ie(n.account_id,r),_=n.description&&n.description.trim()?n.description:e.jsx("span",{className:"text-muted font-italic",children:"No description"});return e.jsxs("tr",{className:n.type==="income"?"table-success":n.type==="contribution"?"table-info":"table-danger",children:[e.jsx("td",{children:ae(n.date)}),e.jsx("td",{children:h==="Uncategorized"?e.jsxs("span",{className:"badge badge-warning",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),"Uncategorized"]}):n.type==="contribution"?e.jsxs("span",{className:"badge badge-info",children:[e.jsx("i",{className:"fas fa-flag mr-1"}),h]}):e.jsx("span",{className:"badge badge-light",children:h})}),e.jsx("td",{children:u||"Unknown Account"}),e.jsx("td",{children:_}),e.jsxs("td",{className:n.type==="income"?"text-success font-weight-bold":n.type==="contribution"?"text-info font-weight-bold":"text-danger font-weight-bold",children:[n.type==="income"?"+ ":"- ",C(n.amount)]}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-1",children:[e.jsx(M,{to:`/transactions/${n.id}`,className:"inline-flex items-center justify-center w-9 h-9 bg-[#36b9cc] hover:bg-[#2c9faf] text-white rounded-full shadow-sm transition-colors",title:"View Details",children:e.jsx("i",{className:"fas fa-eye text-xs"})}),e.jsx(M,{to:`/transactions/${n.id}/edit`,className:"inline-flex items-center justify-center w-9 h-9 bg-[#4e73df] hover:bg-[#2e59d9] text-white rounded-full shadow-sm transition-colors",title:"Edit Transaction",children:e.jsx("i",{className:"fas fa-edit text-xs"})}),e.jsx("button",{className:"inline-flex items-center justify-center w-9 h-9 bg-[#e74a3b] hover:bg-[#d52a1a] text-white rounded-full shadow-sm transition-colors",onClick:()=>l(n.id),title:"Delete Transaction",children:e.jsx("i",{className:"fas fa-trash text-xs"})})]})})]},n.id)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-filter fa-2x text-gray-300 mb-3 d-block"}),e.jsx("p",{className:"text-gray-500 mb-2",children:"No transactions found matching your filters."}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Try adjusting your search criteria or clear filters."})]})})})]})}),x>1&&e.jsx("div",{className:"card-footer bg-white border-0",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsx("div",{className:"col-md-4 text-center text-md-start mb-2 mb-md-0",children:e.jsxs("span",{className:"text-muted",style:{fontSize:"0.875rem"},children:["Showing ",Math.min(m+1,i)," to ",y," of ",i," entries"]})}),e.jsxs("div",{className:"col-md-4 text-center mb-2 mb-md-0",children:[e.jsx("label",{className:"me-2 mb-0",style:{fontSize:"0.875rem"},children:"Show"}),e.jsxs("select",{className:"form-select d-inline-block w-auto",style:{fontSize:"0.875rem"},value:d,onChange:n=>t(Number(n.target.value)),children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsx("label",{className:"ms-2 mb-0",style:{fontSize:"0.875rem"},children:"per page"})]}),e.jsx("div",{className:"col-md-4 text-center text-md-end",children:e.jsx("nav",{children:e.jsxs("ul",{className:"pagination mb-0 justify-content-center justify-content-md-end",children:[e.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>c(s-1),disabled:s===1,children:e.jsx("i",{className:"fas fa-chevron-left"})})}),Array.from({length:Math.min(x,5)},(n,h)=>{let u;return x<=5||s<=3?u=h+1:s>=x-2?u=x-4+h:u=s-2+h,e.jsx("li",{className:`page-item ${s===u?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>c(u),style:s===u?{color:"white"}:{},children:u})},u)}),e.jsx("li",{className:`page-item ${s===x?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>c(s+1),disabled:s===x,children:e.jsx("i",{className:"fas fa-chevron-right"})})})]})})})]})})]}),e.jsx("style",{children:`
        .desktop-table-section { display: none; }
        @media (min-width: 768px) {
          .desktop-table-section { display: block; }
        }
      `})]}));J.displayName="TransactionTable";const he=g.memo(({show:a,isDeleting:r,onConfirm:o,onCancel:l})=>a?e.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",style:{maxWidth:"450px",margin:"1.75rem",position:"relative",width:"auto",pointerEvents:"none",zIndex:1060},children:e.jsxs("div",{className:"modal-content",style:{position:"relative",display:"flex",flexDirection:"column",backgroundColor:"#fff",borderRadius:"0.5rem",pointerEvents:"auto",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.15)"},children:[e.jsxs("div",{className:"modal-header border-0 pt-4 px-4 pb-0",children:[e.jsx("h3",{className:"modal-title w-100 text-center",style:{color:"#4e73df",fontWeight:600},children:"Confirm Deletion"}),e.jsx("button",{type:"button",className:"close",onClick:l,style:{position:"absolute",top:"1rem",right:"1rem",fontSize:"1.5rem",fontWeight:700,color:"#999",background:"none",border:"none",cursor:"pointer"},"aria-label":"Close",disabled:r,children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body text-center p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"warning-icon",style:{backgroundColor:"#FFEFD5",width:"80px",height:"80px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto"},children:e.jsx("i",{className:"fas fa-exclamation-triangle fa-3x",style:{color:"#FFA500"}})})}),e.jsx("p",{style:{fontSize:"1rem",color:"#555"},children:"Are you sure you want to delete this transaction? This action cannot be undone."})]}),e.jsxs("div",{className:"modal-footer border-0 pb-4 pt-0 justify-content-center",children:[e.jsx("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 md:px-6 md:py-2.5 bg-white hover:bg-blue-50 text-[#4e73df] border border-[#4e73df] text-sm md:text-base font-medium rounded-full shadow-sm transition-colors mr-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:l,disabled:r,children:"Cancel"}),e.jsx("button",{type:"button",className:"inline-flex items-center justify-center px-4 py-2 md:px-6 md:py-2.5 bg-[#e74a3b] hover:bg-[#d52a1a] text-white border border-[#e74a3b] text-sm md:text-base font-medium rounded-full shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:o,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Deleting..."]}):"Delete"})]})]})})}):null);he.displayName="DeleteConfirmationModal";const pe=g.memo(({activeTip:a,tooltipPosition:r})=>{if(!a||!r)return null;const l={totalIncome:{title:"Total Income",description:"The sum of all income transactions for the selected period. This includes salary, investments, gifts, and other revenue sources. Use filters to analyze income from specific sources or time periods."},totalExpenses:{title:"Total Expenses",description:"The sum of all expense transactions for the selected period. This includes all your spending across categories like housing, food, transportation, and discretionary purchases. Use filters to analyze spending in specific categories."},netCashflow:{title:"Net Cashflow",description:"The difference between your total income and total expenses for the selected period. A positive value (green) means you're saving money, while a negative value (red) indicates you're spending more than you earn."},linechart:{title:"Income vs. Expenses Trend",description:"This visualization tracks your income and expenses over time. The green line represents your income while the red line shows your expenses. When the green line is above the red, you're saving money. Analyzing these trends helps you understand how your financial habits change over time."},piechart:{title:"Expense Distribution",description:"This chart breaks down your spending by category. Each colored segment represents a different expense category, with larger segments indicating higher spending. Use this information to identify your largest spending areas and focus your budget optimization efforts where they'll have the most impact."},ratio:{title:"Spending to Income Ratio",description:"This indicator shows what percentage of your income is being spent on expenses. Financial experts recommend keeping this ratio below 70% for healthy finances. A higher ratio means you have less money available for savings, investments, and debt reduction. The color coding helps you quickly assess your financial health."},status:{title:"Financial Status",description:"A summary assessment of your overall financial health based on your spending habits. This status considers your spending-to-income ratio and provides personalized recommendations. Green indicates healthy finances, yellow suggests areas for improvement, and red signals potential financial stress that needs immediate attention."},transactionList:{title:"Transaction List",description:"A detailed view of all your financial transactions based on the current filters. You can see the date, category, account, description, and amount for each transaction. Use the action buttons to view details, edit, or delete individual transactions."}}[a];return l?e.jsxs("div",{className:"tip-box light",style:{position:"absolute",top:`${r.top}px`,left:`${r.left}px`,transform:"translateX(-50%)",backgroundColor:"#fff",border:"1px solid #e3e6f0",borderRadius:"0.35rem",boxShadow:"0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15)",padding:"1rem",maxWidth:"300px",zIndex:1060,fontSize:"0.875rem",lineHeight:"1.5"},children:[e.jsx("div",{className:"tip-title",style:{fontWeight:600,color:"#5a5c69",marginBottom:"0.5rem",fontSize:"0.9rem"},children:l.title}),e.jsx("p",{className:"tip-description",style:{margin:0,color:"#6e707e",fontSize:"0.8rem",lineHeight:"1.4"},children:l.description}),e.jsx("div",{style:{position:"absolute",top:"-6px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"6px solid #e3e6f0"}}),e.jsx("div",{style:{position:"absolute",top:"-5px",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"5px solid #fff"}})]}):null});pe.displayName="TooltipSystem";const ue=g.memo(({goalId:a,goalName:r,onClearFilter:o})=>a?e.jsxs("div",{className:"alert alert-info mb-4 d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("i",{className:"fas fa-filter mr-2"}),e.jsx("strong",{children:"Filtered by Goal:"})," ",r||"Unknown Goal"]}),e.jsxs("button",{className:"inline-flex items-center justify-center px-2 py-1.5 md:px-3 md:py-2 bg-white hover:bg-blue-50 text-[#36b9cc] border border-[#36b9cc] text-xs md:text-sm font-medium rounded shadow-sm transition-colors",onClick:o,children:[e.jsx("i",{className:"fas fa-times text-xs mr-1"})," Clear Filter"]})]}):null);ue.displayName="GoalFilterBanner";const Oe=()=>{const{user:a}=q(),{showErrorToast:r}=X(),[o,l]=g.useState([]),[s,d]=g.useState(null),[x,i]=g.useState(!0),[m,y]=g.useState(!1),c=g.useCallback(async()=>{if(a)try{i(!0);const{data:n,error:h}=await D.from("accounts").select("id, account_name, account_type, balance").eq("user_id",a.id);if(h)throw h;const{data:u,error:_}=await D.from("income_categories").select("id, category_name, icon").eq("user_id",a.id).order("category_name");if(_)throw _;const{data:S,error:T}=await D.from("expense_categories").select("id, category_name, icon").eq("user_id",a.id).order("category_name");if(T)throw T;const{data:p,error:v}=await D.from("goals").select("id, goal_name, current_amount, target_amount").eq("user_id",a.id).order("goal_name");if(v)throw v;const k=await Te.fetchTransactionsWithMapping(a.id,{limit:1e3});if(!k.success)throw new Error(k.error||"Failed to fetch transactions");const f=k.data||[],w={accounts:n||[],incomeCategories:u||[],expenseCategories:S||[],goals:p||[],transactions:f||[]};return d(w),l(f||[]),w}catch(n){return console.error("Error fetching data:",n),r(n.message||"Error loading your data"),null}finally{i(!1)}},[a,r]),t=g.useCallback(()=>{if(a&&!m){const n=D.channel("public:transactions").on("postgres_changes",{event:"*",schema:"public",table:"transactions",filter:`user_id=eq.${a.id}`},()=>{c()}).subscribe();return y(!0),()=>{D.removeChannel(n)}}},[a,m,c]);return g.useEffect(()=>{c()},[c]),g.useEffect(()=>{if(a&&!x&&!m)return t()},[a,x,m,t]),{transactions:o,setTransactions:l,userData:s,setUserData:d,loading:x,refetchData:c}},Pe=(a,r)=>{const o=Ee(),l=de(),[s,d]=g.useState(!1),x=new URLSearchParams(o.search),[i,m]=g.useState(Ue(x)),[y,c]=g.useState([]),t=y.length,n=Math.max(1,Math.ceil(t/i.pageSize)),h=(i.currentPage-1)*i.pageSize,u=Math.min(h+i.pageSize,t),_=y.slice(h,u),S=g.useCallback(()=>{a.length!==0&&(d(!0),setTimeout(()=>{const f=ze(a,i,r?.transactions[0]?.user_id);c(f),d(!1)},300))},[a,i,r]);g.useEffect(()=>{if(a.length===0)return;const f=new URLSearchParams;i.type!=="all"&&f.set("type",i.type),i.accountId!=="all"&&f.set("accountId",i.accountId),i.categoryId!=="all"&&f.set("categoryId",i.categoryId),i.month!=="all"&&f.set("month",i.month),i.year!=="all"&&f.set("year",i.year),i.search!==""&&f.set("search",i.search),i.scope!=="all"&&f.set("scope",i.scope);const w=f.toString(),I=w?`?${w}`:"";l(I,{replace:!0}),S()},[i,a,l,S]),g.useEffect(()=>{if(i.categoryId!=="all"&&r){const f=ce(i.categoryId,r,i.type);f!=="all"&&f!==i.type&&m(w=>({...w,type:f}))}},[i.categoryId,r,i.type]);const T=g.useCallback(f=>{m(w=>({...w,currentPage:f}))},[]),p=g.useCallback(f=>{m(w=>({...w,pageSize:f,currentPage:1}))},[]),v=g.useCallback(f=>{const{name:w,value:I}=f.target;if(d(!0),w==="type")m(A=>({...A,type:I,categoryId:"all",currentPage:1}));else if(w==="categoryId")if(I==="all")m(A=>({...A,categoryId:I,currentPage:1}));else if(r){const A=ce(I,r,i.type);m(O=>({...O,categoryId:I,currentPage:1,...A!=="all"?{type:A}:{}}))}else m(A=>({...A,[w]:I,currentPage:1}));else m(A=>({...A,[w]:I,currentPage:1}))},[r,i.type]),k=g.useCallback(()=>{d(!0),m({type:"all",accountId:"all",categoryId:"all",month:"all",year:"all",search:"",startDate:"",endDate:"",minAmount:"",maxAmount:"",sortBy:"date",sortOrder:"desc",scope:"all",goal_id:void 0,currentPage:1,pageSize:10}),l("",{replace:!0})},[l]);return{filter:i,setFilter:m,filteredTransactions:y,paginatedTransactions:_,isFiltering:s,handleFilterChange:v,resetFilters:k,currentPage:i.currentPage,pageSize:i.pageSize,totalPages:n,totalItems:t,startIndex:h,endIndex:u,updatePage:T,updatePageSize:p}},He=(a,r,o)=>{const[l,s]=g.useState(null),[d,x]=g.useState(null),i=g.useRef(null),m=g.useRef(null);g.useEffect(()=>{if(r){const{lineChartOptions:t,pieChartOptions:n}=Me(a,r,o);s(t),x(n)}},[a,r,o]);const y=g.useCallback(t=>{i.current&&(i.current.chart=t)},[]),c=g.useCallback(t=>{m.current&&(m.current.chart=t)},[]);return{lineChartOptions:l,pieChartOptions:d,lineChartRef:i,pieChartRef:m,lineChartCallback:y,pieChartCallback:c}},We=()=>{const[a,r]=g.useState(null),[o,l]=g.useState(null),s=g.useCallback((d,x)=>{if(a===d)r(null),l(null);else if(r(d),x){const i=x.currentTarget.getBoundingClientRect();l({top:i.bottom+window.scrollY,left:i.left+i.width/2+window.scrollX})}},[a]);return{activeTip:a,tooltipPosition:o,toggleTip:s}},Ge=()=>{const{user:a}=q(),{showSuccessToast:r,showErrorToast:o}=X(),[l,s]=g.useState(!1),[d,x]=g.useState(null),[i,m]=g.useState(!1),y=g.useCallback(n=>{x(n),s(!0)},[]),c=g.useCallback(()=>{s(!1),x(null)},[]),t=g.useCallback(async(n,h,u,_,S,T)=>{if(!a||!d){o("You must be logged in to delete transactions");return}try{m(!0);const{data:p,error:v}=await D.from("transactions").select("*").eq("id",d).single();if(v)throw v;if(!p)throw new Error("Transaction not found");if(p.user_id!==a.id)throw new Error("You do not have permission to delete this transaction");const k=ne.extractTransactionAuditData(p,S?.accounts?.find(b=>b.id===p.account_id),S?.incomeCategories?.find(b=>b.id===p.income_category_id)||S?.expenseCategories?.find(b=>b.id===p.expense_category_id),S?.goals?.find(b=>b.id===p.goal_id)),f=p.type==="income"?-p.amount:p.amount,{error:w}=await D.from("transactions").delete().eq("id",d);if(w)throw w;ne.logTransactionDeleted(a.id,k,"User deleted transaction from transactions list",navigator.userAgent).catch(b=>{console.error("Failed to log transaction deletion to audit:",b)});const{error:I}=await D.rpc("update_account_balance",{p_account_id:p.account_id,p_amount_change:f});if(I){const{data:b,error:E}=await D.from("accounts").select("balance").eq("id",p.account_id).single();if(E)throw E;const z=b.balance+f,{error:U}=await D.from("accounts").update({balance:z}).eq("id",p.account_id);if(U)throw U}if(p.goal_id){const b=-p.amount,{error:E}=await D.rpc("update_goal_progress",{p_goal_id:p.goal_id,p_amount:b});if(E){const{data:z,error:U}=await D.from("goals").select("current_amount, target_amount").eq("id",p.goal_id).single();if(U)throw U;const B=Math.max(0,z.current_amount+b),G=B>=z.target_amount?"completed":"in_progress",{error:P}=await D.from("goals").update({current_amount:B,status:G}).eq("id",p.goal_id);if(P)throw P}}const A=n.filter(b=>b.id!==d);h(A);const O=u.filter(b=>b.id!==d);if(_(O),S){const b={...S,transactions:S.transactions.filter(E=>E.id!==d)};if(p.account_id){const E=b.accounts.findIndex(z=>z.id===p.account_id);E>=0&&(b.accounts[E]={...b.accounts[E],balance:b.accounts[E].balance+f})}if(p.goal_id){const E=b.goals.findIndex(z=>z.id===p.goal_id);if(E>=0){const z=Math.max(0,b.goals[E].current_amount-p.amount);b.goals[E]={...b.goals[E],current_amount:z}}}T(b)}r("Transaction deleted successfully!"),c()}catch(p){console.error("Error deleting transaction:",p),o(p.message||"Failed to delete transaction")}finally{m(!1),c()}},[a,d,r,o,c]);return{showDeleteModal:l,isDeleting:i,openDeleteModal:y,closeDeleteModal:c,handleDeleteTransaction:t}},Ye=async()=>{const a=await se(()=>import("./pdfmake-B9-gh6SH.js").then(s=>s.p),__vite__mapDeps([0,1])),r=await se(()=>import("./vfs_fonts-DtMofV48.js").then(s=>s.v),__vite__mapDeps([2,1])),o=a.default||a,l=r.default||r;return l.pdfMake?o.vfs=l.pdfMake.vfs:l.vfs?o.vfs=l.vfs:o.vfs=l,o},K=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ge=a=>{switch(a){case"income":return{color:"#10B981",bg:"#F0FDF4"};case"expense":return{color:"#EF4444",bg:"#FEF2F2"};case"transfer":return{color:"#3B82F6",bg:"#EFF6FF"};case"contribution":return{color:"#8B5CF6",bg:"#F5F3FF"};default:return{color:"#64748B",bg:"#F8FAFF"}}},Re=async(a,r)=>{try{const o=new Date,l=`${o.toLocaleDateString()} ${o.toLocaleTimeString()}`,s=a.filter(t=>t.type==="income").reduce((t,n)=>t+n.amount,0),d=a.filter(t=>t.type==="expense").reduce((t,n)=>t+n.amount,0),x=a.filter(t=>t.type==="transfer").reduce((t,n)=>t+n.amount,0),i=a.filter(t=>t.type==="contribution").reduce((t,n)=>t+n.amount,0),m={pageSize:"A4",pageOrientation:"landscape",pageMargins:[40,80,40,60],content:[{canvas:[{type:"rect",x:-40,y:-80,w:882,h:120,linearGradient:["#4F46E5","#8B5CF6"],color:"#4F46E5"}]},{columns:[{width:"*",stack:[{text:"BudgetMe",style:"logo",margin:[0,-100,0,5]},{text:"Financial Intelligence Platform",style:"logoTagline",margin:[0,0,0,0]}]},{width:"auto",stack:[{text:"Transaction History",style:"reportTitle",alignment:"right",margin:[0,-100,0,5]},{text:`Generated: ${l}`,style:"dateText",alignment:"right",margin:[0,0,0,0]}]}],margin:[0,0,0,30]},...r?[{text:r,fontSize:10,color:"#64748B",italics:!0,margin:[0,0,0,20]}]:[],{text:"Transaction Summary",style:"sectionHeader"},{columns:[{width:"25%",stack:[{canvas:[{type:"rect",x:0,y:0,w:150,h:70,r:8,color:"#F0FDF4"}]},{text:"Total Income",style:"summaryLabel",margin:[10,-60,0,5]},{text:C(s),fontSize:14,bold:!0,color:"#10B981",margin:[10,0,0,0]}]},{width:"25%",stack:[{canvas:[{type:"rect",x:0,y:0,w:150,h:70,r:8,color:"#FEF2F2"}]},{text:"Total Expenses",style:"summaryLabel",margin:[10,-60,0,5]},{text:C(d),fontSize:14,bold:!0,color:"#EF4444",margin:[10,0,0,0]}]},{width:"25%",stack:[{canvas:[{type:"rect",x:0,y:0,w:150,h:70,r:8,color:"#EFF6FF"}]},{text:"Transfers",style:"summaryLabel",margin:[10,-60,0,5]},{text:C(x),fontSize:14,bold:!0,color:"#3B82F6",margin:[10,0,0,0]}]},{width:"25%",stack:[{canvas:[{type:"rect",x:0,y:0,w:150,h:70,r:8,color:"#F5F3FF"}]},{text:"Contributions",style:"summaryLabel",margin:[10,-60,0,5]},{text:C(i),fontSize:14,bold:!0,color:"#8B5CF6",margin:[10,0,0,0]}]}],columnGap:15,margin:[0,10,0,25]},{text:"Transaction Details",style:"sectionHeader"},{table:{headerRows:1,widths:["auto","*","auto","auto","auto"],body:[[{text:"Date",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Type",style:"tableHeader",alignment:"center"},{text:"Category",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...a.map((t,n)=>{const h=ge(t.type);return[{text:K(t.date),style:"tableRow",fillColor:n%2===0?"#F8FAFF":"#FFFFFF"},{text:t.description||"-",style:"tableRow",fillColor:n%2===0?"#F8FAFF":"#FFFFFF"},{text:t.type.charAt(0).toUpperCase()+t.type.slice(1),fontSize:9,color:h.color,bold:!0,fillColor:n%2===0?"#F8FAFF":"#FFFFFF",alignment:"center"},{text:t.category||"-",style:"tableRow",fillColor:n%2===0?"#F8FAFF":"#FFFFFF"},{text:C(t.amount),style:"tableRow",alignment:"right",bold:!0,color:t.type==="income"?"#10B981":"#1F2937",fillColor:n%2===0?"#F8FAFF":"#FFFFFF"}]})]},layout:{fillColor:function(t){return t===0?"#4F46E5":null},hLineWidth:function(t,n){return t===0||t===n.table.body.length?2:.5},vLineWidth:function(){return .5},hLineColor:function(t,n){return t===0||t===n.table.body.length?"#4F46E5":"#E2E8F0"},vLineColor:function(){return"#E2E8F0"},paddingLeft:function(){return 8},paddingRight:function(){return 8},paddingTop:function(){return 6},paddingBottom:function(){return 6}},margin:[0,0,0,20]}],styles:{logo:{fontSize:28,bold:!0,color:"#FFFFFF"},logoTagline:{fontSize:10,color:"#E0E7FF",italics:!0},reportTitle:{fontSize:18,bold:!0,color:"#FFFFFF"},dateText:{fontSize:9,color:"#E0E7FF"},sectionHeader:{fontSize:16,bold:!0,color:"#4F46E5",margin:[0,20,0,12]},tableHeader:{bold:!0,fontSize:10,color:"#FFFFFF",fillColor:"#4F46E5"},tableRow:{fontSize:9,color:"#1F2937"},summaryLabel:{fontSize:10,bold:!0,color:"#64748B"},footerText:{fontSize:9,color:"#94A3B8",italics:!0}},defaultStyle:{font:"Roboto"}};m.footer=function(t,n){return{columns:[{width:"*",text:"© 2025 BudgetMe - Financial Intelligence Platform",style:"footerText",margin:[40,20,0,0]},{width:"auto",text:`Page ${t} of ${n}`,style:"footerText",alignment:"right",margin:[0,20,40,0]}]}},(await Ye()).createPdf(m).download(`budgetme-transactions-${new Date().toISOString().split("T")[0]}.pdf`)}catch(o){throw console.error("Error generating PDF:",o),new Error("Failed to generate PDF report")}},Ve=(a,r)=>{try{const o=a.map(c=>({Date:K(c.date),Description:c.description||"-",Type:c.type.charAt(0).toUpperCase()+c.type.slice(1),Category:c.category||"-",Account:c.account_name||"-",Amount:c.amount.toFixed(2),Notes:c.notes||"-"})),l=[{"":"BudgetMe Transaction History"},{"":`Generated: ${new Date().toLocaleString()}`},...r?[{"":r}]:[],{"":""}],s=re.unparse(o,{quotes:!0,header:!0}),x=`${re.unparse(l,{header:!1})}

${s}`,i=new Blob([x],{type:"text/csv;charset=utf-8;"}),m=URL.createObjectURL(i),y=document.createElement("a");y.href=m,y.setAttribute("download",`budgetme-transactions-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(m)}catch(o){throw console.error("Error generating CSV:",o),new Error("Failed to generate CSV report")}},Je=async(a,r)=>{try{const o=new Date,l=`${o.toLocaleDateString()} ${o.toLocaleTimeString()}`,s=a.filter(p=>p.type==="income").reduce((p,v)=>p+v.amount,0),d=a.filter(p=>p.type==="expense").reduce((p,v)=>p+v.amount,0),x=a.filter(p=>p.type==="transfer").reduce((p,v)=>p+v.amount,0),i=a.filter(p=>p.type==="contribution").reduce((p,v)=>p+v.amount,0),m=[new j({children:[new N({text:"BudgetMe",bold:!0,size:48,color:"4F46E5"})],alignment:$.CENTER,spacing:{after:100}}),new j({children:[new N({text:"Financial Intelligence Platform",size:18,color:"8B5CF6",italics:!0})],alignment:$.CENTER,spacing:{after:300}}),new j({children:[new N({text:"Transaction History",bold:!0,size:32,color:"1F2937"})],alignment:$.CENTER,spacing:{after:150}}),new j({children:[new N({text:`Generated: ${l}`,size:18,color:"64748B",italics:!0})],alignment:$.CENTER,spacing:{after:400},border:{bottom:{color:"4F46E5",space:1,style:"single",size:6}}})],y=r?[new j({children:[new N({text:r,size:20,color:"64748B",italics:!0})],spacing:{after:300}})]:[],c=[new j({children:[new N({text:"Transaction Summary",bold:!0,size:28,color:"4F46E5"})],spacing:{before:300,after:200}}),new j({children:[new N({text:"💰 Total Income: ",bold:!0,size:22,color:"10B981"}),new N({text:C(s),size:22,color:"10B981"})],spacing:{after:150}}),new j({children:[new N({text:"💸 Total Expenses: ",bold:!0,size:22,color:"EF4444"}),new N({text:C(d),size:22,color:"EF4444"})],spacing:{after:150}}),new j({children:[new N({text:"🔄 Transfers: ",bold:!0,size:22,color:"3B82F6"}),new N({text:C(x),size:22,color:"3B82F6"})],spacing:{after:150}}),new j({children:[new N({text:"🎯 Contributions: ",bold:!0,size:22,color:"8B5CF6"}),new N({text:C(i),size:22,color:"8B5CF6"})],spacing:{after:300}})],t=[new j({children:[new N({text:"Transaction Details",bold:!0,size:28,color:"4F46E5"})],spacing:{before:300,after:200}})],n=[new oe({children:[new L({children:[new j({children:[new N({text:"Date",bold:!0,color:"FFFFFF"})],alignment:$.CENTER})],shading:{fill:"4F46E5"}}),new L({children:[new j({children:[new N({text:"Description",bold:!0,color:"FFFFFF"})],alignment:$.CENTER})],shading:{fill:"4F46E5"}}),new L({children:[new j({children:[new N({text:"Type",bold:!0,color:"FFFFFF"})],alignment:$.CENTER})],shading:{fill:"4F46E5"}}),new L({children:[new j({children:[new N({text:"Category",bold:!0,color:"FFFFFF"})],alignment:$.CENTER})],shading:{fill:"4F46E5"}}),new L({children:[new j({children:[new N({text:"Amount",bold:!0,color:"FFFFFF"})],alignment:$.CENTER})],shading:{fill:"4F46E5"}})]})];a.forEach((p,v)=>{const k=v%2===0?"F8FAFF":"FFFFFF",f=ge(p.type);n.push(new oe({children:[new L({children:[new j(K(p.date))],shading:{fill:k}}),new L({children:[new j(p.description||"-")],shading:{fill:k}}),new L({children:[new j({children:[new N({text:p.type.charAt(0).toUpperCase()+p.type.slice(1),color:f.color.replace("#",""),bold:!0})],alignment:$.CENTER})],shading:{fill:k}}),new L({children:[new j(p.category||"-")],shading:{fill:k}}),new L({children:[new j({children:[new N({text:C(p.amount),bold:!0,color:p.type==="income"?"10B981":"1F2937"})],alignment:$.RIGHT})],shading:{fill:k}})]}))});const h=new ke({rows:n,width:{size:100,type:Ae.PERCENTAGE}}),u=new Ie({sections:[{properties:{},children:[...m,...y,...c,...t,h,new j({text:"",spacing:{before:600}}),new j({children:[new N({text:"© 2025 BudgetMe - Financial Intelligence Platform",size:18,color:"94A3B8",italics:!0})],alignment:$.CENTER,border:{top:{color:"E2E8F0",space:1,style:"single",size:6}},spacing:{before:200}})]}]}),_=await De.toBlob(u),S=URL.createObjectURL(_),T=document.createElement("a");T.href=S,T.setAttribute("download",`budgetme-transactions-${new Date().toISOString().split("T")[0]}.docx`),document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(S)}catch(o){throw console.error("Error generating DOCX:",o),new Error("Failed to generate DOCX report")}},rt=()=>{const a=de(),{user:r}=q(),{showSuccessToast:o,showErrorToast:l}=X(),[s,d]=g.useState(!1),{transactions:x,setTransactions:i,userData:m,setUserData:y,loading:c}=Oe(),{filter:t,setFilter:n,filteredTransactions:h,paginatedTransactions:u,isFiltering:_,handleFilterChange:S,resetFilters:T,currentPage:p,pageSize:v,totalPages:k,totalItems:f,startIndex:w,endIndex:I,updatePage:A,updatePageSize:O}=Pe(x,m),{lineChartOptions:b,pieChartOptions:E}=He(h,m,t),{activeTip:z,tooltipPosition:U,toggleTip:B}=We(),{showDeleteModal:G,isDeleting:P,openDeleteModal:Q,closeDeleteModal:fe,handleDeleteTransaction:be}=Ge(),Y=()=>{const F=[];if(t.type&&t.type!=="all"&&F.push(`Type: ${t.type}`),t.categoryId&&F.push(`Category ID: ${t.categoryId}`),t.accountId&&F.push(`Account ID: ${t.accountId}`),t.month||t.year){const Se=t.month&&t.year?`${t.month}/${t.year}`:t.year||t.month;F.push(`Period: ${Se}`)}return t.search&&F.push(`Search: "${t.search}"`),F.length>0?`Filters: ${F.join(", ")}`:void 0},Z=async()=>{try{d(!0),o("Preparing PDF export..."),await Re(h,Y()),o("PDF downloaded successfully!")}catch(F){console.error("PDF Export Error:",F),l("Failed to generate PDF. Please try again.")}finally{d(!1)}},ee=()=>{try{d(!0),o("Preparing CSV export..."),Ve(h,Y()),o("CSV downloaded successfully!")}catch(F){console.error("CSV Export Error:",F),l("Failed to generate CSV. Please try again.")}finally{d(!1)}},te=async()=>{try{d(!0),o("Preparing Word document export..."),await Je(h,Y()),o("Word document downloaded successfully!")}catch(F){console.error("DOCX Export Error:",F),l("Failed to generate Word document. Please try again.")}finally{d(!1)}};if(!r)return a("/auth/login"),null;if(c)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading transactions..."})]})}),e.jsxs("div",{className:"text-center my-5 py-5 animate__animated animate__fadeIn hidden md:block",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",style:{width:"3rem",height:"3rem"},children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("h5",{className:"mt-4 text-gray-600 font-weight-light",children:"Loading Transactions"}),e.jsx("p",{className:"text-gray-500",children:"Please wait while we fetch your transaction data..."})]})]});const{totalIncome:ye,totalExpenses:je,netCashflow:Ne,expensesRatio:we}=$e(h),ve=Le(t),Fe=m?.goals.find(F=>F.id===t.goal_id)?.goal_name,Ce=()=>{n(F=>({...F,goal_id:void 0})),a("/transactions")},_e=()=>{be(x,i,u,()=>{},m,y)};return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Transactions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"w-9 h-9 rounded-full bg-emerald-500 hover:bg-emerald-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95 disabled:opacity-50",type:"button",id:"mobileExportDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:s||h.length===0,"aria-label":"Export",children:e.jsx("i",{className:"fas fa-download text-xs"})}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-right shadow","aria-labelledby":"mobileExportDropdown",children:[e.jsxs("button",{className:"dropdown-item text-sm",onClick:Z,disabled:s,children:[e.jsx("i",{className:"fas fa-file-pdf fa-sm fa-fw mr-2 text-danger"}),"PDF"]}),e.jsxs("button",{className:"dropdown-item text-sm",onClick:ee,disabled:s,children:[e.jsx("i",{className:"fas fa-file-csv fa-sm fa-fw mr-2 text-success"}),"CSV"]}),e.jsxs("button",{className:"dropdown-item text-sm",onClick:te,disabled:s,children:[e.jsx("i",{className:"fas fa-file-word fa-sm fa-fw mr-2 text-primary"}),"Word"]})]})]}),e.jsx(M,{to:"/transactions/add",className:"w-9 h-9 rounded-full bg-indigo-500 hover:bg-indigo-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95","aria-label":"Add transaction",children:e.jsx("i",{className:"fas fa-plus text-xs"})})]})]})}),e.jsxs("div",{className:"d-none d-md-flex align-items-center justify-content-between mb-4 transactions-header flex-wrap",children:[e.jsx("h1",{className:"h3 mb-0 text-gray-800",children:"Transactions"}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("div",{className:"dropdown",children:[e.jsxs("button",{className:"inline-flex items-center justify-center px-3 py-2 bg-[#1cc88a] hover:bg-[#17a673] text-white text-sm font-medium rounded shadow-sm transition-colors dropdown-toggle disabled:opacity-50 disabled:cursor-not-allowed",type:"button",id:"exportDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:s||h.length===0,children:[e.jsx("i",{className:"fas fa-download text-xs mr-1"}),"Export"]}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-right shadow","aria-labelledby":"exportDropdown",children:[e.jsxs("button",{className:"dropdown-item",onClick:Z,disabled:s,children:[e.jsx("i",{className:"fas fa-file-pdf fa-sm fa-fw mr-2 text-danger"}),"Export as PDF"]}),e.jsxs("button",{className:"dropdown-item",onClick:ee,disabled:s,children:[e.jsx("i",{className:"fas fa-file-csv fa-sm fa-fw mr-2 text-success"}),"Export as CSV"]}),e.jsxs("button",{className:"dropdown-item",onClick:te,disabled:s,children:[e.jsx("i",{className:"fas fa-file-word fa-sm fa-fw mr-2 text-primary"}),"Export as Word"]})]})]}),e.jsxs(M,{to:"/transactions/add",className:"inline-flex items-center justify-center px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-medium rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-1"}),"Add Transaction"]})]})]}),e.jsx(ue,{goalId:t.goal_id,goalName:Fe,onClearFilter:Ce}),e.jsx("div",{className:"transaction-summary-cards",children:e.jsx(me,{totalIncome:ye,totalExpenses:je,netCashflow:Ne,onToggleTip:B})}),e.jsx(xe,{lineChartOptions:b,pieChartOptions:E,filteredTransactions:h,periodTitle:ve,expensesRatio:we,onToggleTip:B}),e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h6",{className:"text-[11px] font-bold text-gray-800 flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-list text-indigo-500 text-[10px]"}),"Transaction List",f>0&&e.jsx("span",{className:"bg-indigo-100 text-indigo-600 px-1.5 py-0.5 rounded-full text-[9px]",children:f})]}),e.jsxs("button",{className:"text-[10px] text-gray-500 flex items-center gap-1",onClick:T,children:[e.jsx("i",{className:"fas fa-undo text-[8px]"}),"Reset"]})]}),e.jsx(V,{filter:t,userData:m,onFilterChange:S,onResetFilters:T,isFiltering:_}),e.jsx(J,{filteredTransactions:u,userData:m,isFiltering:_,onToggleTip:B,onDeleteTransaction:Q,currentPage:p,pageSize:v,totalPages:k,totalItems:f,startIndex:w,endIndex:I,onPageChange:A,onPageSizeChange:O})]})}),e.jsxs("div",{className:"card shadow mb-4 transaction-table d-none d-md-block",children:[e.jsxs("div",{className:"card-header py-3 d-flex flex-row align-items-center justify-content-between flex-wrap",children:[e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center mb-1 mb-md-0",children:["Transaction List",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:F=>B("transactionList",F),"aria-label":"Transaction list information"})})]}),e.jsx("div",{className:"d-flex align-items-center gap-2",children:e.jsxs("button",{className:"inline-flex items-center justify-center px-3 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 text-sm font-medium rounded shadow-sm transition-colors",onClick:T,children:[e.jsx("i",{className:"fas fa-undo text-xs mr-1"}),"Reset"]})})]}),e.jsx("div",{className:"transaction-filters",children:e.jsx(V,{filter:t,userData:m,onFilterChange:S,onResetFilters:T,isFiltering:_})}),e.jsx(J,{filteredTransactions:u,userData:m,isFiltering:_,onToggleTip:B,onDeleteTransaction:Q,currentPage:p,pageSize:v,totalPages:k,totalItems:f,startIndex:w,endIndex:I,onPageChange:A,onPageSizeChange:O})]}),e.jsx(he,{show:G,isDeleting:P,onConfirm:_e,onCancel:fe}),e.jsx(pe,{activeTip:z,tooltipPosition:U})]})};export{rt as default};
