import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{i as X,u as Z,r as l,L as f}from"./react-vendor-D4A9EtXC.js";import{u as G,b as J,s as w}from"./index-BbApZ7g3.js";import{B as R}from"./CentavoInput-HJGBXETA.js";import{f as $,r as K,s as F}from"./currencyUtils-BZq_rNNs.js";import{E as ee}from"./ErrorBoundary-BBG4Eo_2.js";import{C as L}from"./CategorySelector-DIi64-QW.js";import{P as M,D as O}from"./DateSelector-BNFdaKu9.js";/* empty css                       */import"./chart-vendor-B0c7K_uV.js";const se=({children:d})=>{const h=b=>{console.error("Budget component error:",b)},o=e.jsx("div",{className:"card shadow mb-4",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("i",{className:"fas fa-wallet fa-3x text-muted mb-3"}),e.jsx("h5",{className:"text-gray-900",children:"Budget Loading Error"}),e.jsx("p",{className:"text-muted",children:"Unable to load budget information. Please try refreshing the page."})]}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>window.location.reload(),className:"btn btn-primary btn-sm mr-2",children:[e.jsx("i",{className:"fas fa-sync mr-1"}),"Refresh"]}),e.jsxs("a",{href:"/budgets",className:"btn btn-secondary btn-sm",children:[e.jsx("i",{className:"fas fa-chart-pie mr-1"}),"View All Budgets"]})]})]})});return e.jsx(ee,{fallback:o,onError:h,children:d})},ae=()=>{const{id:d}=X(),h=Z(),{user:o}=G(),{showSuccessToast:b,showErrorToast:n}=J(),[Y,S]=l.useState(!0),[m,W]=l.useState([]),[x,_]=l.useState(!1),[u,D]=l.useState(null),[j,k]=l.useState(null),[Q,U]=l.useState(null),[te,y]=l.useState(null),[s,g]=l.useState({budget_name:"",category_id:"",amount:0,period:"month",startDate:new Date().toISOString().slice(0,7)}),[H,N]=l.useState("form"),[p,V]=l.useState(null);l.useEffect(()=>{(async()=>{try{if(S(!0),!o){n("Please sign in to edit a budget"),h("/login");return}if(!d){n("No budget ID provided"),h("/budgets");return}const{data:a,error:r}=await w.from("budgets").select("*").eq("id",d).eq("user_id",o.id).single();if(r)throw new Error(`Error fetching budget: ${r.message}`);if(!a)throw new Error("Budget not found");U(a),g({budget_name:a.budget_name||"",category_id:a.category_id,amount:a.amount||0,period:a.period,startDate:new Date(a.start_date).toISOString().slice(0,10)});const{data:c,error:i}=await w.from("expense_categories").select("id, category_name").eq("user_id",o.id).order("category_name",{ascending:!0});if(i)throw new Error(`Error fetching categories: ${i.message}`);W(c||[])}catch(a){console.error("Error fetching data:",a),n(`Failed to load budget data: ${a.message}`),V(a.message)}finally{S(!1)}})()},[o,h,n,d]),l.useEffect(()=>{if(s.category_id&&m.length>0){const t=m.find(a=>a.id===s.category_id);y(t||null)}else y(null)},[s.category_id,m]);const B=t=>{g(a=>({...a,amount:t}))},C=t=>{y(t),g(a=>({...a,category_id:t?.id||"",category_name:t?.category_name||""}))},E=t=>{const{name:a,value:r}=t.target;if(a==="category_id"){const c=m.find(i=>i.id===r);g(i=>({...i,category_id:r,category_name:c?.category_name||""}))}else g(c=>({...c,[a]:r}))},P=t=>{g(a=>({...a,period:t}))},q=t=>{g(a=>({...a,startDate:t}))},v=()=>{const t=new Date(s.startDate);if(s.period==="day")return s.startDate;if(s.period==="week"){const a=new Date(t);return a.setDate(a.getDate()+6),a.toISOString().slice(0,10)}else if(s.period==="month"){const a=t.getFullYear(),r=t.getMonth();return new Date(a,r+1,0).toISOString().slice(0,10)}else if(s.period==="quarter"){const a=t.getFullYear(),r=t.getMonth();return new Date(a,r+3,0).toISOString().slice(0,10)}else if(s.period==="year"){const a=t.getFullYear(),r=t.getMonth();return new Date(a,r+12,0).toISOString().slice(0,10)}return s.startDate},z=t=>{if(t.preventDefault(),!s.budget_name.trim()){n("Please enter a budget name");return}const a=F(s.budget_name);if(a!==s.budget_name.trim()){if(!window.confirm(`Budget name contains special characters that will be cleaned up. Original: "${s.budget_name.trim()}" will become "${a}". Continue?`))return;g(i=>({...i,budget_name:a}))}if(!s.category_id){n("Please select a category");return}if(!m.find(c=>c.id===s.category_id)){n("Selected category is invalid. Please select a valid category.");return}if(!s.amount||s.amount<=0){n("Please enter a valid amount");return}N("review"),window.scrollTo(0,0)},A=async()=>{if(!o||!Q){n("Unable to update budget. Missing data.");return}_(!0);try{const t=s.startDate,a=v();if(!d)throw new Error("No budget ID provided");const r={budget_name:F(s.budget_name.trim()),category_id:s.category_id,amount:K(s.amount),period:s.period,start_date:t,end_date:a,alert_threshold:.8,updated_at:new Date().toISOString()},{data:c,error:i}=await w.from("budgets").update(r).eq("id",d).eq("user_id",o.id).select().single();if(i)throw i.code==="23503"?new Error("Invalid category selected. Please choose a valid category."):i.code==="23505"?new Error("A budget with this name already exists. Please choose a different name."):new Error(`Database error: ${i.message}`);if(!c)throw new Error("Budget update failed - no data returned");b("Budget updated successfully!"),h(`/budgets/${d}`)}catch(t){console.error("Error updating budget:",t),n(`Failed to update budget: ${t.message}`)}finally{_(!1)}},I=(t,a)=>{if(u===t)D(null),k(null);else if(D(t),a){const r=a.currentTarget.getBoundingClientRect();k({top:r.bottom+window.scrollY,left:r.left+r.width/2+window.scrollX})}},T={"budget-details":{title:"Budget Details",description:"Set up your budget by selecting a category, amount, and time period. This helps you track spending against your goals."},"budget-tips":{title:"Budgeting Tips",description:"Follow proven budgeting strategies to manage your finances effectively and reach your financial goals."}};if(Y)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading budget data..."})]})}),e.jsxs("div",{className:"text-center my-5 hidden md:block",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("p",{className:"mt-3 text-gray-700",children:"Loading budget data..."})]})]});if(p)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center px-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-rose-100 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-exclamation-circle text-rose-500 text-2xl"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:"Loading Error"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:p}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center gap-2 px-4 py-2 bg-rose-500 text-white text-sm font-medium rounded-lg hover:bg-rose-600 transition-colors",children:[e.jsx("i",{className:"fas fa-refresh text-xs"}),"Retry"]})]})}),e.jsx("div",{className:"text-center my-5 hidden md:block",children:e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx("h4",{className:"alert-heading",children:"Loading Error"}),e.jsx("p",{children:p}),e.jsx("hr",{}),e.jsxs("button",{className:"btn btn-outline-danger",onClick:()=>window.location.reload(),children:[e.jsx("i",{className:"fas fa-refresh mr-2"}),"Retry"]})]})})]});if(H==="review"){const t=m.find(a=>a.id===s.category_id);return e.jsxs("div",{className:"container-fluid animate__animated animate__fadeIn",children:[e.jsx("div",{className:"block md:hidden mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Review Changes"}),e.jsx(f,{to:`/budgets/${d}`,className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center shadow-sm transition-all active:scale-95","aria-label":"Cancel",children:e.jsx("i",{className:"fas fa-times text-xs"})})]})}),e.jsxs("div",{className:"block md:hidden mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 via-indigo-500 to-purple-500 rounded-2xl p-4 shadow-lg mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-semibold bg-white/20 text-white",children:"Edit Budget"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-edit text-white text-sm"})})]}),e.jsx("div",{className:"text-white text-2xl font-bold mb-1",children:$(s.amount)}),e.jsx("div",{className:"text-white/70 text-xs",children:s.budget_name||"Unnamed Budget"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-amber-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-tag text-amber-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Category"}),e.jsx("p",{className:"text-xs font-bold text-gray-800 truncate",children:t?.category_name||"N/A"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-calendar text-emerald-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Period"}),e.jsxs("p",{className:"text-xs font-bold text-gray-800 truncate",children:[s.period==="day"&&"Daily",s.period==="week"&&"Weekly",s.period==="month"&&"Monthly",s.period==="quarter"&&"Quarterly",s.period==="year"&&"Yearly"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-blue-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-calendar-day text-blue-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Start Date"}),e.jsx("p",{className:"text-xs font-bold text-gray-800 truncate",children:new Date(s.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-gray-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-calendar-check text-gray-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"End Date"}),e.jsx("p",{className:"text-xs font-bold text-gray-800 truncate",children:new Date(v()).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>N("form"),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left text-xs"}),"Back"]}),e.jsx("button",{onClick:A,disabled:x,className:"flex-1 py-3 bg-emerald-500 hover:bg-emerald-600 text-white text-sm font-semibold rounded-xl transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:x?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-xs"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check text-xs"}),"Save"]})})]})]}),e.jsxs("div",{className:"d-none d-md-flex align-items-center justify-content-between mb-2 mb-md-4 flex-wrap",children:[e.jsx("h1",{className:"h5 h-md-3 mb-1 mb-md-0 text-gray-800",style:{fontSize:"1.1rem"},children:"Review Budget Changes"}),e.jsxs(f,{to:`/budgets/${d}`,className:"btn btn-sm btn-secondary shadow-sm d-flex align-items-center",style:{padding:"0.25rem 0.5rem"},children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm",style:{fontSize:"0.7rem"}}),e.jsx("span",{className:"d-none d-md-inline ml-2",children:"Cancel"})]})]}),e.jsx("div",{className:"row d-none d-md-flex",children:e.jsx("div",{className:"col-lg-8 mx-auto",children:e.jsxs("div",{className:"card shadow mb-3 mb-md-4",children:[e.jsxs("div",{className:"card-header py-2 d-flex align-items-center",children:[e.jsx("span",{className:"badge badge-primary mr-2",children:"Budget"}),e.jsx("h6",{className:"m-0 font-weight-bold text-primary",style:{fontSize:"0.875rem"},children:"Budget Details"})]}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1",style:{fontSize:"0.65rem"},children:"Budget Name"}),e.jsx("div",{className:"h5 h6-mobile mb-0 font-weight-bold text-gray-800",children:s.budget_name||"N/A"})]}),e.jsx("div",{className:"col-auto d-none d-md-block",children:e.jsx("i",{className:"fas fa-file-alt fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-primary shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",style:{fontSize:"0.65rem"},children:"Amount"}),e.jsx("div",{className:"h5 h6-mobile mb-0 font-weight-bold text-gray-800",children:$(s.amount)})]}),e.jsx("div",{className:"col-auto d-none d-md-block",children:e.jsx("i",{className:"fas fa-solid fa-peso-sign fa-2x text-gray-300"})})]})})})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-success shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-success text-uppercase mb-1",style:{fontSize:"0.65rem"},children:"Period"}),e.jsxs("div",{className:"h5 h6-mobile mb-0 font-weight-bold text-gray-800",children:[s.period==="day"&&"Daily",s.period==="week"&&"Weekly",s.period==="month"&&"Monthly",s.period==="quarter"&&"Quarterly",s.period==="year"&&"Yearly"]})]}),e.jsxs("div",{className:"col-auto d-none d-md-block",children:[s.period==="day"&&e.jsx("i",{className:"fas fa-calendar-day fa-2x text-gray-300"}),s.period==="week"&&e.jsx("i",{className:"fas fa-calendar-week fa-2x text-gray-300"}),s.period==="month"&&e.jsx("i",{className:"fas fa-calendar fa-2x text-gray-300"}),s.period==="quarter"&&e.jsx("i",{className:"fas fa-calendar-alt fa-2x text-gray-300"}),s.period==="year"&&e.jsx("i",{className:"fas fa-calendar-check fa-2x text-gray-300"})]})]})})})}),e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-warning shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-warning text-uppercase mb-1",style:{fontSize:"0.65rem"},children:"Category"}),e.jsx("div",{className:"h5 h6-mobile mb-0 font-weight-bold text-gray-800",children:t?.category_name||"N/A"})]}),e.jsx("div",{className:"col-auto d-none d-md-block",children:e.jsx("i",{className:"fas fa-tag fa-2x text-gray-300"})})]})})})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1",style:{fontSize:"0.65rem"},children:"Start Date"}),e.jsx("div",{className:"h5 h6-mobile mb-0 font-weight-bold text-gray-800",children:new Date(s.startDate).toLocaleDateString()})]}),e.jsx("div",{className:"col-auto d-none d-md-block",children:e.jsx("i",{className:"fas fa-calendar-day fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx("div",{className:"card border-left-secondary shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-secondary text-uppercase mb-1",style:{fontSize:"0.65rem"},children:"End Date"}),e.jsx("div",{className:"h5 h6-mobile mb-0 font-weight-bold text-gray-800",children:new Date(v()).toLocaleDateString()})]}),e.jsx("div",{className:"col-auto d-none d-md-block",children:e.jsx("i",{className:"fas fa-calendar-check fa-2x text-gray-300"})})]})})})})]}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-center align-items-stretch gap-2 mt-4",children:[e.jsxs("button",{onClick:()=>N("form"),className:"btn btn-sm btn-outline-secondary d-flex align-items-center justify-content-center",style:{padding:"0.5rem 1rem"},children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm mr-2",style:{fontSize:"0.7rem"}}),e.jsx("span",{children:"Back to Edit"})]}),e.jsxs("button",{onClick:A,disabled:x,className:"btn btn-sm btn-success d-flex align-items-center justify-content-center",style:{padding:"0.5rem 1rem"},children:[e.jsx("i",{className:`${x?"fas fa-spinner fa-spin":"fas fa-check"} fa-sm text-white-50 mr-2`,style:{fontSize:"0.7rem"}}),e.jsx("span",{children:x?"Saving...":"Save Changes"})]})]})]})]})})})]})}return e.jsxs("div",{className:"container-fluid animate__animated animate__fadeIn",children:[e.jsx("div",{className:"block md:hidden mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Edit Budget"}),e.jsx(f,{to:`/budgets/${d}`,className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center shadow-sm transition-all active:scale-95","aria-label":"Back to budget",children:e.jsx("i",{className:"fas fa-arrow-left text-xs"})})]})}),e.jsxs("div",{className:"block md:hidden mb-4",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gradient-to-r from-blue-500 to-indigo-500",children:e.jsxs("h6",{className:"text-sm font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-edit text-white/80 text-xs"}),"Budget Details"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 mb-1.5 block",children:["Budget Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",name:"budget_name",value:s.budget_name,onChange:E,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"e.g., Monthly Food Budget",required:!0})]}),e.jsx("div",{className:"mb-4",children:e.jsx(L,{selectedCategoryId:s.category_id,onCategorySelect:C,transactionType:"expense",incomeCategories:[],expenseCategories:m,required:!0,label:"Category"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx("div",{children:e.jsx(M,{selectedPeriod:s.period,onPeriodSelect:P,required:!0,label:"Period"})}),e.jsx("div",{children:e.jsx(O,{selectedDate:s.startDate,onDateSelect:q,required:!0,label:"Start Date"})})]}),e.jsx("div",{className:"mb-4",children:e.jsx(R,{value:s.amount,onChange:B,currency:"PHP",label:"Amount",placeholder:"0.00",required:!0,suggestedAmounts:[1e3,2500,5e3,1e4,15e3,25e3]})}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-semibold rounded-xl transition-colors flex items-center justify-center gap-2 disabled:opacity-50",disabled:x,children:[e.jsx("i",{className:"fas fa-arrow-right text-xs"}),"Continue to Review"]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mt-3",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("h6",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-lightbulb text-amber-500 text-[10px]"}),"Quick Tips"]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fas fa-chart-pie text-blue-500 text-[10px]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-800",children:"50/30/20 Rule"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"50% needs, 30% wants, 20% savings"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-100 flex items-center justify-center flex-shrink-0",children:e.jsx("i",{className:"fas fa-bullseye text-emerald-500 text-[10px]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-800",children:"Zero-Based Budget"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Assign every peso a purpose"})]})]})]})]})]}),e.jsxs("div",{className:"d-none d-md-flex align-items-center justify-content-between mb-2 mb-md-4 flex-wrap",children:[e.jsx("h1",{className:"h5 h-md-3 mb-1 mb-md-0 text-gray-800",style:{fontSize:"1.1rem"},children:"Edit Budget"}),e.jsxs(f,{to:`/budgets/${d}`,className:"btn btn-sm btn-secondary shadow-sm d-flex align-items-center",style:{padding:"0.25rem 0.5rem"},children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm",style:{fontSize:"0.7rem"}}),e.jsx("span",{className:"d-none d-md-inline ml-2",children:"Back to Budget"})]})]}),u&&j&&e.jsx("div",{className:"tip-box light",style:{position:"absolute",top:`${j.top}px`,left:`${j.left}px`,transform:"translateX(-50%)",zIndex:1e3,background:"white",padding:"12px 15px",borderRadius:"8px",boxShadow:"0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15)",maxWidth:"300px",border:"1px solid rgba(0, 0, 0, 0.05)"},children:u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-weight-bold mb-2",children:T[u].title}),e.jsx("p",{className:"mb-0",children:T[u].description})]})}),e.jsxs("div",{className:"row d-none d-md-flex",children:[e.jsx("div",{className:"col-lg-8",children:e.jsxs("div",{className:"card shadow mb-3 mb-md-4",children:[e.jsx("div",{className:"card-header py-2",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary",children:["Budget Details",e.jsx("i",{className:"fas fa-info-circle ml-1 text-gray-400",style:{cursor:"pointer"},onClick:t=>I("budget-details",t)})]})}),e.jsx("div",{className:"card-body p-3",children:e.jsxs("form",{onSubmit:z,children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 mb-3 mb-md-4",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"budget_name",className:"font-weight-bold text-gray-800",style:{fontSize:"0.875rem"},children:["Budget Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"budget_name",name:"budget_name",value:s.budget_name,onChange:E,className:"form-control form-control-user",placeholder:"Enter budget name (e.g., Monthly Food Budget)",maxLength:100,pattern:"[^%.*]+",title:"Budget name cannot contain %, ., or * characters",required:!0,style:{fontSize:"0.875rem"}}),e.jsx("small",{className:"form-text text-muted",style:{fontSize:"0.75rem"},children:"Give your budget a descriptive name (avoid special characters like %, ., *)"})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 mb-3",children:e.jsx(L,{selectedCategoryId:s.category_id,onCategorySelect:C,transactionType:"expense",incomeCategories:[],expenseCategories:m,required:!0,label:"Category"})})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx(M,{selectedPeriod:s.period,onPeriodSelect:P,required:!0,label:"Period"})}),e.jsx("div",{className:"col-12 col-md-6 mb-3 mb-md-4",children:e.jsx(O,{selectedDate:s.startDate,onDateSelect:q,required:!0,label:"Start Date"})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 col-md-6 mx-auto",children:e.jsx(R,{value:s.amount,onChange:B,currency:"PHP",label:"Amount",placeholder:"0.00",required:!0,suggestedAmounts:[1e3,2500,5e3,1e4,15e3,25e3]})})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-user btn-block",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin mr-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-arrow-right mr-2"}),"Continue to Review"]})})})]})})]})}),e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:"card shadow mb-3 mb-md-4",children:[e.jsx("div",{className:"card-header py-2",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary",children:["Budgeting Tips",e.jsx("i",{className:"fas fa-info-circle ml-1 text-gray-400",style:{cursor:"pointer"},onClick:t=>I("budget-tips",t)})]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"icon-circle bg-primary text-white mr-3",children:e.jsx("i",{className:"fas fa-chart-pie"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-weight-bold text-gray-800",children:"50/30/20 Rule"}),e.jsx("div",{className:"text-muted small",children:"Allocate 50% for needs, 30% for wants, and 20% for savings"})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"icon-circle bg-success text-white mr-3",children:e.jsx("i",{className:"fas fa-bullseye"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-weight-bold text-gray-800",children:"Zero-Based Budget"}),e.jsx("div",{className:"text-muted small",children:"Assign every dollar a purpose"})]})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"icon-circle bg-primary text-white mr-3",children:e.jsx("i",{className:"fas fa-balance-scale"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-weight-bold text-gray-800",children:"Be Realistic"}),e.jsx("div",{className:"text-muted small",children:"Set achievable budget goals based on your spending history"})]})]})}),e.jsx("div",{className:"mb-0",children:e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"icon-circle bg-warning text-white mr-3",children:e.jsx("i",{className:"fas fa-sync-alt"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-weight-bold text-gray-800",children:"Adjust As Needed"}),e.jsx("div",{className:"text-muted small",children:"Review and update your budget regularly"})]})]})})]})]})})]})]})};function he(){return e.jsx(se,{children:e.jsx(ae,{})})}export{he as default};
