import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{u as B,r as i,L as g}from"./react-vendor-D4A9EtXC.js";import{i as Y,u as H,b as O,d as p,f as E,s as I}from"./index-BbApZ7g3.js";import{C as v}from"./CentavoInput-HJGBXETA.js";import{f as u,r as q}from"./currencyUtils-BZq_rNNs.js";import{T as R,P as M}from"./GoalProgressSection-Cn9Xum9Y.js";import"./ContributionMobileFooter-vJRvixwu.js";/* empty css                       */import"./chart-vendor-B0c7K_uV.js";const re=()=>{const w=B(),{currencySymbol:z}=Y(),{user:n}=H(),{showSuccessToast:$,showErrorToast:m}=O(),[L,b]=i.useState("form"),[o,D]=i.useState(!1),[d,h]=i.useState(null),[_,F]=i.useState(!1),[f,k]=i.useState(!1),[x,C]=i.useState(null),[l,S]=i.useState(null),U={goal_name:"",target_amount:0,target_date:"",current_amount:0,priority:"medium",notes:"",share_with_family:!1},[s,c]=i.useState(U),P=new URLSearchParams(window.location.search).get("share");i.useEffect(()=>{n||(m("Please sign in to create a goal"),w("/login")),P==="family"&&c(a=>({...a,share_with_family:!0}))},[n,w,m,P]),i.useEffect(()=>{(async()=>{if(n)try{F(!0),console.log("Checking family status for user:",n.id);const{data:t,error:r}=await I.from("family_members").select(`
            id,
            family_id,
            role,
            status,
            families:family_id (
              id,
              family_name
            )
          `).eq("user_id",n.id).eq("status","active").limit(1);console.log("Family member query result:",{memberData:t,memberError:r}),!r&&t&&t.length>0?(console.log("User is a family member:",t[0]),k(!0),C(t[0].family_id),S(t[0].role)):(console.log("No family_members record found and check_user_family RPC is not available"),k(!1),C(null),S(null))}catch(t){console.error("Error checking family status:",t),k(!1),C(null),S(null)}finally{F(!1)}})()},[n]);const j=a=>{const{name:t,value:r}=a.target;c(y=>({...y,[t]:r}))},N=a=>t=>{c(r=>({...r,[a]:t}))},G=a=>{if(a.preventDefault(),h(null),!s.goal_name){m("Please enter a goal name");return}if(!s.target_amount||s.target_amount<=0){m("Please enter a valid target amount");return}if(!s.target_date){m("Please select a target date");return}if(new Date(s.target_date)<=new Date){m("Target date must be in the future");return}b("review"),window.scrollTo(0,0)},T=async()=>{try{if(D(!0),h(null),!n||!n.id)throw new Error("User not authenticated");console.log("Goal submission data:",{share_with_family:s.share_with_family,isFamilyMember:f,userFamilyId:x});const a={goal_name:s.goal_name,target_amount:q(s.target_amount),current_amount:q(s.current_amount)||0,target_date:s.target_date,priority:s.priority,notes:s.notes,user_id:n.id,status:"in_progress",currency:"PHP"};if(s.share_with_family)if(f&&x)console.log("Adding family sharing data",{family_id:x}),a.family_id=x,a.is_family_goal=!0;else throw console.log("Failed to add family sharing - missing conditions:",{isFamilyMember:f,userFamilyId:x}),new Error("Could not create family goal: You must be part of a family first.");console.log("Final goal data:",a);const{data:t,error:r}=await I.from("goals").insert(a).select().single();if(r)throw new Error(r.message);$(`Goal "${s.goal_name}" ${s.share_with_family?"shared with family":"created"} successfully!`),w("/goals")}catch(a){console.error("Error creating goal:",a);const t=a instanceof Error?a.message:"Unknown error occurred";m(`Failed to create goal: ${t}`),h(t),D(!1)}},V=()=>{if(!s.target_amount||!s.target_date)return null;const a=s.target_amount,t=s.current_amount||0,r=new Date(s.target_date),y=new Date,A=(r.getFullYear()-y.getFullYear())*12+(r.getMonth()-y.getMonth());return A<=0?a-t:(a-t)/A};if(_)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading..."})]})}),e.jsxs("div",{className:"text-center my-5 hidden md:block",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("p",{className:"mt-3 text-gray-700",children:"Loading..."})]})]});if(L==="review"){const a=V();return e.jsxs("div",{className:"container-fluid animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Review Goal"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>b("form"),className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center shadow-sm transition-all active:scale-95","aria-label":"Back to edit",children:e.jsx("i",{className:"fas fa-arrow-left text-xs"})})})]})}),d&&e.jsx("div",{className:"bg-rose-50 border border-rose-200 rounded-xl p-3 mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-rose-500 text-sm"}),e.jsx("p",{className:"text-xs text-rose-700",children:d})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-4 mb-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"New Goal"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-bullseye text-white text-sm"})})]}),e.jsx("div",{className:"text-white text-lg font-bold mb-1 truncate",children:s.goal_name}),e.jsxs("div",{className:"text-white/70 text-xs",children:["Target: ",u(s.target_amount)]})]}),e.jsx("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s.share_with_family?"bg-blue-100":"bg-indigo-100"}`,children:e.jsx("i",{className:`fas ${s.share_with_family?"fa-users":"fa-user"} ${s.share_with_family?"text-blue-500":"text-indigo-500"} text-sm`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-800",children:s.share_with_family?"Family Shared Goal":"Personal Goal"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:s.share_with_family?"Visible to family members":"Only visible to you"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-blue-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-bullseye text-blue-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Target"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:u(s.target_amount)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-piggy-bank text-emerald-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Current"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:u(s.current_amount||0)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-amber-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-calendar text-amber-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Target Date"}),e.jsx("p",{className:"text-xs font-bold text-gray-800",children:p(s.target_date)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-rose-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-flag text-rose-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Priority"}),e.jsx("p",{className:"text-xs font-bold text-gray-800 capitalize",children:s.priority})]})]}),a&&e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-4 mb-3 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chart-line text-white text-sm"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white/80 text-[10px] font-medium uppercase tracking-wide",children:"Monthly Saving"}),e.jsx("p",{className:"text-white text-lg font-bold",children:E(a)}),e.jsxs("p",{className:"text-white/60 text-[10px]",children:["To reach goal by ",p(s.target_date)]})]})]})}),s.notes&&e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 mb-3",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide mb-1",children:"Notes"}),e.jsx("p",{className:"text-xs text-gray-700",children:s.notes})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>b("form"),className:"flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 text-sm font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left text-xs"}),"Edit"]}),e.jsxs("button",{onClick:T,disabled:o,className:"flex-1 py-3 bg-emerald-500 hover:bg-emerald-600 text-white text-sm font-medium rounded-xl transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx("i",{className:`fas ${o?"fa-spinner fa-spin":"fa-check"} text-xs`}),o?"Creating...":"Create Goal"]})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[e.jsx("h1",{className:"h3 mb-0 text-gray-800",children:"Review Your Goal"}),e.jsxs(g,{to:"/goals",className:"btn btn-sm btn-secondary shadow-sm",children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm mr-2"})," Cancel"]})]}),d&&e.jsxs("div",{className:"alert alert-danger mb-4",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),d]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-8 mx-auto",children:e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.2s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsx("h6",{className:"m-0 font-weight-bold text-primary",children:"Goal Details"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12 mb-4",children:[e.jsx("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:"Goal Name"}),e.jsx("h4",{className:"h4 mb-0 font-weight-bold text-gray-800",children:s.goal_name})]})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row no-gutters align-items-center",children:e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1",children:"Goal Type"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800 d-flex align-items-center",children:s.share_with_family?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2",children:e.jsx("i",{className:"fas fa-users text-info"})}),"Family Shared Goal",e.jsx("span",{className:"badge badge-info ml-2",children:"Visible to family members"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2",children:e.jsx("i",{className:"fas fa-user text-primary"})}),"Personal Goal",e.jsx("span",{className:"badge badge-primary ml-2",children:"Only visible to you"})]})})]})})})})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6 mb-4 mb-md-0",children:e.jsx("div",{className:"card border-left-primary shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:"Target Amount"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:u(s.target_amount)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-bullseye fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-left-success shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-success text-uppercase mb-1",children:"Current Amount"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:u(s.current_amount||0)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-piggy-bank fa-2x text-gray-300"})})]})})})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6 mb-4 mb-md-0",children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1",children:"Target Date"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:p(s.target_date)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-calendar fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-left-warning shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-warning text-uppercase mb-1",children:"Priority"}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800 text-capitalize",children:s.priority})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-flag fa-2x text-gray-300"})})]})})})})]}),a&&e.jsx("div",{className:"card bg-success text-white shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.4s"},children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-white text-uppercase mb-1",children:"Recommended Monthly Saving"}),e.jsx("div",{className:"h3 mb-0 font-weight-bold text-white",children:E(a)}),e.jsxs("div",{className:"text-white-50 small mt-2",children:["To reach your goal by ",p(s.target_date)]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-chart-line fa-3x text-white-50"})})]})})}),s.notes&&e.jsx("div",{className:"card bg-light mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.5s"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:"Notes"}),e.jsx("p",{className:"mb-0",children:s.notes})]})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsxs("button",{onClick:()=>b("form"),className:"btn btn-light btn-icon-split mr-2",children:[e.jsx("span",{className:"icon text-gray-600",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsx("span",{className:"text",children:"Back to Edit"})]}),e.jsxs("button",{onClick:T,disabled:o,className:"btn btn-success btn-icon-split",children:[e.jsx("span",{className:"icon text-white-50",children:e.jsx("i",{className:o?"fas fa-spinner fa-spin":"fas fa-check"})}),e.jsx("span",{className:"text",children:o?"Creating...":"Create Goal"})]})]})]})]})})})]})]})}return e.jsxs("div",{className:"container-fluid animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Create Goal"}),e.jsx(g,{to:"/goals",className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center shadow-sm transition-all active:scale-95","aria-label":"Back to goals",children:e.jsx("i",{className:"fas fa-arrow-left text-xs"})})]})}),d&&e.jsx("div",{className:"bg-rose-50 border border-rose-200 rounded-xl p-3 mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-rose-500 text-sm"}),e.jsx("p",{className:"text-xs text-rose-700",children:d})]}),e.jsx("button",{onClick:()=>h(null),className:"text-rose-500",children:e.jsx("i",{className:"fas fa-times text-xs"})})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-4",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("h6",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-bullseye text-indigo-500 text-[10px]"}),"Goal Information"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:["Goal Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",name:"goal_name",value:s.goal_name,onChange:j,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",placeholder:"e.g., Vacation, Emergency Fund",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx("div",{children:e.jsx(v,{value:s.target_amount,onChange:N("target_amount"),currency:"PHP",label:"Target Amount",placeholder:"0.00",required:!0,min:.01,className:"mb-0"})}),e.jsx("div",{children:e.jsx(v,{value:s.current_amount,onChange:N("current_amount"),currency:"PHP",label:"Current Amount",placeholder:"0.00",required:!1,min:0,className:"mb-0"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[e.jsx(R,{selectedDate:s.target_date,onDateSelect:a=>c({...s,target_date:a}),required:!0,className:"mb-0"}),e.jsx(M,{selectedPriority:s.priority,onPrioritySelect:a=>c({...s,priority:a}),required:!0,showDescription:!1,className:"mb-0"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Notes (Optional)"}),e.jsx("textarea",{name:"notes",value:s.notes,onChange:j,rows:3,className:"w-full px-3 py-2.5 text-sm border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all resize-none",placeholder:"Add any details about your goal"})]}),_?e.jsx("div",{className:"bg-gray-50 rounded-xl p-3 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Checking family status..."})]})}):f?e.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 mb-4 border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-users text-blue-500 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-800",children:"Family Sharing"}),e.jsxs("p",{className:"text-[10px] text-blue-600",children:["Role: ",l?l.charAt(0).toUpperCase()+l.slice(1):"N/A"]})]})]}),e.jsxs("label",{className:`flex items-center gap-2 ${l==="viewer"?"opacity-50":""}`,children:[e.jsx("input",{type:"checkbox",checked:s.share_with_family,disabled:l==="viewer",onChange:a=>c({...s,share_with_family:a.target.checked}),className:"w-4 h-4 text-blue-500 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Share with family"})]}),l==="viewer"&&e.jsxs("p",{className:"text-[10px] text-amber-600 mt-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Viewers cannot share goals"]})]}):e.jsx("div",{className:"bg-gray-50 rounded-xl p-3 mb-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-200 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-users text-gray-400 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600",children:"Family Sharing"}),e.jsx("p",{className:"text-[10px] text-gray-500",children:"Join a family to share goals"})]}),e.jsx(g,{to:"/family/create",className:"text-[10px] text-indigo-500 font-medium",children:"Create →"})]})}),e.jsxs("button",{type:"submit",className:"w-full py-3 bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-right text-xs"}),"Continue to Review"]})]})})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[e.jsx("h1",{className:"h3 mb-0 text-gray-800",children:"Create New Goal"}),e.jsxs(g,{to:"/goals",className:"btn btn-sm btn-secondary shadow-sm",children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm mr-2"})," Back to Goals"]})]}),d&&e.jsxs("div",{className:"alert alert-danger mb-4",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),d,e.jsx("button",{onClick:()=>h(null),className:"close","aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 mx-auto",children:e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.2s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsx("h6",{className:"m-0 font-weight-bold text-primary",children:"Goal Information"})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"goal_name",className:"font-weight-bold text-gray-800",children:["Goal Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"goal_name",name:"goal_name",value:s.goal_name,onChange:j,className:"form-control form-control-user",placeholder:"e.g., Vacation, Emergency Fund, New Car",required:!0}),e.jsx("small",{className:"form-text text-muted",children:"Give your goal a clear, specific name"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(v,{value:s.target_amount,onChange:N("target_amount"),currency:"PHP",label:"Target Amount",placeholder:"0.00",required:!0,min:.01,className:"mb-3"})}),e.jsxs("div",{className:"col-md-6",children:[e.jsx(v,{value:s.current_amount,onChange:N("current_amount"),currency:"PHP",label:"Current Amount (Optional)",placeholder:"0.00",required:!1,min:0,className:"mb-3"}),e.jsx("small",{className:"form-text text-muted",children:"Money you've already saved towards this goal"})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(R,{selectedDate:s.target_date,onDateSelect:a=>c({...s,target_date:a}),required:!0,label:"Target Date"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(M,{selectedPriority:s.priority,onPrioritySelect:a=>c({...s,priority:a}),required:!0,showDescription:!0,label:"Priority"})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"notes",children:"Additional Notes (Optional)"}),e.jsx("textarea",{className:"form-control",id:"notes",name:"notes",rows:3,value:s.notes,onChange:j}),e.jsx("small",{className:"text-muted",children:"Add any details or reminders about your goal"})]}),_?e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"card border-left-info shadow p-3 mb-3",children:[e.jsxs("h5",{className:"font-weight-bold text-info mb-3",children:[e.jsx("i",{className:"fas fa-users mr-2"}),"Family Goal Sharing"]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"spinner-border spinner-border-sm text-info mr-2",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("span",{children:"Checking your family status..."})]})]})}):f?e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"card border-left-info shadow p-3 mb-3",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h5",{className:"font-weight-bold text-info mb-0",children:[e.jsx("i",{className:"fas fa-users mr-2"}),"Family Goal Sharing"]}),e.jsx("div",{className:"alert alert-light mt-2 mb-0 py-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),e.jsxs("strong",{children:["Your family role: ",l?l.charAt(0).toUpperCase()+l.slice(1):"N/A"]}),l==="viewer"&&e.jsx("span",{className:"text-warning ml-2",children:"• Viewers can only view goals but cannot contribute to them or link goals to family"}),l==="member"&&e.jsx("span",{className:"text-success ml-2",children:"• Members can contribute to goals and link goals to family"}),l==="admin"&&e.jsx("span",{className:"text-primary ml-2",children:"• Admins have full permissions including goal management and family administration"})]})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("input",{type:"checkbox",className:"mr-2",id:"shareWithFamily",name:"share_with_family",checked:s.share_with_family,disabled:l==="viewer",onChange:a=>c({...s,share_with_family:a.target.checked})}),e.jsxs("label",{className:`font-weight-bold text-nowrap mb-0 ${l==="viewer"?"text-muted":""}`,htmlFor:"shareWithFamily",children:["Share this goal with my family ",l==="viewer"&&"(Not available for viewers)"]})]}),e.jsxs("small",{className:"form-text text-muted d-block",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),l==="viewer"?"Viewers can only view family goals but cannot create or share new goals with the family.":"When shared, this goal will appear in your family dashboard and family members can view and contribute to it."]}),e.jsxs("small",{className:"form-text text-muted d-block mt-1",children:[e.jsx("i",{className:"fas fa-lock mr-1"}),"If not shared, this will be a personal goal only visible to you."]}),s.share_with_family&&e.jsxs("div",{className:"alert alert-info mt-2 py-2 mb-0",children:[e.jsx("i",{className:"fas fa-users mr-1"}),"This goal will be visible to all family members.",e.jsxs("div",{className:"small mt-1",children:[e.jsx("strong",{children:"Family ID:"})," ",x??"Unknown"]})]})]}),e.jsx("div",{className:"col-md-4"})]})]})}):e.jsx("div",{className:"form-group",children:e.jsxs("div",{className:"card border-left-secondary shadow p-3 mb-3",children:[e.jsxs("h5",{className:"font-weight-bold text-secondary mb-3",children:[e.jsx("i",{className:"fas fa-users mr-2"}),"Family Goal Sharing"]}),e.jsxs("div",{className:"alert alert-light mb-0",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"You need to be part of a family to share goals.",e.jsx("div",{className:"mt-2",children:e.jsxs(g,{to:"/family/create",className:"btn btn-sm btn-info",children:[e.jsx("i",{className:"fas fa-plus mr-1"})," Create a Family"]})})]})]})}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"submit",className:"btn btn-primary btn-icon-split",children:[e.jsx("span",{className:"icon text-white-50",children:e.jsx("i",{className:"fas fa-arrow-right"})}),e.jsx("span",{className:"text",children:"Continue to Review"})]})})]})})]})}),e.jsx("div",{className:"col-lg-4 d-none d-lg-block",children:e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.3s"},children:[e.jsx("div",{className:"card-header py-3",children:e.jsx("h6",{className:"m-0 font-weight-bold text-primary",children:"Goal Setting Tips"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(78, 115, 223, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-bullseye text-primary"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Be Specific"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Clearly define what you want to achieve"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(28, 200, 138, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-balance-scale text-success"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Be Realistic"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Set achievable targets based on your income"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(246, 194, 62, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-clock text-warning"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Set Deadlines"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Time-bound goals keep you motivated"})]}),e.jsxs("div",{className:"mb-0",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle p-1 mr-3 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(54, 185, 204, 0.2)",width:"32px",height:"32px"},children:e.jsx("i",{className:"fas fa-tasks text-info"})}),e.jsx("p",{className:"font-weight-bold mb-0",children:"Break it Down"})]}),e.jsx("p",{className:"text-sm ml-5 mb-0",children:"Large goals are easier as monthly targets"})]})]})]})})]})]})]})};export{re as default};
