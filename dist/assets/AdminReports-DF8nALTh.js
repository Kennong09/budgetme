import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{r as p}from"./react-vendor-D4A9EtXC.js";import{u as se,b as te,s as g}from"./index-BbApZ7g3.js";import{d as Q,H as J}from"./chart-vendor-B0c7K_uV.js";const ae=(s="week")=>{const{user:a}=se(),{showErrorToast:i}=te(),[n,t]=p.useState(!0),[x,w]=p.useState(null),[o,v]=p.useState(null),[y,h]=p.useState([]),[d,O]=p.useState(null),[E,_]=p.useState(null),[M,U]=p.useState(null),[z,$]=p.useState(null),T=p.useRef([]),F=()=>{const l=new Date;let f;switch(s){case"day":f=new Date(l.getFullYear(),l.getMonth(),l.getDate());break;case"week":f=new Date(l.getTime()-7*24*60*60*1e3);break;case"month":f=new Date(l.getFullYear(),l.getMonth(),1);break;case"quarter":const S=Math.floor(l.getMonth()/3)*3;f=new Date(l.getFullYear(),S,1);break;default:f=new Date(l.getTime()-7*24*60*60*1e3)}return{startDate:f,endDate:l}},R=async()=>{try{const{data:l,error:f}=await g.from("admin_dashboard_summary").select("*").single();if(f)throw console.error("Error fetching dashboard summary:",f),f;v(l)}catch(l){throw console.error("Error in fetchDashboardSummary:",l),l}},L=async()=>{try{const{startDate:l}=F(),{data:f,error:S}=await g.from("system_activity_log").select("activity_type, created_at, severity").gte("created_at",l.toISOString()).order("created_at",{ascending:!1});if(S)throw console.error("Error fetching system activity:",S),S;const r={};(f||[]).forEach(C=>{const k=new Date(C.created_at).toDateString(),j=C.activity_type;r[j]||(r[j]={}),r[j][k]||(r[j][k]=0),r[j][k]++});const m=[];Object.keys(r).forEach(C=>{Object.keys(r[C]).forEach(k=>{m.push({activity_type:C,count:r[C][k],activity_date:k})})}),h(m)}catch(l){throw console.error("Error in fetchSystemActivity:",l),l}},W=async()=>{try{const l=new Date,f=new Date(l.getFullYear(),l.getMonth(),l.getDate()),S=new Date(l.getTime()-7*24*60*60*1e3),r=new Date(l.getFullYear(),l.getMonth(),1),{count:m}=await g.from("profiles").select("*",{count:"exact",head:!0}),{count:C}=await g.from("profiles").select("*",{count:"exact",head:!0}).gte("created_at",f.toISOString()),{count:k}=await g.from("profiles").select("*",{count:"exact",head:!0}).gte("last_login",S.toISOString()),{count:j}=await g.from("profiles").select("*",{count:"exact",head:!0}).gte("last_login",r.toISOString());O({total_users:m||0,new_users_today:C||0,active_users_week:k||0,active_users_month:j||0})}catch(l){throw console.error("Error in fetchUserEngagement:",l),l}},P=async()=>{try{const{startDate:l}=F(),f=new Date,S=new Date(f.getFullYear(),f.getMonth(),f.getDate()),r=new Date(f.getTime()-7*24*60*60*1e3),{count:m}=await g.from("transactions").select("*",{count:"exact",head:!0}),{count:C}=await g.from("transactions").select("*",{count:"exact",head:!0}).gte("created_at",S.toISOString()),{count:k}=await g.from("transactions").select("*",{count:"exact",head:!0}).gte("created_at",r.toISOString()),{count:j}=await g.from("budgets").select("*",{count:"exact",head:!0}).eq("status","active"),{count:V}=await g.from("goals").select("*",{count:"exact",head:!0}).eq("status","in_progress"),{count:B}=await g.from("families").select("*",{count:"exact",head:!0}),{data:I}=await g.from("transactions").select("amount").gte("created_at",l.toISOString()),H=I&&I.length>0?(I||[]).reduce((A,D)=>A+Number(D.amount),0)/I.length:0;_({total_transactions:m||0,transactions_today:C||0,transactions_week:k||0,active_budgets:j||0,active_goals:V||0,total_families:B||0,avg_transaction_amount:H})}catch(l){throw console.error("Error in fetchFinancialHealth:",l),l}},c=async()=>{try{const l=new Date,f=new Date(l.getFullYear(),l.getMonth(),l.getDate()),S=new Date(l.getTime()-7*24*60*60*1e3),{data:r}=await g.from("prophet_predictions").select("generated_at, confidence_score"),m=r?.length||0,C=r?.filter(A=>new Date(A.generated_at)>=f).length||0,k=r?.filter(A=>new Date(A.generated_at)>=S).length||0,j=m>0?(r||[]).reduce((A,D)=>A+Number(D.confidence_score),0)/m:0,{data:V}=await g.from("ai_insights").select("generated_at, ai_service"),B=V?.length||0,I=V?.filter(A=>new Date(A.generated_at)>=f).length||0,H={};(V||[]).forEach(A=>{const D=A.ai_service||"unknown";H[D]=(H[D]||0)+1}),U({total_predictions:m,predictions_today:C,predictions_week:k,avg_confidence_score:j,total_insights:B,insights_today:I,ai_service_distribution:H})}catch(l){throw console.error("Error in fetchAIMLAnalytics:",l),l}},u=async()=>{try{const l=new Date,f=new Date(l.getFullYear(),l.getMonth(),l.getDate()),{count:S}=await g.from("chat_sessions").select("*",{count:"exact",head:!0}),{count:r}=await g.from("chat_sessions").select("*",{count:"exact",head:!0}).eq("is_active",!0),{count:m}=await g.from("chat_messages").select("*",{count:"exact",head:!0}),{count:C}=await g.from("chat_messages").select("*",{count:"exact",head:!0}).gte("created_at",f.toISOString()),{data:k}=await g.from("chat_sessions").select("session_type"),j={};(k||[]).forEach(A=>{const D=A.session_type||"general";j[D]=(j[D]||0)+1});const{data:V}=await g.from("chat_messages").select("message_sentiment").not("message_sentiment","is",null),B={};(V||[]).forEach(A=>{const D=A.message_sentiment||"neutral";B[D]=(B[D]||0)+1});const{data:I}=await g.from("chat_sessions").select("user_satisfaction_rating").not("user_satisfaction_rating","is",null),H=I&&I.length>0?(I||[]).reduce((A,D)=>A+Number(D.user_satisfaction_rating),0)/I.length:0;$({total_sessions:S||0,active_sessions:r||0,total_messages:m||0,messages_today:C||0,avg_session_rating:H,session_type_distribution:j,sentiment_distribution:B})}catch(l){throw console.error("Error in fetchChatbotAnalytics:",l),l}},b=()=>{if(!a)return;T.current.length>0&&(T.current.forEach(j=>{g.removeChannel(j)}),T.current=[]);const l=Date.now(),f=g.channel(`admin-system-activity-${l}`).on("postgres_changes",{event:"*",schema:"public",table:"system_activity_log"},()=>{L(),R()}).subscribe(),S=g.channel(`admin-profiles-${l}`).on("postgres_changes",{event:"*",schema:"public",table:"profiles"},()=>{W(),R()}).subscribe(),r=g.channel(`admin-transactions-${l}`).on("postgres_changes",{event:"*",schema:"public",table:"transactions"},()=>{P(),R()}).subscribe(),m=g.channel(`admin-predictions-${l}`).on("postgres_changes",{event:"*",schema:"public",table:"prophet_predictions"},()=>{c()}).subscribe(),C=g.channel(`admin-insights-${l}`).on("postgres_changes",{event:"*",schema:"public",table:"ai_insights"},()=>{c()}).subscribe(),k=g.channel(`admin-chat-${l}`).on("postgres_changes",{event:"*",schema:"public",table:"chat_sessions"},()=>{u()}).subscribe();T.current=[f,S,r,m,C,k]},N=async()=>{if(a){t(!0),w(null);try{await Promise.all([R(),L(),W(),P(),c(),u()])}catch(l){console.error("Error fetching admin reports data:",l),w(l instanceof Error?l.message:"Failed to load admin data"),i("Failed to load admin reports data")}finally{t(!1)}}};return p.useEffect(()=>(N(),b(),()=>{T.current.length>0&&(T.current.forEach(l=>{g.removeChannel(l)}),T.current=[])}),[a,s]),{dashboardSummary:o,systemActivity:y,userEngagement:d,financialHealth:E,aimlAnalytics:M,chatbotAnalytics:z,loading:n,error:x,refreshData:N}},re=s=>{const a={},i={};s.forEach(o=>{a[o.activity_type]||(a[o.activity_type]=0),a[o.activity_type]+=o.count,i[o.activity_date]||(i[o.activity_date]=0),i[o.activity_date]+=o.count});const n=Object.keys(a).map((o,v)=>({name:X(o),y:a[o],color:de(o,v)})),t=s.map(o=>({activity_type:X(o.activity_type),count:o.count,activity_date:new Date(o.activity_date).toLocaleDateString(),severity:o.severity||"info"})),x=Object.values(a).reduce((o,v)=>o+v,0),w=Object.keys(a).reduce((o,v)=>a[o]>a[v]?o:v);return{chartData:n,tableData:t,summaryStats:{totalActivities:x,uniqueActivityTypes:Object.keys(a).length,mostActiveType:X(w),avgDailyActivities:Math.round(x/Object.keys(i).length)}}},le=s=>{const a=[{name:"Total Users",y:s.total_users,color:"#4e73df"},{name:"Active This Week",y:s.active_users_week,color:"#1cc88a"},{name:"Active This Month",y:s.active_users_month,color:"#36b9cc"},{name:"New Users Today",y:s.new_users_today,color:"#f6c23e"}],i=[{metric:"Total Users",value:s.total_users,change:"+"+s.new_users_today+" today"},{metric:"Active Users (Week)",value:s.active_users_week,change:Y(s.active_users_week,s.total_users)+"% of total"},{metric:"Active Users (Month)",value:s.active_users_month,change:Y(s.active_users_month,s.total_users)+"% of total"},{metric:"New Users Today",value:s.new_users_today,change:"New registrations"}],n=Y(s.active_users_week,s.total_users),t=Y(s.active_users_month,s.total_users);return{chartData:a,tableData:i,summaryStats:{totalUsers:s.total_users,activeUserRate:n,monthlyActiveRate:t,newUsersToday:s.new_users_today}}},ie=s=>{const a=[{name:"Total Transactions",y:s.total_transactions,color:"#4e73df"},{name:"Active Budgets",y:s.active_budgets,color:"#1cc88a"},{name:"Active Goals",y:s.active_goals,color:"#36b9cc"},{name:"Total Families",y:s.total_families,color:"#f6c23e"}],i=[{metric:"Total Transactions",value:s.total_transactions,change:"+"+s.transactions_today+" today"},{metric:"Transactions This Week",value:s.transactions_week,change:"weekly activity"},{metric:"Active Budgets",value:s.active_budgets,change:"currently active"},{metric:"Active Goals",value:s.active_goals,change:"in progress"},{metric:"Total Families",value:s.total_families,change:"registered families"},{metric:"Avg Transaction",value:"$"+Number(s.avg_transaction_amount).toFixed(2),change:"system average"}],n=s.total_transactions>0?s.transactions_week/s.total_transactions*100:0;return{chartData:a,tableData:i,summaryStats:{totalTransactions:s.total_transactions,transactionsToday:s.transactions_today,transactionsWeek:s.transactions_week,activeBudgets:s.active_budgets,activeGoals:s.active_goals,totalFamilies:s.total_families,weeklyTransactionRate:Math.round(n*100)/100,avgTransactionAmount:Number(s.avg_transaction_amount)}}},ne=s=>{const a=Object.keys(s.ai_service_distribution).map((t,x)=>({name:t.charAt(0).toUpperCase()+t.slice(1),y:s.ai_service_distribution[t],color:me(t,x)})),i=[{name:"Predictions",y:s.total_predictions,color:"#4e73df"},{name:"AI Insights",y:s.total_insights,color:"#1cc88a"}],n=[{metric:"Total Predictions",value:s.total_predictions,change:"+"+s.predictions_today+" today"},{metric:"Total AI Insights",value:s.total_insights,change:"+"+s.insights_today+" today"},{metric:"Avg Confidence Score",value:(s.avg_confidence_score*100).toFixed(1)+"%",change:"system average"},{metric:"Weekly Predictions",value:s.predictions_week,change:"last 7 days"},{metric:"Active AI Services",value:Object.keys(s.ai_service_distribution).length,change:"service types"}];return{chartData:a.length>0?a:i,tableData:n,summaryStats:{totalPredictions:s.total_predictions,totalInsights:s.total_insights,predictionsToday:s.predictions_today,insightsToday:s.insights_today,avgConfidenceScore:s.avg_confidence_score,activeServices:Object.keys(s.ai_service_distribution).length}}},ce=s=>{const a=Object.keys(s.sentiment_distribution).map((t,x)=>({name:t.charAt(0).toUpperCase()+t.slice(1),y:s.sentiment_distribution[t],color:he(t)})),i=Object.keys(s.session_type_distribution).map((t,x)=>({name:oe(t),y:s.session_type_distribution[t],color:xe(t,x)})),n=[{metric:"Total Sessions",value:s.total_sessions,change:"all time"},{metric:"Active Sessions",value:s.active_sessions,change:"currently active"},{metric:"Total Messages",value:s.total_messages,change:"+"+s.messages_today+" today"},{metric:"Messages Today",value:s.messages_today,change:"today's activity"},{metric:"Avg Satisfaction",value:s.avg_session_rating.toFixed(1)+"/5",change:"user rating"}];return{chartData:a.length>0?a:i,tableData:n,summaryStats:{totalSessions:s.total_sessions,activeSessions:s.active_sessions,totalMessages:s.total_messages,messagesToday:s.messages_today,avgSatisfaction:s.avg_session_rating,sessionTypes:Object.keys(s.session_type_distribution).length,sentimentTypes:Object.keys(s.sentiment_distribution).length}}},X=s=>s.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),oe=s=>s.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),Y=(s,a)=>a>0?Math.round(s/a*100):0,de=(s,a)=>{const i=["#e74a3b","#1cc88a","#36b9cc","#f6c23e","#d52a1a","#858796","#5a5c69"];return{login:"#1cc88a",logout:"#36b9cc",transaction_created:"#e74a3b",user_created:"#f6c23e",admin_action:"#d52a1a",error:"#e74a3b",system_event:"#858796"}[s]||i[a%i.length]},me=(s,a)=>{const i=["#e74a3b","#1cc88a","#36b9cc","#f6c23e","#d52a1a"];return i[a%i.length]},he=(s,a)=>({positive:"#1cc88a",negative:"#e74a3b",neutral:"#36b9cc"})[s]||"#e74a3b",xe=(s,a)=>{const i=["#e74a3b","#1cc88a","#36b9cc","#f6c23e","#d52a1a"];return i[a%i.length]},be=(s,a,i)=>{if(!i||!Array.isArray(i)||i.length===0)return null;const n={chart:{type:a==="column"?"column":a,height:350,backgroundColor:"#ffffff",style:{fontFamily:'"Nunito", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif'}},colors:["#e74a3b","#1cc88a","#36b9cc","#f6c23e","#d52a1a","#858796","#5a5c69"],credits:{enabled:!1},title:{text:ge(s),style:{color:"#5a5c69",fontSize:"18px",fontWeight:"700"}},subtitle:{style:{color:"#858796"}},tooltip:{backgroundColor:"#ffffff",borderColor:"#e3e6f0",borderRadius:8,shadow:!0,style:{color:"#5a5c69",fontSize:"13px"},pointFormat:a==="pie"?"{series.name}: <b>{point.y}</b> ({point.percentage:.1f}%)":"{series.name}: <b>{point.y}</b>"},legend:{itemStyle:{color:"#5a5c69",fontSize:"13px",fontWeight:"600"},itemHoverStyle:{color:"#e74a3b"}},accessibility:{enabled:!1}};return a==="pie"?{...n,plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f}%"},showInLegend:!0}},series:[{name:q(s),colorByPoint:!0,data:i}]}:a==="column"?{...n,xAxis:{categories:i.map(t=>t.name),title:{text:null},labels:{style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}},lineColor:"#e3e6f0",tickColor:"#e3e6f0"},yAxis:{title:{text:G(s),style:{color:"#5a5c69",fontSize:"13px",fontWeight:"600"}},labels:{style:{color:"#5a5c69",fontSize:"12px"}},gridLineColor:"#e3e6f0"},plotOptions:{column:{borderWidth:0,dataLabels:{enabled:!0,style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}}}},series:[{name:q(s),data:i.map(t=>({name:t.name,y:t.y,color:t.color}))}]}:a==="line"?{...n,chart:{...n.chart,type:"line"},xAxis:{categories:i.map(t=>t.name),title:{text:null},labels:{style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}},lineColor:"#e3e6f0",tickColor:"#e3e6f0"},yAxis:{title:{text:G(s),style:{color:"#5a5c69",fontSize:"13px",fontWeight:"600"}},labels:{style:{color:"#5a5c69",fontSize:"12px"}},gridLineColor:"#e3e6f0"},plotOptions:{line:{dataLabels:{enabled:!0,style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}},enableMouseTracking:!0,marker:{enabled:!0,radius:4,lineWidth:2,lineColor:"#ffffff"}}},series:[{name:q(s),data:i.map(t=>({name:t.name,y:t.y,color:t.color})),color:"#e74a3b"}]}:a==="area"?{...n,chart:{...n.chart,type:"area"},xAxis:{categories:i.map(t=>t.name),title:{text:null},labels:{style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}},lineColor:"#e3e6f0",tickColor:"#e3e6f0"},yAxis:{title:{text:G(s),style:{color:"#5a5c69",fontSize:"13px",fontWeight:"600"}},labels:{style:{color:"#5a5c69",fontSize:"12px"}},gridLineColor:"#e3e6f0"},plotOptions:{area:{fillOpacity:.7,dataLabels:{enabled:!0,style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}},enableMouseTracking:!0,marker:{enabled:!0,radius:4,lineWidth:2,lineColor:"#ffffff"}}},series:[{name:q(s),data:i.map(t=>({name:t.name,y:t.y})),color:"#e74a3b",fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"rgba(231, 74, 59, 0.8)"],[1,"rgba(231, 74, 59, 0.1)"]]}}]}:{...n,chart:{...n.chart,type:"column"},xAxis:{categories:i.map(t=>t.name),title:{text:null},labels:{style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}},lineColor:"#e3e6f0",tickColor:"#e3e6f0"},yAxis:{title:{text:G(s),style:{color:"#5a5c69",fontSize:"13px",fontWeight:"600"}},labels:{style:{color:"#5a5c69",fontSize:"12px"}},gridLineColor:"#e3e6f0"},plotOptions:{column:{borderWidth:0,dataLabels:{enabled:!0,style:{color:"#5a5c69",fontSize:"12px",fontWeight:"600"}}}},series:[{name:q(s),data:i.map(t=>({name:t.name,y:t.y,color:t.color}))}]}},ge=s=>({"system-activity":"System Activity Distribution","user-engagement":"User Engagement Overview","financial-health":"Financial System Health","aiml-analytics":"AI/ML Service Usage","chatbot-analytics":"Chatbot Analytics"})[s]||"Admin Analytics",q=s=>({"system-activity":"Activities","user-engagement":"Users","financial-health":"Amount","aiml-analytics":"Requests","chatbot-analytics":"Messages"})[s]||"Data",G=s=>({"system-activity":"Count","user-engagement":"Number of Users","financial-health":"Amount ($)","aiml-analytics":"Number of Requests","chatbot-analytics":"Count"})[s]||"Value",Z=({dashboardSummary:s,loading:a=!1})=>{const i=t=>t==null||isNaN(t)?"0":t.toLocaleString();if(a)return e.jsxs("div",{className:"stats-cards-container mb-5",children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Array.from({length:4}).map((t,x)=>e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-gray-200 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-16 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-12 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-20"})]},x))})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"row",children:Array.from({length:4}).map((t,x)=>e.jsx("div",{className:"col-xl-3 col-md-6 mb-4",children:e.jsxs("div",{className:"admin-stat-card",children:[e.jsx("div",{className:"card-bg-pattern"}),e.jsx("div",{className:"card-content p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"skeleton-line skeleton-title mb-2"}),e.jsx("div",{className:"skeleton-line skeleton-value mb-1"}),e.jsx("div",{className:"skeleton-line skeleton-change"})]}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"skeleton-icon"})})]})}),e.jsxs("div",{className:"card-footer d-flex align-items-center justify-content-between",children:[e.jsx("div",{className:"skeleton-line skeleton-footer"}),e.jsx("div",{className:"skeleton-line",style:{width:"20px",height:"12px"}})]})]})},x))})})]});if(!s)return e.jsxs("div",{className:"stats-cards-container mb-5",children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mx-auto mb-2",children:e.jsx("i",{className:"fas fa-info-circle text-blue-500 text-sm"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"No dashboard summary data available"})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"alert alert-info text-center",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"No dashboard summary data available"]})})]});const n=[{title:"Total Users",value:i(s?.total_users),change:(s?.new_users_today||0)>0?`+${s?.new_users_today} today`:"No new users today",changeType:(s?.new_users_today||0)>0?"positive":"neutral",icon:"fas fa-users",colorClass:"admin-stat-card-primary",footerText:"View All Users",footerLink:"/admin/users",footerBg:"bg-primary",mobileIconBg:"bg-red-100",mobileIconColor:"text-red-500",mobileChangeColor:"text-gray-400"},{title:"Transactions Today",value:i(s?.transactions_today),change:(s?.transactions_today||0)>0?`${s?.transactions_today} transactions`:"No transactions today",changeType:(s?.transactions_today||0)>0?"positive":"neutral",icon:"fas fa-exchange-alt",colorClass:"admin-stat-card-success",footerText:"View Transactions",footerLink:"/admin/transactions",footerBg:"bg-success",mobileIconBg:"bg-emerald-100",mobileIconColor:"text-emerald-500",mobileChangeColor:"text-emerald-500"},{title:"Active Budgets",value:i(s?.active_budgets),change:(s?.active_budgets||0)>0?`${s?.active_budgets} active budgets`:"No active budgets",changeType:(s?.active_budgets||0)>0?"positive":"neutral",icon:"fas fa-wallet",colorClass:"admin-stat-card-info",footerText:"View Budgets",footerLink:"/admin/budgets",footerBg:"bg-info",mobileIconBg:"bg-blue-100",mobileIconColor:"text-blue-500",mobileChangeColor:"text-blue-500"},{title:"AI Predictions",value:i(s?.predictions_today),change:(s?.predictions_today||0)>5?"High activity":"Normal activity",changeType:(s?.predictions_today||0)>5?"positive":"neutral",icon:"fas fa-brain",colorClass:"admin-stat-card-warning",footerText:"View Predictions",footerLink:"/admin/predictions",footerBg:"bg-warning",mobileIconBg:"bg-amber-100",mobileIconColor:"text-amber-500",mobileChangeColor:"text-amber-500"}];return e.jsxs("div",{className:"stats-cards-container mb-5",children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map((t,x)=>e.jsxs("a",{href:t.footerLink,className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 block no-underline hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`w-7 h-7 rounded-lg ${t.mobileIconBg} flex items-center justify-center mb-2`,children:e.jsx("i",{className:`${t.icon} ${t.mobileIconColor} text-xs`})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:t.title}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:t.value}),e.jsxs("div",{className:`flex items-center gap-1 mt-1 ${t.changeType==="positive"?t.mobileChangeColor:"text-gray-400"}`,children:[e.jsx("i",{className:`fas ${t.changeType==="positive"?"fa-arrow-up":"fa-minus"} text-[8px]`}),e.jsx("span",{className:"text-[9px] font-medium truncate",children:t.change})]})]},x))})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"row",children:n.map((t,x)=>e.jsx("div",{className:"col-xl-3 col-md-6 mb-4",children:e.jsxs("div",{className:`admin-stat-card ${t.colorClass}`,children:[e.jsx("div",{className:"card-hover-overlay"}),e.jsx("div",{className:"card-bg-pattern"}),e.jsx("div",{className:"card-content p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:`stat-title text-${t.colorClass.split("-")[3]} font-weight-bold text-uppercase mb-1`,children:t.title}),e.jsx("div",{className:"stat-value text-gray-800 font-weight-bold",children:t.value}),e.jsxs("div",{className:`stat-change small ${t.changeType==="positive"?"text-success":"text-muted"}`,children:[e.jsx("i",{className:`fas ${t.changeType==="positive"?"fa-arrow-up":"fa-minus"} mr-1`}),t.change]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:`stat-icon-container stat-icon-${t.colorClass.split("-")[3]}`,children:e.jsx("i",{className:`${t.icon} stat-icon`})})})]})}),e.jsxs("a",{href:t.footerLink,className:`card-footer-link ${t.footerBg} d-flex align-items-center justify-content-between text-white`,children:[e.jsx("span",{className:"font-weight-600",children:t.footerText}),e.jsx("span",{className:"footer-arrow",children:e.jsx("i",{className:"fas fa-angle-right"})})]})]})},x))})})]})},K=({chartData:s,chartOptions:a,loading:i=!1,selectedReportType:n,chartType:t,onChartTypeChange:x})=>{const[w,o]=p.useState(!1),y={"system-activity":{title:"System Activity Analytics",description:"Monitor system events, user activities, and performance metrics",icon:"fas fa-server"},"user-engagement":{title:"User Engagement Analytics",description:"Track user growth, engagement patterns, and retention metrics",icon:"fas fa-users"},"financial-health":{title:"Financial Health Overview",description:"Analyze financial performance, revenue trends, and system health",icon:"fas fa-chart-line"},"aiml-analytics":{title:"AI/ML Analytics Dashboard",description:"Monitor AI prediction accuracy, model performance, and usage patterns",icon:"fas fa-brain"},"chatbot-analytics":{title:"Chatbot Performance Analytics",description:"Track chatbot interactions, satisfaction rates, and conversation metrics",icon:"fas fa-robot"}}[n]||{title:"Analytics Dashboard",description:"System analytics and reporting",icon:"fas fa-chart-bar"};return i?e.jsxs("div",{className:"dashboard-section charts-section",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 animate-pulse mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-7 h-7 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"w-7 h-7 bg-gray-200 rounded-lg"})]})]}),e.jsx("div",{className:"h-48 bg-gray-100 rounded-lg"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-10 bg-gray-100 rounded-lg"}),e.jsx("div",{className:"h-10 bg-gray-100 rounded-lg"}),e.jsx("div",{className:"h-10 bg-gray-100 rounded-lg"})]})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsx("div",{className:"skeleton-line skeleton-section-title mb-2"}),e.jsx("div",{className:"skeleton-line skeleton-chart-title"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8",children:e.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{className:"skeleton-line skeleton-chart-title"}),e.jsx("div",{className:"d-flex gap-2",children:Array.from({length:4}).map((h,d)=>e.jsx("div",{className:"skeleton-button"},d))})]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"skeleton-chart"})})]})}),e.jsx("div",{className:"col-lg-4",children:e.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsx("div",{className:"skeleton-line skeleton-chart-title"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"skeleton-chart",style:{height:"200px"}})})]})})]})]})]}):e.jsxs("div",{className:"dashboard-section charts-section",children:[e.jsxs("div",{className:"block md:hidden mb-3",children:[e.jsxs("h6",{className:"text-sm font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:`${y.icon} text-red-500 text-xs`}),y.title]}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:y.description})]}),e.jsxs("div",{className:"block md:hidden",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-4 overflow-hidden",children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h6",{className:"text-[11px] font-bold text-gray-800 flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-chart-bar text-red-500 text-[10px]"}),"Analytics View"]}),e.jsx("div",{className:"flex items-center gap-1",children:[{type:"pie",icon:"fas fa-chart-pie"},{type:"column",icon:"fas fa-chart-bar"},{type:"line",icon:"fas fa-chart-line"},{type:"area",icon:"fas fa-chart-area"}].map(h=>e.jsx("button",{className:`w-7 h-7 rounded-lg flex items-center justify-center transition-all ${t===h.type?"bg-red-500 text-white shadow-md":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,onClick:()=>x(h.type),"aria-label":`${h.type} chart`,children:e.jsx("i",{className:`${h.icon} text-[10px]`})},h.type))})]}),e.jsx("div",{className:"p-3",children:a&&typeof a=="object"&&a!==null&&Object.keys(a).length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"chart-container",style:{minHeight:"220px"},children:e.jsx(Q,{highcharts:J,options:{...a,chart:{...a.chart,height:220}},allowChartUpdate:!0,immutable:!1,updateArgs:[!0,!0,!0],containerProps:{style:{height:"220px",width:"100%"}}},`mobile-${n}-${t}`)}),e.jsxs("button",{onClick:()=>o(!0),className:"w-full mt-3 py-2.5 bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white text-xs font-semibold rounded-lg shadow-md transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-expand-arrows-alt text-[10px]"}),"View Full Chart"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-gray-100 flex items-center justify-center mb-3",children:e.jsx("i",{className:"fas fa-chart-bar text-gray-400 text-lg"})}),e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"No Chart Data"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Data is unavailable or loading"})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100",children:e.jsxs("h6",{className:"text-[11px] font-bold text-gray-800 flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-info-circle text-red-500 text-[10px]"}),"Quick Stats"]})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-[10px] text-gray-500",children:"Report Type"}),e.jsx("span",{className:"text-[10px] font-semibold text-gray-800",children:n.split("-").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ")})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-[10px] text-gray-500",children:"Chart Format"}),e.jsx("span",{className:"text-[10px] font-semibold text-gray-800",children:t.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-[10px] text-gray-500",children:"Data Points"}),e.jsx("span",{className:"text-[10px] font-semibold text-gray-800",children:Array.isArray(s)?s.length:Object.keys(s||{}).length})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-[10px] text-gray-500",children:"Status"}),e.jsxs("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-600 text-[9px] font-semibold rounded-full",children:[e.jsx("i",{className:"fas fa-check mr-1 text-[8px]"}),"Active"]})]})]})]})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"section-header mb-4",children:[e.jsxs("h5",{className:"section-title text-gray-800 font-weight-bold mb-1 d-flex align-items-center",children:[e.jsx("div",{className:"header-icon-container mr-3",style:{width:"2.5rem",height:"2.5rem"},children:e.jsx("i",{className:y.icon})}),y.title]}),e.jsx("p",{className:"section-subtitle text-muted mb-0",children:y.description})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8",children:e.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("h6",{className:"card-title mb-0 font-weight-bold text-gray-800",children:[e.jsx("i",{className:"fas fa-chart-bar mr-2 text-primary"}),"Primary Analytics View"]}),e.jsx("div",{className:"chart-type-controls d-flex gap-2",children:[{type:"pie",icon:"fas fa-chart-pie",label:"Pie"},{type:"column",icon:"fas fa-chart-bar",label:"Column"},{type:"line",icon:"fas fa-chart-line",label:"Line"},{type:"area",icon:"fas fa-chart-area",label:"Area"}].map(h=>e.jsxs("button",{className:`btn btn-sm ${t===h.type?"btn-primary":"btn-outline-primary"} d-flex align-items-center`,onClick:()=>x(h.type),title:`Switch to ${h.label} Chart`,children:[e.jsx("i",{className:`${h.icon} ${t===h.type?"":"mr-1"}`}),e.jsx("span",{className:"d-none d-md-inline ml-1",children:h.label})]},h.type))})]})}),e.jsx("div",{className:"card-body p-4",children:a&&typeof a=="object"&&a!==null&&Object.keys(a).length>0?e.jsx("div",{className:"chart-container",style:{minHeight:"350px"},children:e.jsx(Q,{highcharts:J,options:a,allowChartUpdate:!0,immutable:!1,updateArgs:[!0,!0,!0],containerProps:{style:{height:"350px",width:"100%"}}},`${n}-${t}`)}):e.jsxs("div",{className:"no-data-container text-center py-5",children:[e.jsx("div",{className:"no-data-icon mb-3",children:e.jsx("i",{className:"fas fa-chart-bar fa-3x text-muted"})}),e.jsx("h6",{className:"text-muted mb-2",children:"No Chart Data Available"}),e.jsx("p",{className:"text-muted small mb-0",children:"Data for the selected report type is currently unavailable or still loading."})]})})]})}),e.jsxs("div",{className:"col-lg-4",children:[e.jsxs("div",{className:"card border-0 shadow-sm mb-4",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("h6",{className:"card-title mb-0 font-weight-bold text-gray-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2 text-info"}),"Chart Insights"]})}),e.jsx("div",{className:"card-body p-4",children:s&&(Array.isArray(s)?s.length>0:Object.keys(s).length>0)?e.jsxs("div",{className:"insights-container",children:[e.jsxs("div",{className:"insight-item mb-3 p-3 bg-light rounded",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"insight-icon mr-2",children:e.jsx("i",{className:"fas fa-database text-primary"})}),e.jsx("h6",{className:"mb-0 font-weight-bold",children:"Data Points"})]}),e.jsxs("p",{className:"small text-muted mb-0",children:[Array.isArray(s)?s.length:Object.keys(s||{}).length," data entries loaded"]})]}),e.jsxs("div",{className:"insight-item mb-3 p-3 bg-light rounded",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"insight-icon mr-2",children:e.jsx("i",{className:"fas fa-chart-line text-success"})}),e.jsx("h6",{className:"mb-0 font-weight-bold",children:"Chart Type"})]}),e.jsxs("p",{className:"small text-muted mb-0",children:["Currently displaying as ",t.toUpperCase()," chart"]})]}),e.jsxs("div",{className:"insight-item mb-3 p-3 bg-light rounded",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"insight-icon mr-2",children:e.jsx("i",{className:"fas fa-clock text-warning"})}),e.jsx("h6",{className:"mb-0 font-weight-bold",children:"Last Updated"})]}),e.jsx("p",{className:"small text-muted mb-0",children:new Date().toLocaleTimeString()})]}),e.jsxs("div",{className:"chart-actions mt-4",children:[e.jsxs("button",{className:"btn btn-outline-primary btn-sm btn-block mb-2",children:[e.jsx("i",{className:"fas fa-download mr-2"}),"Export Chart"]}),e.jsxs("button",{className:"btn btn-outline-secondary btn-sm btn-block",children:[e.jsx("i",{className:"fas fa-expand-arrows-alt mr-2"}),"Full Screen"]})]})]}):e.jsxs("div",{className:"no-insights text-center py-4",children:[e.jsx("i",{className:"fas fa-info-circle fa-2x text-muted mb-3"}),e.jsx("h6",{className:"text-muted mb-2",children:"No Insights Available"}),e.jsx("p",{className:"text-muted small mb-0",children:"Chart insights will appear here once data is loaded."})]})})]}),e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("h6",{className:"card-title mb-0 font-weight-bold text-gray-800",children:[e.jsx("i",{className:"fas fa-tachometer-alt mr-2 text-success"}),"Quick Stats"]})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-item d-flex justify-content-between align-items-center py-2 border-bottom",children:[e.jsx("span",{className:"stat-label text-muted small",children:"Report Type"}),e.jsx("span",{className:"stat-value font-weight-bold text-gray-800 small",children:n.replace("-"," ").toUpperCase()})]}),e.jsxs("div",{className:"stat-item d-flex justify-content-between align-items-center py-2 border-bottom",children:[e.jsx("span",{className:"stat-label text-muted small",children:"Chart Format"}),e.jsx("span",{className:"stat-value font-weight-bold text-gray-800 small",children:t.toUpperCase()})]}),e.jsxs("div",{className:"stat-item d-flex justify-content-between align-items-center py-2 border-bottom",children:[e.jsx("span",{className:"stat-label text-muted small",children:"Data Status"}),e.jsxs("span",{className:"badge badge-success badge-sm",children:[e.jsx("i",{className:"fas fa-check mr-1"}),"Active"]})]}),e.jsxs("div",{className:"stat-item d-flex justify-content-between align-items-center py-2",children:[e.jsx("span",{className:"stat-label text-muted small",children:"Auto Refresh"}),e.jsxs("span",{className:"badge badge-info badge-sm",children:[e.jsx("i",{className:"fas fa-sync mr-1"}),"5 min"]})]})]})})]})]})]})]}),w&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/90 flex flex-col md:hidden animate__animated animate__fadeIn animate__faster",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-red-500 to-rose-500 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`${y.icon} text-white text-xs`}),e.jsx("h6",{className:"text-white text-xs font-bold truncate max-w-[200px]",children:y.title})]}),e.jsx("button",{onClick:()=>o(!1),className:"w-7 h-7 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-all active:scale-95","aria-label":"Close fullscreen",children:e.jsx("i",{className:"fas fa-times text-white text-xs"})})]}),e.jsx("div",{className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-gray-900 flex-shrink-0",children:[{type:"pie",icon:"fas fa-chart-pie",label:"Pie"},{type:"column",icon:"fas fa-chart-bar",label:"Column"},{type:"line",icon:"fas fa-chart-line",label:"Line"},{type:"area",icon:"fas fa-chart-area",label:"Area"}].map(h=>e.jsxs("button",{className:`px-2.5 py-1.5 rounded-lg flex items-center gap-1 transition-all ${t===h.type?"bg-red-500 text-white shadow-lg":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,onClick:()=>x(h.type),children:[e.jsx("i",{className:`${h.icon} text-[10px]`}),e.jsx("span",{className:"text-[10px] font-medium",children:h.label})]},h.type))}),e.jsx("div",{className:"flex-1 flex items-center justify-center bg-white overflow-hidden",children:a&&typeof a=="object"&&a!==null&&Object.keys(a).length>0?e.jsx("div",{className:"w-full h-full max-h-full flex items-center justify-center p-2",children:e.jsx(Q,{highcharts:J,options:{...a,chart:{...a.chart,height:350,backgroundColor:"#ffffff",spacing:[10,10,15,10]},title:{...a.title,style:{fontSize:"14px",fontWeight:"bold"}}},allowChartUpdate:!0,immutable:!1,updateArgs:[!0,!0,!0],containerProps:{style:{width:"100%",maxWidth:"100%"}}},`fullscreen-${n}-${t}`)}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-gray-100 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-chart-bar text-gray-400 text-2xl"})}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"No Chart Data Available"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Data is unavailable or still loading"})]})})}),e.jsx("div",{className:"px-4 py-2 bg-gray-900 border-t border-gray-800 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[9px] text-gray-500 uppercase",children:"Type"}),e.jsx("p",{className:"text-xs text-white font-semibold",children:t})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[9px] text-gray-500 uppercase",children:"Points"}),e.jsx("p",{className:"text-xs text-white font-semibold",children:Array.isArray(s)?s.length:Object.keys(s||{}).length})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[9px] text-gray-500 uppercase",children:"Status"}),e.jsx("p",{className:"text-xs text-emerald-400 font-semibold",children:"Active"})]})]}),e.jsxs("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-xs font-semibold rounded-lg transition-all active:scale-95",children:[e.jsx("i",{className:"fas fa-compress-arrows-alt mr-1.5 text-[10px]"}),"Close"]})]})})]})]})},ue=({data:s=[],columns:a=[],loading:i=!1,title:n="Data Table",searchable:t=!0,pagination:x=!0,itemsPerPage:w=10,onRowClick:o})=>{const[v,y]=p.useState(""),[h,d]=p.useState(null),[O,E]=p.useState("asc"),[_,M]=p.useState(1),U=(s||[]).filter(c=>Object.values(c||{}).some(u=>String(u||"").toLowerCase().includes(v.toLowerCase()))),z=[...U].sort((c,u)=>{if(!h)return 0;const b=c[h],N=u[h];return b<N?O==="asc"?-1:1:b>N?O==="asc"?1:-1:0}),$=Math.ceil(z.length/w),T=(_-1)*w,F=x?z.slice(T,T+w):z,R=c=>{a.find(b=>b.key===c)?.sortable&&(h===c?E(O==="asc"?"desc":"asc"):(d(c),E("asc")))},L=c=>{M(c)},W=()=>{if(!x||$<=1)return null;const c=[],u=5;let b=Math.max(1,_-Math.floor(u/2)),N=Math.min($,b+u-1);N-b<u-1&&(b=Math.max(1,N-u+1));for(let l=b;l<=N;l++)c.push(l);return e.jsx("nav",{"aria-label":"Table pagination",children:e.jsxs("ul",{className:"pagination mb-0",children:[e.jsx("li",{className:`page-item ${_===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>L(_-1),disabled:_===1,children:e.jsx("i",{className:"fas fa-chevron-left"})})}),b>1&&e.jsxs(e.Fragment,{children:[e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>L(1),children:"1"})}),b>2&&e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"..."})})]}),c.map(l=>e.jsx("li",{className:`page-item ${_===l?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>L(l),children:l})},l)),N<$&&e.jsxs(e.Fragment,{children:[N<$-1&&e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"..."})}),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>L($),children:$})})]}),e.jsx("li",{className:`page-item ${_===$?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>L(_+1),disabled:_===$,children:e.jsx("i",{className:"fas fa-chevron-right"})})})]})})},P=()=>!x||$<=1?null:e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-50 rounded-lg",children:[e.jsx("button",{onClick:()=>L(_-1),disabled:_===1,className:"w-8 h-8 rounded-lg bg-white border border-gray-200 flex items-center justify-center text-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("i",{className:"fas fa-chevron-left text-[10px]"})}),e.jsxs("span",{className:"text-[10px] text-gray-600",children:["Page ",e.jsx("span",{className:"font-semibold text-gray-800",children:_})," of ",e.jsx("span",{className:"font-semibold text-gray-800",children:$})]}),e.jsx("button",{onClick:()=>L(_+1),disabled:_===$,className:"w-8 h-8 rounded-lg bg-white border border-gray-200 flex items-center justify-center text-gray-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("i",{className:"fas fa-chevron-right text-[10px]"})})]});return i?e.jsxs("div",{className:"table-section",children:[e.jsx("div",{className:"block md:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"px-3 py-2.5 border-b border-gray-100 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32"})]})}),e.jsx("div",{className:"p-3 space-y-2",children:Array.from({length:5}).map((c,u)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]},u))})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{className:"skeleton-line skeleton-table-header"}),e.jsx("div",{className:"skeleton-line",style:{width:"200px",height:"38px"}})]})}),e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"modern-table table table-hover mb-0",children:[e.jsx("thead",{className:"table-header",children:e.jsx("tr",{children:Array.from({length:5}).map((c,u)=>e.jsx("th",{className:"border-0 py-3 px-4",children:e.jsx("div",{className:"skeleton-line skeleton-th"})},u))})}),e.jsx("tbody",{children:Array.from({length:8}).map((c,u)=>e.jsx("tr",{className:"table-row",children:Array.from({length:5}).map((b,N)=>e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"skeleton-line skeleton-td"})},N))},u))})]})})}),e.jsx("div",{className:"card-footer bg-white border-0 py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{className:"skeleton-line",style:{width:"150px",height:"14px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"200px",height:"32px"}})]})})]})})]}):e.jsxs("div",{className:"table-section",children:[e.jsx("div",{className:"block md:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h6",{className:"text-[11px] font-bold text-gray-800 flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-table text-red-500 text-[10px]"}),n]}),e.jsxs("span",{className:"text-[9px] text-gray-400",children:[U.length," entries"]})]}),t&&e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full h-8 pl-8 pr-3 text-xs bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Search data...",value:v,onChange:c=>y(c.target.value)}),e.jsx("i",{className:"fas fa-search absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400 text-[10px]"})]})]}),e.jsx("div",{className:"p-3",children:U.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 mx-auto rounded-full bg-gray-100 flex items-center justify-center mb-3",children:e.jsx("i",{className:"fas fa-table text-gray-400 text-lg"})}),e.jsx("p",{className:"text-xs font-medium text-gray-600",children:"No Data Available"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:v?"No results match your search.":"No data to display."})]}):e.jsx("div",{className:"space-y-2",children:F.map((c,u)=>e.jsx("div",{className:`bg-gray-50 rounded-lg p-3 ${o?"cursor-pointer hover:bg-gray-100 active:bg-gray-200":""} transition-colors`,onClick:()=>o&&o(c),children:a.map((b,N)=>e.jsxs("div",{className:`flex items-center justify-between ${N<a.length-1?"mb-1.5":""}`,children:[e.jsx("span",{className:"text-[9px] text-gray-500 font-medium uppercase",children:b.label}),e.jsx("span",{className:"text-[10px] font-semibold text-gray-800 text-right max-w-[60%] truncate",children:b.render?b.render(c?.[b.key],c):String(c?.[b.key]||"-")})]},b.key))},u))})}),U.length>0&&e.jsxs("div",{className:"px-3 pb-3",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsxs("span",{className:"text-[9px] text-gray-400",children:[T+1,"-",Math.min(T+w,U.length)," of ",U.length]})}),P()]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("h6",{className:"card-title mb-0 font-weight-bold text-gray-800",children:[e.jsx("i",{className:"fas fa-table mr-2 text-primary"}),n]}),t&&e.jsx("div",{className:"search-container",style:{minWidth:"250px"},children:e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text border-right-0 bg-white",children:e.jsx("i",{className:"fas fa-search text-muted"})})}),e.jsx("input",{type:"text",className:"form-control border-left-0 modern-input",placeholder:"Search data...",value:v,onChange:c=>y(c.target.value)})]})})]})}),e.jsx("div",{className:"card-body p-0",children:U.length===0?e.jsxs("div",{className:"no-data-container text-center py-5",children:[e.jsx("div",{className:"no-data-icon mb-3",children:e.jsx("i",{className:"fas fa-table fa-3x text-muted"})}),e.jsx("h6",{className:"text-muted mb-2",children:"No Data Available"}),e.jsx("p",{className:"text-muted small mb-0",children:v?"No results match your search criteria.":"No data to display for this report."})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"modern-table table table-hover mb-0",children:[e.jsx("thead",{className:"table-header",children:e.jsx("tr",{children:a.map(c=>e.jsx("th",{className:`border-0 py-3 px-4 ${c.sortable?"sortable-header":""}`,onClick:()=>c.sortable&&R(c.key),style:{cursor:c.sortable?"pointer":"default"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsx("span",{className:"header-text",children:c.label}),c.sortable&&e.jsx("div",{className:"sort-icons ml-2",children:h===c.key?e.jsx("i",{className:`fas fa-sort-${O==="asc"?"up":"down"} text-primary`}):e.jsx("i",{className:"fas fa-sort text-muted"})})]})},c.key))})}),e.jsx("tbody",{children:F.map((c,u)=>e.jsx("tr",{className:`table-row ${o?"clickable-row":""}`,onClick:()=>o&&o(c),style:{cursor:o?"pointer":"default"},children:a.map(b=>e.jsx("td",{className:"py-3 px-4",children:b.render?b.render(c?.[b.key],c):String(c?.[b.key]||"-")},b.key))},u))})]})})}),x&&U.length>0&&e.jsx("div",{className:"card-footer bg-white border-0 py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("div",{className:"table-info text-muted small",children:["Showing ",T+1," to ",Math.min(T+w,U.length)," of ",U.length," entries",v&&` (filtered from ${s.length} total entries)`]}),W()]})})]})})]})},ee=({selectedReportType:s,onReportTypeChange:a,timeframe:i,onTimeframeChange:n,format:t,onFormatChange:x,loading:w=!1,onRefresh:o,onExport:v})=>{const y=[{value:"system-activity",label:"System Activity",description:"System events and user activity tracking",icon:"fas fa-server"},{value:"user-engagement",label:"User Engagement",description:"User growth and engagement metrics",icon:"fas fa-users"},{value:"financial-health",label:"Financial Health",description:"Overall financial system performance",icon:"fas fa-chart-line"},{value:"aiml-analytics",label:"AI/ML Analytics",description:"AI predictions and insights usage",icon:"fas fa-brain"},{value:"chatbot-analytics",label:"Chatbot Analytics",description:"Chatbot usage and satisfaction metrics",icon:"fas fa-robot"}],h=[{value:"day",label:"Last 24 Hours",icon:"fas fa-clock"},{value:"week",label:"Last 7 Days",icon:"fas fa-calendar-week"},{value:"month",label:"This Month",icon:"fas fa-calendar-alt"},{value:"quarter",label:"This Quarter",icon:"fas fa-calendar"}];return w?e.jsxs("div",{className:"controls-section mb-5",children:[e.jsx("div",{className:"block md:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded-lg flex-1"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-lg flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded-lg"})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"card border-0 shadow-sm",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 mb-3",children:e.jsx("div",{className:"skeleton-line skeleton-filter"})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsx("div",{className:"skeleton-line skeleton-filter"})}),e.jsx("div",{className:"col-md-2 mb-3",children:e.jsx("div",{className:"skeleton-line skeleton-filter"})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("div",{className:"skeleton-button flex-fill"}),e.jsx("div",{className:"skeleton-button flex-fill"})]})})]})})})})]}):e.jsxs("div",{className:"controls-section mb-5",children:[e.jsx("div",{className:"block md:hidden",children:e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-filter text-red-500 text-[10px]"})}),e.jsx("span",{className:"text-xs font-semibold text-gray-800",children:"Filters & Controls"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] text-gray-500 font-medium uppercase mb-1 block",children:"Report Type"}),e.jsx("select",{className:"w-full h-9 px-2 text-xs bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",value:s,onChange:d=>a(d.target.value),children:y.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[9px] text-gray-500 font-medium uppercase mb-1 block",children:"Time Period"}),e.jsx("select",{className:"w-full h-9 px-2 text-xs bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",value:i,onChange:d=>n(d.target.value),children:h.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("label",{className:"text-[9px] text-gray-500 font-medium uppercase mr-2",children:"View:"}),e.jsx("button",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${t==="chart"?"bg-red-500 text-white shadow-md":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,onClick:()=>x("chart"),"aria-label":"Chart view",children:e.jsx("i",{className:"fas fa-chart-pie text-xs"})}),e.jsx("button",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${t==="table"?"bg-red-500 text-white shadow-md":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,onClick:()=>x("table"),"aria-label":"Table view",children:e.jsx("i",{className:"fas fa-table text-xs"})})]}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-gray-50 rounded-lg",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 text-[9px]"}),e.jsx("span",{className:"text-[9px] text-gray-500",children:y.find(d=>d.value===s)?.label})]})]})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("h6",{className:"card-title mb-0 font-weight-bold text-gray-800",children:[e.jsx("i",{className:"fas fa-filter mr-2 text-primary"}),"Report Controls & Filters"]})}),e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"row align-items-end",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label font-weight-600 text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-chart-bar mr-2"}),"Report Type"]}),e.jsx("select",{className:"form-control modern-select",value:s,onChange:d=>a(d.target.value),children:y.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))}),e.jsx("small",{className:"text-muted mt-1 d-block",children:y.find(d=>d.value===s)?.description})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsxs("label",{className:"form-label font-weight-600 text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-calendar mr-2"}),"Time Period"]}),e.jsx("select",{className:"form-control modern-select",value:i,onChange:d=>n(d.target.value),children:h.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]}),e.jsxs("div",{className:"col-md-2 mb-3",children:[e.jsxs("label",{className:"form-label font-weight-600 text-gray-700 mb-2",children:[e.jsx("i",{className:"fas fa-eye mr-2"}),"Display"]}),e.jsxs("div",{className:"btn-group d-flex",role:"group",children:[e.jsx("button",{type:"button",className:`btn btn-sm ${t==="chart"?"btn-primary":"btn-outline-primary"}`,onClick:()=>x("chart"),title:"Chart View",children:e.jsx("i",{className:"fas fa-chart-pie"})}),e.jsx("button",{type:"button",className:`btn btn-sm ${t==="table"?"btn-primary":"btn-outline-primary"}`,onClick:()=>x("table"),title:"Table View",children:e.jsx("i",{className:"fas fa-table"})})]})]}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"d-flex gap-2",children:[o&&e.jsxs("button",{className:"btn btn-outline-primary btn-sm flex-fill",onClick:o,disabled:w,children:[e.jsx("i",{className:`fas fa-sync-alt mr-1 ${w?"fa-spin":""}`}),"Refresh"]}),v&&e.jsxs("button",{className:"btn btn-success btn-sm flex-fill",onClick:v,children:[e.jsx("i",{className:"fas fa-download mr-1"}),"Export"]})]})})]}),e.jsx("div",{className:"report-description-card mt-4",children:e.jsx("div",{className:"alert alert-light border-left border-primary mb-0",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("div",{className:"report-icon mr-3 mt-1",children:e.jsx("i",{className:`${y.find(d=>d.value===s)?.icon} text-primary`})}),e.jsxs("div",{className:"flex-fill",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("h6",{className:"mb-0 font-weight-bold text-gray-800",children:y.find(d=>d.value===s)?.label}),e.jsx("span",{className:"badge badge-primary badge-sm ml-2",children:h.find(d=>d.value===i)?.label})]}),e.jsx("p",{className:"text-muted small mb-2",children:y.find(d=>d.value===s)?.description}),e.jsxs("div",{className:"report-metadata",children:[e.jsxs("span",{className:"badge badge-light mr-2",children:[e.jsx("i",{className:"fas fa-eye mr-1"}),t.toUpperCase()," View"]}),e.jsxs("span",{className:"badge badge-light mr-2",children:[e.jsx("i",{className:"fas fa-clock mr-1"}),"Auto-refresh: 5min"]}),e.jsxs("span",{className:"badge badge-light",children:[e.jsx("i",{className:"fas fa-shield-alt mr-1"}),"Real-time"]})]})]})]})})})]})]})})]})},ve=()=>{const{user:s}=se(),{showSuccessToast:a,showErrorToast:i}=te(),[n,t]=p.useState("system-activity"),[x,w]=p.useState("week"),[o,v]=p.useState("pie"),[y,h]=p.useState("chart"),[d,O]=p.useState(new Date),[E,_]=p.useState(!1),[M,U]=p.useState({chartData:[],tableData:[],summaryStats:{}}),[z,$]=p.useState({}),{dashboardSummary:T,systemActivity:F,userEngagement:R,financialHealth:L,aimlAnalytics:W,chatbotAnalytics:P,loading:c,error:u,refreshData:b}=ae(x),N=p.useCallback(async()=>{_(!0);try{await b(),O(new Date),a("Reports data refreshed successfully!")}catch{i("Failed to refresh reports data")}finally{_(!1)}},[b,a,i]),l=p.useCallback(()=>{try{const r={reportType:n,timeframe:x,data:M,exportedAt:new Date().toISOString()},m=JSON.stringify(r,null,2),C=new Blob([m],{type:"application/json"}),k=URL.createObjectURL(C),j=document.createElement("a");j.href=k,j.download=`admin-reports-${n}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(k),a("Report data exported successfully!")}catch{i("Failed to export report data")}},[n,x,M,a,i]);p.useEffect(()=>{f()},[n,F,R,L,W,P,c]),p.useEffect(()=>{if(M.chartData.length>0){const r=be(n,o,M.chartData);$(r)}},[M,o,n]);const f=()=>{if(c)return;let r={chartData:[],tableData:[],summaryStats:{}};try{switch(n){case"system-activity":F&&F.length>0&&(r=re(F));break;case"user-engagement":R&&(r=le(R));break;case"financial-health":L&&(r=ie(L));break;case"aiml-analytics":W&&(r=ne(W));break;case"chatbot-analytics":P&&(r=ce(P));break;default:r={chartData:[],tableData:[],summaryStats:{}}}}catch(m){console.error("Error processing admin data:",m)}U(r)},S=()=>{switch(n){case"system-activity":return[{key:"activity_date",label:"Date",sortable:!0,render:r=>r||"-"},{key:"activity_type",label:"Activity Type",sortable:!0,render:r=>e.jsx("span",{className:"badge badge-primary",children:r||"Unknown"})},{key:"count",label:"Count",sortable:!0,render:r=>{const m=Number(r);return m&&!isNaN(m)?m.toLocaleString():"0"}},{key:"severity",label:"Severity",sortable:!0,render:r=>{const m={info:"badge-info",warning:"badge-warning",error:"badge-danger",critical:"badge-danger"};return e.jsx("span",{className:`badge ${m[r]||"badge-secondary"}`,children:r||"info"})}}];case"user-engagement":return[{key:"metric",label:"Metric",sortable:!0,render:r=>e.jsx("span",{className:"font-weight-bold text-primary",children:r||"-"})},{key:"value",label:"Value",sortable:!0,render:r=>{const m=Number(r);return m&&!isNaN(m)?m.toLocaleString():String(r)||"0"}},{key:"change",label:"Status",sortable:!0,render:r=>e.jsx("span",{className:"text-muted small",children:r||"-"})}];case"financial-health":return[{key:"metric",label:"Financial Metric",sortable:!0,render:r=>e.jsx("span",{className:"font-weight-bold text-success",children:r||"-"})},{key:"value",label:"Value",sortable:!0,render:r=>{if(typeof r=="string"&&r.startsWith("$"))return r;const m=Number(r);return m&&!isNaN(m)?m.toLocaleString():String(r)||"0"}},{key:"change",label:"Details",sortable:!0,render:r=>e.jsx("span",{className:"text-muted small",children:r||"-"})}];case"aiml-analytics":return[{key:"metric",label:"AI/ML Metric",sortable:!0,render:r=>e.jsx("span",{className:"font-weight-bold text-info",children:r||"-"})},{key:"value",label:"Value",sortable:!0,render:r=>{if(typeof r=="string"&&r.includes("%"))return r;const m=Number(r);return m&&!isNaN(m)?m.toLocaleString():String(r)||"0"}},{key:"change",label:"Status",sortable:!0,render:r=>e.jsx("span",{className:"text-muted small",children:r||"-"})}];case"chatbot-analytics":return[{key:"metric",label:"Chatbot Metric",sortable:!0,render:r=>e.jsx("span",{className:"font-weight-bold text-warning",children:r||"-"})},{key:"value",label:"Value",sortable:!0,render:r=>{if(typeof r=="string"&&r.includes("/"))return r;const m=Number(r);return m&&!isNaN(m)?m.toLocaleString():String(r)||"0"}},{key:"change",label:"Details",sortable:!0,render:r=>e.jsx("span",{className:"text-muted small",children:r||"-"})}];default:return[{key:"metric",label:"Metric",sortable:!0},{key:"value",label:"Value",sortable:!0},{key:"change",label:"Status",sortable:!0}]}};return u?e.jsxs("div",{className:"modern-user-management",children:[e.jsx("div",{className:"block md:hidden py-8",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-red-500 text-2xl"})}),e.jsx("h3",{className:"text-base font-bold text-gray-800 mb-2",children:"Error Loading Data"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:u}),e.jsxs("button",{onClick:N,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-xs font-medium rounded-lg transition-all active:scale-95",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"}),"Retry"]})]})}),e.jsxs("div",{className:"hidden md:block text-center mt-5",children:[e.jsx("div",{className:"error mx-auto","data-text":"500",children:"500"}),e.jsx("p",{className:"lead text-gray-800 mb-5",children:"Error Loading Admin Data"}),e.jsx("p",{className:"text-gray-500 mb-0",children:u}),e.jsxs("button",{className:"btn btn-primary mt-3",onClick:N,children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"}),"Retry"]})]})]}):c?e.jsxs("div",{className:"modern-user-management",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading reports & analytics..."})]})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("div",{className:"user-management-header mb-5",children:[e.jsx("div",{className:"skeleton-line skeleton-header-title mb-2"}),e.jsx("div",{className:"skeleton-line skeleton-header-subtitle"})]}),e.jsx(Z,{dashboardSummary:null,loading:!0}),e.jsx(ee,{selectedReportType:n,onReportTypeChange:t,timeframe:x,onTimeframeChange:w,format:y,onFormatChange:h,loading:!0}),e.jsx(K,{chartData:{},chartOptions:{},loading:!0,selectedReportType:n,chartType:o,onChartTypeChange:v})]})]}):e.jsxs("div",{className:"modern-user-management",children:[e.jsx("div",{className:"block md:hidden mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Reports & Analytics"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:N,className:"w-9 h-9 rounded-full bg-red-500 hover:bg-red-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95 disabled:opacity-50",disabled:E,"aria-label":"Refresh data",children:e.jsx("i",{className:`fas fa-sync text-xs ${E?"fa-spin":""}`})}),e.jsx("button",{onClick:l,className:"w-9 h-9 rounded-full bg-rose-600 hover:bg-rose-700 text-white flex items-center justify-center shadow-md transition-all active:scale-95","aria-label":"Export data",children:e.jsx("i",{className:"fas fa-download text-xs"})})]})]})}),e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-red-500 via-rose-500 to-pink-500 rounded-2xl p-4 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Analytics Overview"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chart-line text-white text-sm"})})]}),e.jsx("div",{className:"text-white text-lg font-bold mb-1",children:n.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:"text-white/70 text-xs",children:[e.jsx("i",{className:"fas fa-clock text-[10px] mr-1"}),"Updated: ",d.toLocaleTimeString()]})}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-white/60 text-[9px] uppercase",children:"Period"}),e.jsx("p",{className:"text-white text-sm font-bold",children:x})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-white/60 text-[9px] uppercase",children:"View"}),e.jsx("p",{className:"text-white text-sm font-bold",children:y})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-white/60 text-[9px] uppercase",children:"Type"}),e.jsx("p",{className:"text-white text-sm font-bold",children:o})]})]})]})}),e.jsx("div",{className:"user-management-header mb-5 hidden md:block",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start flex-wrap",children:[e.jsx("div",{className:"header-content",children:e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"header-icon-container mr-3",children:e.jsx("i",{className:"fas fa-chart-line"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"header-title mb-1",children:"Reports & Analytics"}),e.jsx("p",{className:"header-subtitle mb-0",children:"Comprehensive analytics dashboard for system monitoring and business intelligence"})]})]})}),e.jsxs("div",{className:"header-actions d-flex align-items-center",children:[e.jsx("div",{className:"last-updated-info mr-3",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"far fa-clock mr-1"}),"Last updated: ",d.toLocaleTimeString()]})}),e.jsxs("button",{className:"btn btn-outline-danger btn-sm shadow-sm refresh-btn mr-2",onClick:N,disabled:E,children:[e.jsx("i",{className:`fas fa-sync-alt mr-1 ${E?"fa-spin":""}`}),E?"Updating...":"Refresh"]}),e.jsxs("button",{className:"btn btn-danger btn-sm shadow-sm",onClick:l,children:[e.jsx("i",{className:"fas fa-download mr-1"}),"Export Data"]})]})]})}),e.jsx(Z,{dashboardSummary:T,loading:c}),e.jsx(ee,{selectedReportType:n,onReportTypeChange:t,timeframe:x,onTimeframeChange:w,format:y,onFormatChange:h,loading:c,onRefresh:N,onExport:l}),y==="chart"?e.jsx(K,{chartData:M.chartData,chartOptions:z,loading:c,selectedReportType:n,chartType:o,onChartTypeChange:v}):e.jsx(ue,{data:M.tableData,columns:S(),loading:c,title:`${n.replace("-"," ").toUpperCase()} Data`,searchable:!0,pagination:!0,itemsPerPage:25}),u&&e.jsx("div",{className:"alert alert-danger mt-4",role:"alert",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"alert-icon mr-3",children:e.jsx("i",{className:"fas fa-exclamation-triangle fa-2x"})}),e.jsxs("div",{className:"alert-content flex-fill",children:[e.jsx("h5",{className:"alert-heading mb-2",children:"Error Loading Reports Data"}),e.jsx("p",{className:"mb-0",children:u})]})]})}),e.jsx("div",{className:"block md:hidden mt-4 mb-4",children:e.jsx("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-shield-alt text-red-500 text-[10px]"})}),e.jsx("span",{className:"text-[10px] text-gray-500",children:"Admin Reports v2.0"})]}),e.jsx("span",{className:"text-[9px] text-gray-400",children:"Auto-refresh: 5min"})]})})}),e.jsx("div",{className:"dashboard-footer mt-5 pt-4 border-top hidden md:block",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs("p",{className:"text-muted small mb-0",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Data is refreshed automatically every 5 minutes. Use the refresh button for immediate updates."]})}),e.jsx("div",{className:"col-md-4 text-md-right",children:e.jsxs("p",{className:"text-muted small mb-0",children:[e.jsx("i",{className:"fas fa-shield-alt mr-1 text-success"}),"Admin Reports v2.0 | Real-time Analytics"]})})]})})]})};export{ve as default};
