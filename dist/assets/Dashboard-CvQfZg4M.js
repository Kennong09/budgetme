import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{r as i,R as ve,b as Ye,L as ce,u as it}from"./react-vendor-D4A9EtXC.js";import{u as $e,b as ze,s as ie,f as ue,c as we,d as Dt}from"./index-BbApZ7g3.js";import{A as St}from"./types-DTh0EQB9.js";import{A as At}from"./accountService-CFCTGWw4.js";import{T as at}from"./transactionService-B7dXImam.js";import{d as Fe,H as Me}from"./chart-vendor-B0c7K_uV.js";import{E as Tt}from"./enhancedTransactionService-DaGM5j0a.js";/* empty css                       */const ct=i.memo(({userAccounts:t,hasExistingAccounts:s,workflowMode:a,selectedExistingAccount:u,onWorkflowChoice:n,onExistingAccountSelect:o,onContinue:m})=>{const x=i.useCallback(c=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(c),[]),v=i.useCallback(c=>{switch(c){case"checking":return"fas fa-university";case"savings":return"fas fa-piggy-bank";case"credit":return"fas fa-credit-card";case"investment":return"fas fa-chart-line";default:return"fas fa-wallet"}},[]),y=i.useMemo(()=>a==="create_account"||a==="cash_in_existing"&&u,[a,u]);return e.jsxs("div",{className:"space-y-3 md:space-y-6",children:[e.jsxs("div",{className:"text-center mb-4 md:mb-8",children:[e.jsx("h2",{className:"text-lg md:text-2xl font-bold text-gray-800 mb-2 md:mb-4",children:"Welcome! Let's manage your finances"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600",children:s?"You have existing accounts. Would you like to add money to them or create a new account?":"Let's start by creating your first account."})]}),s?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Choose what you'd like to do:"}),e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${a==="cash_in_existing"?"border-green-500 bg-green-50":"border-gray-200 bg-white hover:border-green-300"}`,onClick:()=>n("cash_in_existing"),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a==="cash_in_existing"?"bg-green-100":"bg-gray-100"}`,children:e.jsx("i",{className:`fas fa-money-bill-wave ${a==="cash_in_existing"?"text-green-600":"text-gray-600"}`})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Add Money to Existing Account"}),e.jsx("p",{className:"text-gray-600 text-sm mb-3",children:"Cash in money to one of your existing accounts to start tracking your finances."}),a==="cash_in_existing"&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Select an account:"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:t.map(c=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-all ${u===c.id?"border-green-500 bg-green-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:g=>{g.stopPropagation(),o(c.id)},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:`${v(c.account_type)} text-gray-500`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800",children:c.account_name}),e.jsx("div",{className:"text-sm text-gray-500 capitalize",children:c.account_type})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-gray-800",children:x(c.balance||0)}),c.balance===0&&e.jsx("div",{className:"text-xs text-red-500",children:"Zero Balance"})]})]})},c.id))})]})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${a==="create_account"?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"}`,onClick:()=>n("create_account"),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${a==="create_account"?"bg-blue-100":"bg-gray-100"}`,children:e.jsx("i",{className:`fas fa-plus ${a==="create_account"?"text-blue-600":"text-gray-600"}`})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Create New Account"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Set up a new checking, savings, credit, or investment account."})]})]})})]}):e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"fas fa-plus text-blue-600"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Create Your First Account"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Start your financial journey by creating your first account. You can choose from checking, savings, credit, or investment accounts."}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[e.jsx("i",{className:"fas fa-check-circle"}),e.jsx("span",{children:"Easy setup in just a few steps"})]})]})]})}),e.jsx("div",{className:"hidden md:flex justify-end pt-6 border-t border-gray-200",children:e.jsxs("button",{onClick:m,disabled:!y,className:`px-3 py-2 md:px-6 md:py-3 rounded-lg font-medium transition-all text-sm md:text-base ${y?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[a==="cash_in_existing"?"Cash In Money":"Create Account",e.jsx("i",{className:"fas fa-arrow-right ml-2 text-base"})]})})]})});ct.displayName="WorkflowChoiceStep";const ot=i.memo(({modalState:t,onAccountTypeChoice:s})=>{const[a,u]=ve.useState(null),[n,o]=ve.useState("beginner"),[m,x]=ve.useState(""),v=i.useMemo(()=>[{type:"checking",title:"Checking Account",icon:"fas fa-university",description:"For daily transactions, bill payments, and regular expenses",features:["Easy access to funds","Debit card included","Online banking","Check writing"],recommended:["Daily expenses","Bill payments","Salary deposits","ATM access"],color:"bg-blue-50 border-blue-200"},{type:"savings",title:"Savings Account",icon:"fas fa-piggy-bank",description:"For building emergency funds and earning interest on deposits",features:["Higher interest rates","Limited transactions","FDIC insured","Goal tracking"],recommended:["Emergency fund","Short-term goals","Interest earning","Future planning"],color:"bg-green-50 border-green-200"},{type:"credit",title:"Credit Card",icon:"fas fa-credit-card",description:"For credit purchases and building credit history",features:["Credit building","Rewards programs","Purchase protection","Emergency credit"],recommended:["Building credit","Large purchases","Rewards earning","Online shopping"],color:"bg-purple-50 border-purple-200"},{type:"investment",title:"Investment",icon:"fas fa-chart-line",description:"For stocks, bonds, mutual funds, and long-term wealth building",features:["Portfolio management","Growth potential","Dividend income","Tax advantages"],recommended:["Long-term growth","Passive income","Retirement planning","Wealth building"],color:"bg-indigo-50 border-indigo-200"},{type:"cash",title:"Cash Wallet",icon:"fas fa-money-bill-wave",description:"For tracking cash on hand and petty expenses",features:["Physical cash tracking","Petty expenses","No banking fees","Immediate access"],recommended:["Daily cash expenses","Emergency cash","Local transactions","Budget tracking"],color:"bg-yellow-50 border-yellow-200"},{type:"other",title:"Other Account",icon:"fas fa-wallet",description:"For specialized accounts not covered by standard types",features:["Custom tracking","Flexible rules","Specialized reporting","Unique features"],recommended:["Business accounts","Loan tracking","Gift cards","Special purposes"],color:"bg-gray-50 border-gray-200"}],[]),y=i.useMemo(()=>[{level:"beginner",title:"Beginner",description:"New to personal finance and account management",features:["Guided setup","Basic recommendations","Educational tips","Simplified interface"]},{level:"intermediate",title:"Intermediate",description:"Some experience with financial accounts and budgeting",features:["Balanced guidance","Moderate customization","Performance insights","Goal tracking"]},{level:"advanced",title:"Advanced",description:"Experienced with complex financial management",features:["Full customization","Advanced analytics","Investment tracking","Professional tools"]}],[]),c=i.useCallback(h=>{u(h)},[]),g=i.useCallback(()=>{a&&s(a,n,m)},[a,n,m,s]);return e.jsxs("div",{className:"space-y-4 md:space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg md:text-3xl font-bold text-gray-900 mb-2 md:mb-4",children:"What type of account would you like to create?"}),e.jsx("p",{className:"text-sm md:text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose the account type that best fits your financial needs. Each type has different features and benefits."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-6",children:v.map(h=>{const f=a===h.type,F={checking:"text-blue-600",savings:"text-green-600",credit:"text-purple-600",investment:"text-indigo-600",cash:"text-yellow-600",other:"text-gray-600"},w={checking:"bg-blue-500",savings:"bg-green-500",credit:"bg-purple-500",investment:"bg-indigo-500",cash:"bg-yellow-500",other:"bg-gray-500"},K={checking:"bg-blue-50 border-blue-500",savings:"bg-green-50 border-green-500",credit:"bg-purple-50 border-purple-500",investment:"bg-indigo-50 border-indigo-500",cash:"bg-yellow-50 border-yellow-500",other:"bg-gray-50 border-gray-500"};return e.jsxs("div",{className:`group relative overflow-hidden cursor-pointer transition-all duration-300 transform hover:scale-[1.01] hover:shadow-lg ${f?`${K[h.type]} shadow-lg scale-[1.01]`:"bg-white border border-gray-200 shadow-sm hover:border-gray-300 hover:shadow-md"} rounded-lg`,style:f?{borderLeft:`4px solid ${h.type==="checking"?"#3B82F6":h.type==="savings"?"#10B981":h.type==="credit"?"#8B5CF6":h.type==="investment"?"#6366F1":h.type==="cash"?"#F59E0B":"#6B7280"}`}:{},onClick:()=>c(h.type),children:[f&&e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs("div",{className:`px-2 py-1 ${w[h.type]} rounded text-white shadow-md flex items-center space-x-1`,children:[e.jsx("i",{className:"fas fa-check text-xs"}),e.jsx("span",{className:"text-xs font-medium",children:"Selected"})]})}),e.jsxs("div",{className:"relative z-10 p-5",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:`w-12 h-12 ${f?w[h.type]:"bg-gray-100"} rounded-lg flex items-center justify-center shadow-sm transition-all duration-300 mr-3`,children:e.jsx("i",{className:`${h.icon} text-lg ${f?"text-white":F[h.type]}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:h.title}),e.jsx("div",{className:`w-12 h-0.5 ${f?w[h.type]:"bg-gray-300"} transition-all duration-300`})]})]}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm leading-relaxed",children:h.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-star text-yellow-500 text-xs mr-2"}),"Key Features"]}),e.jsx("ul",{className:"space-y-1.5",children:h.features.slice(0,3).map((z,k)=>e.jsxs("li",{className:"flex items-start text-xs text-gray-600",children:[e.jsx("div",{className:`w-1.5 h-1.5 ${f?w[h.type]:"bg-green-500"} rounded-sm mr-3 flex-shrink-0 mt-1.5`}),e.jsx("span",{className:"leading-relaxed flex-1",children:z})]},k))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-target text-blue-500 text-xs mr-2"}),"Perfect For"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:h.recommended.slice(0,2).map((z,k)=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded text-xs font-medium transition-all duration-200 border ${f?`${w[h.type]} text-white shadow-sm border-transparent`:"bg-gray-50 text-gray-700 hover:bg-gray-100 border-gray-200"}`,children:z},k))})]})]}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 ${w[h.type]} transform transition-all duration-300 rounded-b-lg ${f?"translate-y-0 opacity-100":"translate-y-full opacity-0 group-hover:translate-y-0 group-hover:opacity-100"}`})]})]},h.type)})}),a&&e.jsx("div",{className:"animate-fade-in",children:e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"What's your experience level with financial accounts?"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This helps us customize the setup process and provide appropriate guidance."}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:y.map(h=>e.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${n===h.level?"bg-blue-50 border-blue-300 shadow-md":"bg-white border-gray-200 hover:border-gray-300"}`,onClick:()=>o(h.level),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:h.title}),n===h.level&&e.jsx("i",{className:"fas fa-check-circle text-blue-600"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:h.description}),e.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:h.features.slice(0,2).map((f,F)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-dot-circle text-xs mr-2"}),f]},F))})]},h.level))})]})}),a&&e.jsx("div",{className:"animate-fade-in",children:e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Why are you creating this account? (Optional)"}),e.jsx("textarea",{value:m,onChange:h=>x(h.target.value),placeholder:"e.g., Building an emergency fund, Managing daily expenses, Saving for a vacation...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,maxLength:200}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["This helps us provide better recommendations and tips. ",200-m.length," characters remaining."]})]})}),a&&e.jsx("div",{className:"hidden md:flex justify-center animate-fade-in",children:e.jsxs("button",{onClick:g,className:"bg-[#4e73df] hover:bg-[#2e59d9] text-white px-8 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[e.jsx("span",{children:"Continue Setup"}),e.jsx("i",{className:"fas fa-arrow-right"})]})})]})});ot.displayName="AccountTypeChoiceStep";class Z{static validateAccountData(s){const a={};return s.account_name?.trim()?s.account_name.trim().length<2?a.account_name="Account name must be at least 2 characters long":s.account_name.trim().length>50?a.account_name="Account name cannot exceed 50 characters":/^[a-zA-Z0-9\s\-_'.()]+$/.test(s.account_name.trim())||(a.account_name="Account name contains invalid characters"):a.account_name="Account name is required",s.account_type||(a.account_type="Please select an account type"),s.initial_balance===null||s.initial_balance===void 0?a.initial_balance="Initial balance is required":isNaN(s.initial_balance)?a.initial_balance="Please enter a valid amount":(s.account_type==="credit"&&s.initial_balance>0&&(a.initial_balance="Credit card balance should be zero or negative (representing debt)"),s.initial_balance<-99999999999e-2?a.initial_balance="Balance cannot be less than -₱999,999,999.99":s.initial_balance>99999999999e-2&&(a.initial_balance="Balance cannot exceed ₱999,999,999.99")),s.institution_name&&s.institution_name.length>100&&(a.institution_name="Institution name cannot exceed 100 characters"),s.description&&s.description.length>500&&(a.description="Description cannot exceed 500 characters"),a}static validateCashInData(s){const a={};if(s.amount===null||s.amount===void 0?a.cash_in_amount="Cash-in amount is required":isNaN(s.amount)?a.cash_in_amount="Please enter a valid amount":s.amount<=0?a.cash_in_amount="Cash-in amount must be greater than zero":s.amount<.01?a.cash_in_amount="Minimum cash-in amount is ₱0.01":s.amount>99999999999e-2&&(a.cash_in_amount="Cash-in amount cannot exceed ₱999,999,999.99"),s.description?.trim()?s.description.trim().length<3?a.cash_in_description="Description must be at least 3 characters long":s.description.trim().length>200&&(a.cash_in_description="Description cannot exceed 200 characters"):a.cash_in_description="Description is required for cash-in transactions",!s.date)a.cash_in_date="Date is required";else{const u=new Date(s.date),n=new Date,o=new Date;o.setDate(n.getDate()+7),u>o&&(a.cash_in_date="Date cannot be more than 7 days in the future");const m=new Date;m.setFullYear(n.getFullYear()-10),u<m&&(a.cash_in_date="Date cannot be more than 10 years in the past")}if(s.source&&s.source.length>100&&(a.cash_in_source="Source cannot exceed 100 characters"),s.budget_allocation&&s.budget_allocation.length>0){let u=0;for(const n of s.budget_allocation){if(!n.category_name?.trim()){a.budget_allocation="All budget categories must have names";break}if(!n.allocated_amount||n.allocated_amount<=0){a.budget_allocation="All budget allocations must have positive amounts";break}u+=n.allocated_amount}u>s.amount&&(a.budget_allocation="Total budget allocation cannot exceed cash-in amount")}return a}static hasValidationErrors(s){return Object.keys(s).some(a=>s[a]!==void 0&&s[a]!=="")}static getAccountTypeRules(s){switch(s){case"checking":return{balanceRules:"Can have positive, negative, or zero balance",description:"For daily transactions and bill payments",recommendations:["Maintain enough balance for monthly expenses","Consider setting up automatic bill payments","Monitor for overdraft fees"]};case"savings":return{balanceRules:"Should typically have positive balance",description:"For saving money and earning interest",recommendations:["Set aside emergency funds (3-6 months expenses)","Look for high-yield savings options","Set specific savings goals"]};case"credit":return{balanceRules:"Balance should be zero or negative (representing debt)",description:"For credit purchases and building credit history",recommendations:["Pay full balance monthly to avoid interest","Keep utilization below 30%","Never exceed credit limit"]};case"investment":return{balanceRules:"Can have positive balance and fluctuating value",description:"For stocks, bonds, and other investments",recommendations:["Diversify your investment portfolio","Consider long-term investment strategy","Regular monitoring and rebalancing"]};case"cash":return{balanceRules:"Should have positive balance",description:"For cash on hand and petty expenses",recommendations:["Keep reasonable amount for emergencies","Track cash expenses carefully","Consider digital payment alternatives"]};case"other":return{balanceRules:"Balance rules depend on account purpose",description:"For specialized accounts not covered by other types",recommendations:["Clearly define the account purpose","Set appropriate tracking and monitoring","Regular review of account performance"]};default:return{balanceRules:"Please select a valid account type",description:"",recommendations:[]}}}static sanitizeAccountName(s){return s.trim().replace(/[<>\"'&]/g,"").replace(/\s+/g," ").substring(0,50)}static roundToCentavo(s){return Math.round(s*100)/100}static formatAmount(s){return`₱${s.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`}static createAccountSetupError(s,a,u,n){switch(s){case"validation":return{type:"validation",title:"Account Setup - Validation Error",message:a,details:u,fieldErrors:n,suggestedActions:["Check that all required fields are filled correctly","Ensure account name is unique and follows naming rules","Verify amount formats and limits"],isRetryable:!0};case"duplicate_account":return{type:"duplicate_account",title:"Account Setup - Duplicate Account",message:a,details:u,suggestedActions:["Choose a different account name","Check if you already have this account","Consider updating existing account instead"],isRetryable:!0};case"bank_connection":return{type:"bank_connection",title:"Account Setup - Bank Connection Error",message:a,details:u,suggestedActions:["Check your internet connection","Verify bank institution details","Try again later or contact bank support"],isRetryable:!0};case"permission":return{type:"permission",title:"Account Setup - Permission Denied",message:a,details:u,suggestedActions:["Check your account permissions","Contact system administrator","Verify your user role allows account creation"],isRetryable:!1};case"network":return{type:"network",title:"Account Setup - Connection Error",message:a,details:u,suggestedActions:["Check your internet connection","Try again in a few moments","Refresh the page if the problem persists"],isRetryable:!0};case"system_error":default:return{type:"system_error",title:"Account Setup - System Error",message:a,details:u,suggestedActions:["Try refreshing the page","Clear browser cache and try again","Contact support if the problem persists"],isRetryable:!0}}}static validateAccountDataWithDetails(s,a=[]){const u=this.validateAccountData(s);if(s.account_name&&a.includes(s.account_name.trim()))return{isValid:!1,error:this.createAccountSetupError("duplicate_account","An account with this name already exists",`Account name "${s.account_name}" is already in use`,{account_name:"This account name is already taken"})};if(this.hasValidationErrors(u)){const n=Object.values(u).find(m=>m!==void 0),o={};return Object.entries(u).forEach(([m,x])=>{x!==void 0&&(o[m]=x)}),{isValid:!1,error:this.createAccountSetupError("validation",n||"Please correct the form errors","Please review all fields and correct any errors",o)}}return{isValid:!0}}static validateCashInDataWithDetails(s){const a=this.validateCashInData(s);if(this.hasValidationErrors(a)){const u=Object.values(a).find(o=>o!==void 0),n={};return Object.entries(a).forEach(([o,m])=>{m!==void 0&&(n[o]=m)}),{isValid:!1,error:this.createAccountSetupError("validation",u||"Please correct the cash-in form errors","Please review all cash-in fields and correct any errors",n)}}return{isValid:!0}}}const lt=i.memo(({modalState:t,updateAccountData:s,updateValidationErrors:a,navigationHandlers:u})=>{const[n,o]=ve.useState({}),m=Z.getAccountTypeRules(t.accountData.account_type),x=i.useCallback((g,h)=>{if(s({[g]:h}),n[g]){const f={...n};delete f[g],o(f),a({[g]:void 0})}if(g==="account_name"&&h){const f=Z.validateAccountData({...t.accountData,[g]:h}).account_name;f&&(o(F=>({...F,account_name:f})),a({account_name:f}))}if(g==="initial_balance"&&h!==null&&h!==void 0){const f=Z.validateAccountData({...t.accountData,[g]:h}).initial_balance;f&&(o(F=>({...F,initial_balance:f})),a({initial_balance:f}))}},[t.accountData,n,s,a]),v=i.useCallback(()=>{const g=Z.validateAccountData(t.accountData);Z.hasValidationErrors(g)?(o(g),a(g)):u.onNext?.()},[t.accountData,u,a]),y=g=>{switch(g){case"checking":return"fas fa-university";case"savings":return"fas fa-piggy-bank";case"credit":return"fas fa-credit-card";case"investment":return"fas fa-chart-line";case"cash":return"fas fa-money-bill-wave";case"other":return"fas fa-wallet";default:return"fas fa-bank"}},c=g=>{switch(g){case"checking":return"Checking Account";case"savings":return"Savings Account";case"credit":return"Credit Card";case"investment":return"Investment Account";case"cash":return"Cash Wallet";case"other":return"Other Account";default:return"Account"}};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:e.jsx("i",{className:`${y(t.accountData.account_type)} text-2xl text-blue-600`})}),e.jsxs("div",{className:"text-left",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:["Configure Your ",c(t.accountData.account_type)]}),e.jsx("p",{className:"text-gray-600",children:"Set up the basic details for your new account"})]})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name *"}),e.jsx("input",{type:"text",value:t.accountData.account_name,onChange:g=>x("account_name",g.target.value),placeholder:`My ${c(t.accountData.account_type)}`,className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.account_name||t.validationErrors.account_name?"border-red-300 bg-red-50":"border-gray-300"}`,maxLength:50}),(n.account_name||t.validationErrors.account_name)&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.account_name||t.validationErrors.account_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a descriptive name to easily identify this account"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Balance *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"₱"}),e.jsx("input",{type:"number",step:"0.01",value:t.accountData.initial_balance||"",onChange:g=>x("initial_balance",parseFloat(g.target.value)||0),placeholder:"0.00",className:`w-full pl-8 pr-3 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.initial_balance||t.validationErrors.initial_balance?"border-red-300 bg-red-50":"border-gray-300"}`})]}),(n.initial_balance||t.validationErrors.initial_balance)&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.initial_balance||t.validationErrors.initial_balance}),e.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("i",{className:"fas fa-info-circle text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Balance Guidelines:"}),e.jsx("p",{className:"text-sm text-blue-700",children:m.balanceRules})]})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Institution Name (Optional)"}),e.jsx("input",{type:"text",value:t.accountData.institution_name||"",onChange:g=>x("institution_name",g.target.value),placeholder:"e.g., BPI, Metrobank, Chase Bank",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:100}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The bank or financial institution where this account is held"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:t.accountData.description||"",onChange:g=>x("description",g.target.value),placeholder:"Additional notes about this account's purpose or details...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,maxLength:500}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional notes about the account's purpose or special details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Color"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:St.map(g=>e.jsx("button",{type:"button",onClick:()=>x("color",g),className:`w-8 h-8 rounded-full border-2 transition-all duration-200 ${t.accountData.color===g?"border-gray-800 scale-110 shadow-lg":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:g},title:`Select ${g}`},g))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Choose a color to help visually identify this account"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:t.accountData.is_default,onChange:g=>x("is_default",g.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"is_default",className:"ml-2 block text-sm text-gray-900",children:"Set as default account"})]}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("i",{className:"fas fa-lightbulb text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-green-900 mb-2",children:["Recommendations for ",c(t.accountData.account_type),":"]}),e.jsx("ul",{className:"text-sm text-green-700 space-y-1",children:m.recommendations.map((g,h)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("i",{className:"fas fa-check text-green-600 text-xs mt-1"}),e.jsx("span",{children:g})]},h))})]})]})})]}),e.jsxs("div",{className:"hidden md:flex justify-between pt-6",children:[e.jsxs("button",{onClick:u.onPrevious,className:"flex items-center space-x-2 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:v,className:"flex items-center space-x-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white px-6 py-3 rounded-lg transition-colors duration-200",children:[e.jsx("span",{children:"Continue"}),e.jsx("i",{className:"fas fa-arrow-right"})]})]})]})});lt.displayName="AccountConfigStep";const dt=i.memo(({modalState:t,updateCashInData:s,updateValidationErrors:a,navigationHandlers:u})=>{const[n,o]=ve.useState({}),[m,x]=ve.useState(!1),[v,y]=ve.useState(!1),c=i.useCallback((k,I)=>{if(s({[k]:I}),n[`cash_in_${k}`]){const p={...n};delete p[`cash_in_${k}`],o(p),a({[`cash_in_${k}`]:void 0})}if(k==="amount"&&I!==null&&I!==void 0){const p=Z.validateCashInData({...t.cashInData,[k]:I});p.cash_in_amount&&(o(_=>({..._,cash_in_amount:p.cash_in_amount})),a({cash_in_amount:p.cash_in_amount}))}},[t.cashInData,n,s,a]),g=i.useCallback(()=>{if(m){u.onNext?.();return}if(!(t.cashInData.amount>0||t.cashInData.description.trim()!=="")){u.onNext?.();return}const I=Z.validateCashInData(t.cashInData);Z.hasValidationErrors(I)?(o(I),a(I)):u.onNext?.()},[m,t.cashInData,u,a]),h=()=>{const k=t.cashInData.budget_allocation||[];s({budget_allocation:[...k,{category_name:"",allocated_amount:0,notes:""}]})},f=k=>{const p=(t.cashInData.budget_allocation||[]).filter((_,b)=>b!==k);s({budget_allocation:p})},F=(k,I,p)=>{const b=[...t.cashInData.budget_allocation||[]];b[k]={...b[k],[I]:p},s({budget_allocation:b})},w=["Salary/Wages","Freelance Income","Investment Returns","Gift/Bonus","Transfer from Another Account","Cash Deposit","Refund","Other Income"],K=(t.cashInData.budget_allocation||[]).reduce((k,I)=>k+(I.allocated_amount||0),0),z=t.cashInData.amount-K;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Add Initial Funds (Optional)"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"You can add initial funds to your account now, or skip this step and add money later."})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"skip_cash_in",checked:m,onChange:k=>x(k.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"skip_cash_in",className:"ml-2 block text-sm text-gray-900",children:"Skip for now - I'll add funds later"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"You can always add funds to your account after it's created"})]})}),!m&&e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount to Add *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"₱"}),e.jsx("input",{type:"number",step:"0.01",value:t.cashInData.amount||"",onChange:k=>c("amount",parseFloat(k.target.value)||0),placeholder:"0.00",className:`w-full pl-8 pr-3 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.cash_in_amount||t.validationErrors.cash_in_amount?"border-red-300 bg-red-50":"border-gray-300"}`})]}),(n.cash_in_amount||t.validationErrors.cash_in_amount)&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.cash_in_amount||t.validationErrors.cash_in_amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("input",{type:"text",value:t.cashInData.description,onChange:k=>c("description",k.target.value),placeholder:"e.g., Initial deposit, Salary transfer, Gift money",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${n.cash_in_description||t.validationErrors.cash_in_description?"border-red-300 bg-red-50":"border-gray-300"}`,maxLength:200}),(n.cash_in_description||t.validationErrors.cash_in_description)&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n.cash_in_description||t.validationErrors.cash_in_description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:t.cashInData.date,onChange:k=>c("date",k.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source (Optional)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("select",{value:t.cashInData.source||"",onChange:k=>c("source",k.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a source..."}),w.map(k=>e.jsx("option",{value:k,children:k},k))]}),e.jsx("input",{type:"text",value:t.cashInData.source||"",onChange:k=>c("source",k.target.value),placeholder:"Or enter custom source",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:100})]})]}),t.cashInData.amount>0&&e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Budget Planning"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Plan how you want to allocate this money across different spending categories"})]}),e.jsxs("button",{type:"button",onClick:()=>y(!v),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:[v?"Hide":"Show"," Planning"]})]})}),v&&t.cashInData.amount>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Budget Allocation"}),e.jsxs("button",{type:"button",onClick:h,className:"bg-green-600 hover:bg-green-700 text-white px-2 py-1 md:px-3 md:py-2 rounded text-xs md:text-sm flex items-center space-x-1",children:[e.jsx("i",{className:"fas fa-plus text-xs"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Category"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),t.cashInData.budget_allocation?.map((k,I)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h5",{className:"font-medium text-gray-800",children:["Category #",I+1]}),e.jsx("button",{type:"button",onClick:()=>f(I),className:"text-red-600 hover:text-red-800",children:e.jsx("i",{className:"fas fa-trash text-sm"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name"}),e.jsx("input",{type:"text",value:k.category_name,onChange:p=>F(I,"category_name",p.target.value),placeholder:"e.g., Food, Transportation, Entertainment",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allocated Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-2 text-gray-500 text-sm",children:"₱"}),e.jsx("input",{type:"number",step:"0.01",value:k.allocated_amount||"",onChange:p=>F(I,"allocated_amount",parseFloat(p.target.value)||0),placeholder:"0.00",className:"w-full pl-6 pr-2 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (Optional)"}),e.jsx("input",{type:"text",value:k.notes||"",onChange:p=>F(I,"notes",p.target.value),placeholder:"Additional notes about this allocation",className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]},I)),(t.cashInData.budget_allocation?.length||0)>0&&e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Cash-In Amount:"}),e.jsxs("span",{className:"font-medium",children:["₱",t.cashInData.amount.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Allocated:"}),e.jsxs("span",{className:"font-medium",children:["₱",K.toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-medium ${z<0?"text-red-600":"text-green-600"}`,children:[e.jsx("span",{children:"Remaining:"}),e.jsxs("span",{children:["₱",z.toFixed(2)]})]})]}),z<0&&e.jsxs("p",{className:"text-red-600 text-xs mt-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),"Over-allocated by ₱",Math.abs(z).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"hidden md:flex justify-between pt-6",children:[e.jsxs("button",{onClick:u.onPrevious,className:"flex items-center space-x-2 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("span",{children:"Back"})]}),e.jsxs("button",{onClick:g,className:"flex items-center space-x-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white px-6 py-3 rounded-lg transition-colors duration-200",children:[e.jsx("span",{children:"Review & Create"}),e.jsx("i",{className:"fas fa-arrow-right"})]})]})]})});dt.displayName="CashInSetupStep";const mt=i.memo(({modalState:t,navigationHandlers:s,onSubmit:a})=>{const u=i.useCallback(y=>{switch(y){case"checking":return"fas fa-university";case"savings":return"fas fa-piggy-bank";case"credit":return"fas fa-credit-card";case"investment":return"fas fa-chart-line";case"cash":return"fas fa-money-bill-wave";case"other":return"fas fa-wallet";default:return"fas fa-bank"}},[]),n=i.useCallback(y=>{switch(y){case"checking":return"Checking Account";case"savings":return"Savings Account";case"credit":return"Credit Card";case"investment":return"Investment Account";case"cash":return"Cash Wallet";case"other":return"Other Account";default:return"Account"}},[]),o=i.useCallback(y=>{switch(y){case"beginner":return"Beginner";case"intermediate":return"Intermediate";case"advanced":return"Advanced";default:return y}},[]),m=i.useMemo(()=>t.cashInData.amount>0&&t.cashInData.description.trim()!=="",[t.cashInData.amount,t.cashInData.description]),x=i.useMemo(()=>(t.cashInData.budget_allocation?.length||0)>0,[t.cashInData.budget_allocation]),v=(t.cashInData.budget_allocation||[]).reduce((y,c)=>y+(c.allocated_amount||0),0);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Review & Confirm"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Please review all the details before creating your account. You can make changes by going back to previous steps."})]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mr-4",style:{backgroundColor:t.accountData.color||"#4e73df"},children:e.jsx("i",{className:`${u(t.accountData.account_type)} text-xl text-white`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Account Details"}),e.jsx("p",{className:"text-gray-600",children:n(t.accountData.account_type)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Name"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t.accountData.account_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Initial Balance"}),e.jsx("p",{className:"text-gray-900 font-medium",children:Z.formatAmount(t.accountData.initial_balance)})]})]}),t.accountData.institution_name&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Institution"}),e.jsx("p",{className:"text-gray-900",children:t.accountData.institution_name})]}),t.accountData.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:t.accountData.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Default Account"}),e.jsx("p",{className:"text-gray-900",children:t.accountData.is_default?e.jsxs("span",{className:"text-green-600",children:[e.jsx("i",{className:"fas fa-check mr-1"}),"Yes"]}):e.jsx("span",{className:"text-gray-500",children:"No"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Experience Level"}),e.jsx("p",{className:"text-gray-900",children:o(t.accountTypeChoice?.user_experience_level||"")})]})]}),t.accountTypeChoice?.choice_reason&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Purpose"}),e.jsx("p",{className:"text-gray-900",children:t.accountTypeChoice.choice_reason})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"fas fa-plus-circle text-xl text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Initial Funds"}),e.jsx("p",{className:"text-gray-600",children:m?"Cash-in transaction details":"No initial funding"})]})]}),m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Amount"}),e.jsx("p",{className:"text-gray-900 font-medium text-lg text-green-600",children:Z.formatAmount(t.cashInData.amount)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Date"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.cashInData.date).toLocaleDateString("en-PH",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:t.cashInData.description})]}),t.cashInData.source&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Source"}),e.jsx("p",{className:"text-gray-900",children:t.cashInData.source})]}),x&&e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"Budget Planning"}),e.jsxs("div",{className:"space-y-2",children:[t.cashInData.budget_allocation?.map((y,c)=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-blue-800",children:y.category_name}),e.jsx("span",{className:"font-medium text-blue-900",children:Z.formatAmount(y.allocated_amount)})]},c)),e.jsxs("div",{className:"border-t border-blue-200 pt-2 mt-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium",children:[e.jsx("span",{className:"text-blue-900",children:"Total Allocated:"}),e.jsx("span",{className:"text-blue-900",children:Z.formatAmount(v)})]}),v<t.cashInData.amount&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-blue-700",children:"Unallocated:"}),e.jsx("span",{className:"text-blue-700",children:Z.formatAmount(t.cashInData.amount-v)})]})]})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fas fa-info-circle text-4xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No initial funding will be added. You can add funds to your account after it's created."})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mt-8",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-bank text-white"})}),e.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Account Created"}),e.jsxs("p",{className:"text-blue-700 text-sm",children:["Your ",n(t.accountData.account_type).toLowerCase()," will be set up"]})]}),m&&e.jsxs("div",{className:"bg-green-50 p-6 rounded-lg text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-plus text-white"})}),e.jsx("h4",{className:"font-semibold text-green-900 mb-1",children:"Funds Added"}),e.jsxs("p",{className:"text-green-700 text-sm",children:[Z.formatAmount(t.cashInData.amount)," will be deposited"]})]}),e.jsxs("div",{className:"bg-purple-50 p-6 rounded-lg text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-history text-white"})}),e.jsx("h4",{className:"font-semibold text-purple-900 mb-1",children:"Audit Trail"}),e.jsx("p",{className:"text-purple-700 text-sm",children:"All activities will be logged for your records"})]})]}),e.jsx("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Important Notes:"}),e.jsxs("ul",{className:"text-yellow-800 text-sm space-y-1",children:[e.jsx("li",{children:"• Your account will be created immediately after confirmation"}),m&&e.jsx("li",{children:"• The cash-in transaction will be recorded in your transaction history"}),e.jsx("li",{children:"• All account activities will be logged in your audit trail"}),e.jsx("li",{children:"• You can modify account details later in your account settings"}),t.accountData.is_default&&e.jsx("li",{children:"• This account will be set as your default account"})]})]})]})})]}),e.jsxs("div",{className:"hidden md:flex justify-between pt-6",children:[e.jsxs("button",{onClick:s.onPrevious,disabled:t.isSubmitting,className:"flex items-center space-x-2 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-arrow-left"}),e.jsx("span",{children:"Back"})]}),e.jsx("button",{onClick:a,disabled:t.isSubmitting,className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:t.isSubmitting?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"Creating Account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check"}),e.jsx("span",{children:"Create Account"})]})})]})]})});mt.displayName="ReviewConfirmationStep";const ut=i.memo(({currentStep:t,progressPercentage:s,onClose:a,onSkipForLater:u,accountType:n,onShowMobileSidebar:o})=>{const m=i.useMemo(()=>{switch(t){case"account_type_choice":return"Account Type Selection";case"account_config":return"Account Configuration";case"cash_in_setup":return"Initial Funding";case"review_confirmation":return"Review & Confirm";default:return"Account Setup"}},[t]),x=i.useMemo(()=>{switch(t){case"account_type_choice":return"Choose the type of account that best fits your needs";case"account_config":return"Configure your account details and preferences";case"cash_in_setup":return"Add initial funds and plan your budget allocation";case"review_confirmation":return"Review all details before creating your account";default:return"Set up your new financial account"}},[t]),v=i.useCallback(y=>{if(!y)return"fas fa-bank";switch(y){case"checking":return"fas fa-university";case"savings":return"fas fa-piggy-bank";case"credit":return"fas fa-credit-card";case"investment":return"fas fa-chart-line";case"cash":return"fas fa-money-bill-wave";case"other":return"fas fa-wallet";default:return"fas fa-bank"}},[]);return e.jsxs("div",{className:"flex flex-col bg-white border-b border-gray-200",children:[e.jsx("div",{className:"w-full bg-gray-200 h-1",children:e.jsx("div",{className:"bg-blue-600 h-1 transition-all duration-300 ease-out",style:{width:`${s}%`}})}),e.jsxs("div",{className:"flex items-center justify-between p-3 md:p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsx("div",{className:"w-8 h-8 md:w-12 md:h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:`${v(n)} text-sm md:text-xl text-blue-600`})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-base md:text-2xl font-bold text-gray-900 flex items-center space-x-1 md:space-x-2",children:[e.jsx("span",{children:m}),n&&e.jsx("span",{className:"text-xs md:text-base font-normal text-blue-600 bg-blue-50 px-1.5 md:px-2 py-0.5 md:py-1 rounded-full",children:n.charAt(0).toUpperCase()+n.slice(1)})]}),e.jsx("p",{className:"text-xs md:text-base text-gray-600 mt-0.5 md:mt-1 hidden sm:block",children:x})]}),o&&e.jsx("button",{onClick:o,className:"md:hidden w-8 h-8 flex items-center justify-center rounded-lg bg-blue-100 text-blue-600 hover:bg-blue-200 transition-colors","aria-label":"Show Tips and Help",children:e.jsx("i",{className:"fas fa-info-circle text-sm"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 md:space-x-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsxs("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:[s,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 hidden md:block",children:["Step ",It(t)," of 4"]})]}),e.jsxs("button",{onClick:u,className:"px-2 py-1 md:px-4 md:py-2 text-xs md:text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors duration-200 flex items-center space-x-1 md:space-x-2","aria-label":"Skip Account Setup for Later",children:[e.jsx("i",{className:"fas fa-clock text-xs"}),e.jsx("span",{className:"hidden md:inline",children:"Skip for Later"}),e.jsx("span",{className:"md:hidden",children:"Skip"})]}),e.jsx("button",{onClick:a,className:"w-8 h-8 md:w-10 md:h-10 flex items-center justify-center rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors duration-200","aria-label":"Close Account Setup",children:e.jsx("i",{className:"fas fa-times text-base md:text-lg"})})]})]}),e.jsx("div",{className:"px-3 md:px-6 pb-2 md:pb-4",children:e.jsx("div",{className:"flex items-center space-x-1 md:space-x-2 text-xs md:text-sm",children:Et(t).map((y,c)=>e.jsxs(ve.Fragment,{children:[c>0&&e.jsx("i",{className:"fas fa-chevron-right text-xs text-gray-400"}),e.jsxs("span",{className:`px-1.5 md:px-2 py-0.5 md:py-1 rounded-full text-xs font-medium ${y.active?"bg-blue-100 text-blue-800":y.completed?"bg-green-100 text-green-800":"bg-gray-100 text-gray-500"}`,children:[y.completed&&e.jsx("i",{className:"fas fa-check mr-0.5 md:mr-1 text-xs"}),y.label]})]},y.key))})})]})});ut.displayName="AccountModalHeader";const It=t=>["account_type_choice","account_config","cash_in_setup","review_confirmation"].indexOf(t)+1,Et=t=>{const s=[{key:"account_type_choice",label:"Type",completed:!1,active:!1},{key:"account_config",label:"Details",completed:!1,active:!1},{key:"cash_in_setup",label:"Funding",completed:!1,active:!1},{key:"review_confirmation",label:"Review",completed:!1,active:!1}],a=s.findIndex(u=>u.key===t);return s.map((u,n)=>({...u,completed:n<a,active:n===a}))},Ne=i.memo(({currentStep:t,accountType:s,modalState:a,onTipClick:u})=>{const n=i.useMemo(()=>{switch(t){case"workflow_choice":return e.jsx(Yt,{onTipClick:u});case"account_type_choice":return e.jsx(Ft,{onTipClick:u});case"account_config":return e.jsx(Mt,{accountType:s,modalState:a,onTipClick:u});case"cash_in_setup":return e.jsx($t,{modalState:a,onTipClick:u});case"review_confirmation":return e.jsx(Rt,{modalState:a,onTipClick:u});default:return e.jsx(Pt,{onTipClick:u})}},[t,s,a,u]);return e.jsx("div",{className:"space-y-6",children:n})});Ne.displayName="AccountSidebar";const Ft=({onTipClick:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-lightbulb text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Choosing the Right Account"}),e.jsxs("ul",{className:"text-blue-800 text-sm space-y-2",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Checking:"})," For daily expenses and bill payments"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Savings:"})," For emergency funds and earning interest"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Credit:"})," For building credit and large purchases"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Investment:"})," For long-term wealth building"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Cash:"})," For tracking physical money"]})]})]})]})}),e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-user-graduate text-green-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Experience Levels"}),e.jsxs("ul",{className:"text-green-800 text-sm space-y-2",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Beginner:"})," Simplified interface with guided setup"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Intermediate:"})," Balanced features and customization"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Advanced:"})," Full control and professional tools"]})]})]})]})}),e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-star text-yellow-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Pro Tips"}),e.jsxs("ul",{className:"text-yellow-800 text-sm space-y-1",children:[e.jsx("li",{children:"• Start with a checking or savings account if you're new"}),e.jsx("li",{children:"• Consider your primary financial goals"}),e.jsx("li",{children:"• You can always create more accounts later"})]})]})]})})]}),Mt=({accountType:t,modalState:s,onTipClick:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-cog text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Account Setup Tips"}),e.jsxs("ul",{className:"text-blue-800 text-sm space-y-2",children:[e.jsx("li",{children:'• Use descriptive names like "Emergency Savings" or "Daily Checking"'}),e.jsx("li",{children:"• Colors help you quickly identify accounts"}),e.jsx("li",{children:"• Institution names help with bank reconciliation"}),e.jsx("li",{children:"• Descriptions provide context for account purpose"})]})]})]})}),t&&e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-info-circle text-purple-600 mt-1"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-purple-900 mb-2",children:[t.charAt(0).toUpperCase()+t.slice(1)," Account Guidelines"]}),e.jsx("div",{className:"text-purple-800 text-sm space-y-1",children:Bt(t)})]})]})}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-chart-line text-gray-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Account Summary"}),e.jsxs("div",{className:"text-gray-700 text-sm space-y-1",children:[e.jsxs("div",{children:["Name: ",s.accountData.account_name||"Not set"]}),e.jsxs("div",{children:["Balance: ₱",(s.accountData.initial_balance||0).toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("div",{children:["Type: ",t?t.charAt(0).toUpperCase()+t.slice(1):"Not selected"]}),e.jsxs("div",{children:["Default: ",s.accountData.is_default?"Yes":"No"]})]})]})]})})]}),$t=({modalState:t,onTipClick:s})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-plus-circle text-green-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Initial Funding"}),e.jsxs("ul",{className:"text-green-800 text-sm space-y-2",children:[e.jsx("li",{children:"• Add funds now or skip and fund later"}),e.jsx("li",{children:"• Describe the source for better tracking"}),e.jsx("li",{children:"• Set realistic budget allocations"}),e.jsx("li",{children:"• All transactions are automatically recorded"})]})]})]})}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-calculator text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Budget Planning"}),e.jsxs("ul",{className:"text-blue-800 text-sm space-y-2",children:[e.jsx("li",{children:"• Plan how to use your money effectively"}),e.jsx("li",{children:"• Common categories: Food, Transport, Entertainment"}),e.jsx("li",{children:"• Allocations help track spending goals"}),e.jsx("li",{children:"• You can adjust budgets anytime"})]})]})]})}),t.cashInData.amount>0&&e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-money-bill-wave text-yellow-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Cash-In Summary"}),e.jsxs("div",{className:"text-yellow-800 text-sm space-y-1",children:[e.jsxs("div",{children:["Amount: ₱",t.cashInData.amount.toLocaleString("en-PH",{minimumFractionDigits:2})]}),e.jsxs("div",{children:["Description: ",t.cashInData.description||"Not set"]}),e.jsxs("div",{children:["Source: ",t.cashInData.source||"Not specified"]}),(t.cashInData.budget_allocation?.length||0)>0&&e.jsxs("div",{children:["Budget Categories: ",t.cashInData.budget_allocation?.length," planned"]})]})]})]})})]}),Rt=({modalState:t,onTipClick:s})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-check-circle text-green-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Ready to Create"}),e.jsxs("ul",{className:"text-green-800 text-sm space-y-2",children:[e.jsx("li",{children:"• Review all details carefully"}),e.jsx("li",{children:"• Account will be created immediately"}),e.jsx("li",{children:"• All activities will be logged"}),e.jsx("li",{children:"• You can edit account details later"}),e.jsx("li",{children:"• Cash-in transaction will be recorded"})]})]})]})}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-history text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Audit Trail"}),e.jsxs("ul",{className:"text-blue-800 text-sm space-y-2",children:[e.jsx("li",{children:"• Account creation will be logged"}),e.jsx("li",{children:"• Initial funding recorded as transaction"}),e.jsx("li",{children:"• All changes tracked for security"}),e.jsx("li",{children:"• View history in account settings"})]})]})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-rocket text-purple-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:"What's Next?"}),e.jsxs("ul",{className:"text-purple-800 text-sm space-y-2",children:[e.jsx("li",{children:"• Start tracking transactions"}),e.jsx("li",{children:"• Set up additional accounts if needed"}),e.jsx("li",{children:"• Create budgets and financial goals"}),e.jsx("li",{children:"• Monitor your financial progress"})]})]})]})})]}),Pt=({onTipClick:t})=>e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Account Setup"}),e.jsx("p",{className:"text-gray-700 text-sm",children:"Follow the steps to create your new account. Each step includes helpful tips and guidance."})]})]})}),Bt=t=>{switch(t){case"checking":return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"• Can have positive, negative, or zero balance"}),e.jsx("div",{children:"• Best for daily transactions and bill payments"}),e.jsx("div",{children:"• Consider maintaining a minimum balance"})]});case"savings":return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"• Should typically have positive balance"}),e.jsx("div",{children:"• Aim for 3-6 months of expenses as emergency fund"}),e.jsx("div",{children:"• Look for accounts with good interest rates"})]});case"credit":return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"• Balance should be zero or negative (debt)"}),e.jsx("div",{children:"• Pay full balance monthly to avoid interest"}),e.jsx("div",{children:"• Keep utilization below 30% of credit limit"})]});case"investment":return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"• Balance can fluctuate with market conditions"}),e.jsx("div",{children:"• Focus on long-term growth strategy"}),e.jsx("div",{children:"• Diversify your investment portfolio"})]});case"cash":return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"• Should have positive balance"}),e.jsx("div",{children:"• Keep reasonable amount for emergencies"}),e.jsx("div",{children:"• Track cash expenses carefully"})]});default:return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"• Define the specific purpose of this account"}),e.jsx("div",{children:"• Set appropriate tracking and monitoring"}),e.jsx("div",{children:"• Review account performance regularly"})]})}},Yt=({onTipClick:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-route text-green-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Choose Your Path"}),e.jsxs("ul",{className:"text-green-800 text-sm space-y-2",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"New Account:"})," Create fresh accounts from scratch"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Cash In:"})," Add money to existing zero-balance accounts"]}),e.jsx("li",{children:"• Both options help you start tracking finances effectively"})]})]})]})}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-money-bill-wave text-blue-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Why Cash In?"}),e.jsxs("ul",{className:"text-blue-800 text-sm space-y-2",children:[e.jsx("li",{children:"• Activate dormant accounts with zero balances"}),e.jsx("li",{children:"• Start tracking real transactions immediately"}),e.jsx("li",{children:"• Build financial habits with actual money flows"}),e.jsx("li",{children:"• Get meaningful insights from day one"})]})]})]})}),e.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("i",{className:"fas fa-lightbulb text-purple-600 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:"Pro Tip"}),e.jsx("p",{className:"text-purple-800 text-sm",children:"Starting with actual money in your accounts gives you realistic data for budgeting, spending analysis, and financial planning. Empty accounts provide limited insights!"})]})]})})]}),ke=i.memo(({currentStep:t,onPrevious:s,onNext:a,onSubmit:u,isSubmitting:n=!1,isNextDisabled:o=!1,nextLabel:m,showPrevious:x=!0})=>{const v=()=>{if(m)return m;switch(t){case"workflow_choice":return"Continue";case"account_type_choice":return"Continue";case"account_config":return"Next";case"cash_in_setup":return"Review";case"review_confirmation":return n?"Creating...":"Create";default:return"Next"}},y=()=>{t==="review_confirmation"&&u?u():a&&a()};return e.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg z-50",children:e.jsxs("div",{className:"flex items-center justify-between p-3 gap-2",children:[x&&s&&t!=="workflow_choice"&&e.jsxs("button",{onClick:s,disabled:n,className:"flex items-center justify-center space-x-1 px-4 py-2.5 border-2 border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm flex-1",children:[e.jsx("i",{className:"fas fa-arrow-left text-xs"}),e.jsx("span",{children:"Back"})]}),(a||u)&&e.jsx("button",{onClick:y,disabled:o||n,className:`flex items-center justify-center space-x-1 px-4 py-2.5 rounded-lg text-white transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm ${t==="review_confirmation"?"bg-green-600 hover:bg-green-700":"bg-[#4e73df] hover:bg-[#2e59d9]"} flex-1`,children:n?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin text-xs"}),e.jsx("span",{children:v()})]}):e.jsxs(e.Fragment,{children:[t==="review_confirmation"?e.jsx("i",{className:"fas fa-check text-xs"}):null,e.jsx("span",{children:v()}),t!=="review_confirmation"&&e.jsx("i",{className:"fas fa-arrow-right text-xs"})]})})]})})});ke.displayName="AccountMobileFooter";const Lt=({isOpen:t,error:s,onClose:a,onRetry:u})=>{if(!t||!s)return null;const n=()=>{switch(s.type){case"duplicate_account":return"fas fa-copy text-orange-500";case"bank_connection":return"fas fa-university text-blue-500";case"validation":return"fas fa-exclamation-triangle text-yellow-500";case"permission":return"fas fa-lock text-red-500";case"network":return"fas fa-wifi text-gray-500";case"system_error":default:return"fas fa-exclamation-circle text-red-500"}},o=()=>{switch(s.type){case"duplicate_account":return"border-orange-500 bg-orange-50";case"bank_connection":return"border-blue-500 bg-blue-50";case"validation":return"border-yellow-500 bg-yellow-50";case"permission":return"border-red-500 bg-red-50";case"network":return"border-gray-500 bg-gray-50";case"system_error":default:return"border-red-500 bg-red-50"}},m=()=>{switch(s.type){case"duplicate_account":return"Duplicate Account";case"bank_connection":return"Bank Connection";case"validation":return"Validation";case"permission":return"Permission";case"network":return"Network";case"system_error":return"System";default:return"Unknown"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[1070] p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-auto animate-fadeIn",children:[e.jsx("div",{className:`px-6 py-4 border-b border-l-4 ${o()} rounded-t-lg`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:e.jsx("i",{className:`${n()} text-2xl`})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.title})}),e.jsx("button",{onClick:a,className:"flex-shrink-0 ml-3 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:e.jsx("i",{className:"fas fa-times text-gray-600"})})]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-800 font-medium mb-2",children:s.message}),s.details&&e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-info-circle mr-2 text-blue-500"}),s.details]})})]}),s.fieldErrors&&Object.keys(s.fieldErrors).length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-list text-red-500 mr-2"}),"Field Errors:"]}),e.jsx("div",{className:"space-y-1",children:Object.entries(s.fieldErrors).map(([x,v],y)=>e.jsxs("div",{className:"flex items-start text-sm",children:[e.jsx("i",{className:"fas fa-chevron-right text-red-500 mr-2 mt-0.5 text-xs flex-shrink-0"}),e.jsxs("span",{className:"text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:[x.replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase()),":"]})," ",v]})]},y))})]}),s.suggestedActions&&s.suggestedActions.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center",children:[e.jsx("i",{className:"fas fa-lightbulb text-yellow-500 mr-2"}),"Suggestions to resolve this:"]}),e.jsx("ul",{className:"space-y-2",children:s.suggestedActions.map((x,v)=>e.jsxs("li",{className:"flex items-start text-sm text-gray-600",children:[e.jsx("i",{className:"fas fa-chevron-right text-blue-500 mr-2 mt-0.5 text-xs flex-shrink-0"}),e.jsx("span",{children:x})]},v))})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.type==="duplicate_account"?"bg-orange-100 text-orange-800":s.type==="bank_connection"?"bg-blue-100 text-blue-800":s.type==="validation"?"bg-yellow-100 text-yellow-800":s.type==="permission"?"bg-red-100 text-red-800":s.type==="network"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:[m()," Error"]})})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg flex justify-between items-center",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Close"}),s.isRetryable&&u&&e.jsxs("button",{onClick:()=>{u(),a()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center",children:[e.jsx("i",{className:"fas fa-redo mr-2"}),"Try Again"]})]})]})})},me={MODAL_STATE:"accountSetupModal_state",ACCOUNT_TYPE_CHOICE:"accountSetupModal_accountTypeChoice",ACCOUNT_DATA:"accountSetupModal_accountData",CASH_IN_DATA:"accountSetupModal_cashInData",CURRENT_STEP:"accountSetupModal_currentStep"},pe=(t,s)=>{try{localStorage.setItem(t,JSON.stringify(s))}catch(a){console.warn("Failed to save to localStorage:",a)}},Ae=(t,s=null)=>{try{const a=localStorage.getItem(t);return a?JSON.parse(a):s}catch(a){return console.warn("Failed to load from localStorage:",a),s}},Le=()=>{try{Object.values(me).forEach(t=>{localStorage.removeItem(t)})}catch(t){console.warn("Failed to clear localStorage:",t)}},Ot=({isOpen:t,show:s,onClose:a,onSubmit:u,onAccountCreated:n})=>{const o=t||s||!1,{user:m}=$e(),{showErrorToast:x,showSuccessToast:v,showInfoToast:y}=ze(),c=j=>({workflow_choice:20,account_type_choice:40,account_config:60,cash_in_setup:80,review_confirmation:100})[j]||20,[g,h]=i.useState([]),[f,F]=i.useState(!1),[w,K]=i.useState(null),[z,k]=i.useState("create_account"),[I,p]=i.useState(!1),[_,b]=i.useState(!1),[H,X]=i.useState({hasError:!1,error:null,showErrorModal:!1}),[r,ee]=i.useState(()=>{const j=Ae(me.MODAL_STATE),A=Ae(me.ACCOUNT_TYPE_CHOICE),D=Ae(me.ACCOUNT_DATA),ne=Ae(me.CASH_IN_DATA),xe=Ae(me.CURRENT_STEP),he={currentStep:"workflow_choice",accountTypeChoice:null,accountData:{account_name:"",account_type:"checking",initial_balance:0,description:"",institution_name:"",color:"#4e73df",is_default:!1},cashInData:{amount:0,description:"",date:new Date().toISOString().split("T")[0],source:""},validationErrors:{},isSubmitting:!1,allowAccountTypeChange:!0,progressPercentage:20};return j||A||D||ne||xe?{...he,currentStep:xe||he.currentStep,accountTypeChoice:A||he.accountTypeChoice,accountData:D?{...he.accountData,...D}:he.accountData,cashInData:ne?{...he.cashInData,...ne}:he.cashInData,progressPercentage:xe?c(xe):he.progressPercentage}:he}),E=j=>{ee(A=>{const D={...A,...j};return pe(me.MODAL_STATE,D),pe(me.CURRENT_STEP,D.currentStep),D.accountTypeChoice&&pe(me.ACCOUNT_TYPE_CHOICE,D.accountTypeChoice),D})},L=j=>{ee(A=>{const D={...A.accountData,...j},ne={...A,accountData:D};return pe(me.ACCOUNT_DATA,D),pe(me.MODAL_STATE,ne),ne})},V=j=>{ee(A=>{const D={...A.cashInData,...j},ne={...A,cashInData:D};return pe(me.CASH_IN_DATA,D),pe(me.MODAL_STATE,ne),ne})},R=j=>{const A=c(j);E({currentStep:j,progressPercentage:A})},se=j=>{k(j),j==="create_account"?R("account_type_choice"):j==="cash_in_existing"&&R("cash_in_setup")},le=j=>{K(j)},oe=()=>{z==="create_account"?R("account_type_choice"):z==="cash_in_existing"&&w&&R("cash_in_setup")},C=(j,A,D)=>{E({accountTypeChoice:{account_type:j,user_experience_level:A,choice_reason:D},allowAccountTypeChange:!1}),L({account_type:j}),R("account_config")},T=i.useMemo(()=>{const j=Z.validateAccountData(r.accountData);return!Z.hasValidationErrors(j)},[r.accountData]),P=i.useMemo(()=>{if(!(r.cashInData.amount>0||r.cashInData.description.trim()!==""))return!0;const A=Z.validateCashInData(r.cashInData);return!Z.hasValidationErrors(A)},[r.cashInData]);i.useEffect(()=>{(async()=>{if(!(!o||!m))try{const{data:A,error:D}=await ie.from("accounts").select("*").eq("user_id",m.id).eq("status","active");if(D){console.error("Error fetching user accounts:",D);return}h(A||[]),F(A&&A.length>0)}catch(A){console.error("Error fetching user accounts:",A)}})()},[o,m]),i.useEffect(()=>{o&&(pe(me.MODAL_STATE,r),pe(me.CURRENT_STEP,r.currentStep),pe(me.ACCOUNT_DATA,r.accountData),pe(me.CASH_IN_DATA,r.cashInData),r.accountTypeChoice&&pe(me.ACCOUNT_TYPE_CHOICE,r.accountTypeChoice))},[r,o]),i.useEffect(()=>{const j=()=>{Le()};return window.addEventListener("beforeunload",j),()=>{window.removeEventListener("beforeunload",j)}},[]);const N=()=>{const j={currentStep:"workflow_choice",accountTypeChoice:null,accountData:{account_name:"",account_type:"checking",initial_balance:0,description:"",institution_name:"",color:"#4e73df",is_default:!1},cashInData:{amount:0,description:"",date:new Date().toISOString().split("T")[0],source:""},validationErrors:{},isSubmitting:!1,allowAccountTypeChange:!0,progressPercentage:20};ee(j),k("create_account"),K(null),X({hasError:!1,error:null,showErrorModal:!1}),Le()},Y=()=>{a()},O=()=>{p(!0)},J=async()=>{if(!m){console.error("User must be logged in to skip setup");return}p(!1);try{const{data:j,error:A}=await ie.rpc("skip_account_setup_for_later",{user_uuid:m.id,skip_minutes:25});if(A){console.error("Error skipping account setup:",A);const D=new Date(Date.now()+25*60*1e3).toISOString();localStorage.setItem("accountSetupSkipped","temporary"),localStorage.setItem("accountSetupReminder",D),y("Account setup skipped for 25 minutes (offline mode)")}else console.log("Account setup skipped until:",j),localStorage.removeItem("accountSetupSkipped"),localStorage.removeItem("accountSetupReminder"),y("Account setup skipped for 25 minutes")}catch(j){console.error("Exception skipping account setup:",j);const A=new Date(Date.now()+25*60*1e3).toISOString();localStorage.setItem("accountSetupSkipped","temporary"),localStorage.setItem("accountSetupReminder",A),y("Account setup skipped for 25 minutes (offline mode)")}Y()},re=()=>{p(!1)},W=async()=>{if(m?.id)try{const{error:j}=await ie.rpc("mark_account_setup_completed",{user_uuid:m.id});j?(console.error("Error marking account setup as completed:",j),localStorage.setItem("accountSetupCompleted","true"),localStorage.setItem("accountSetupCompletedDate",new Date().toISOString())):(console.log("Account setup completion marked in database successfully"),localStorage.removeItem("accountSetupCompleted"),localStorage.removeItem("accountSetupCompletedDate"))}catch(j){console.error("Exception marking account setup as completed:",j),localStorage.setItem("accountSetupCompleted","true"),localStorage.setItem("accountSetupCompletedDate",new Date().toISOString())}Le(),N(),console.log("Account setup completed successfully - flag set to prevent future prompts")},B=async()=>{if(!m){const j=Z.createAccountSetupError("permission","You must be logged in to create accounts or cash in","Please sign in to your account and try again");ae(j);return}E({isSubmitting:!0});try{if(z==="create_account"){if(!ye(r.accountData)||(r.cashInData.amount>0||r.cashInData.description.trim()!=="")&&!be(r.cashInData))return;await $(),v("Account created successfully!")}else if(z==="cash_in_existing"){if(!be(r.cashInData))return;await q(),v("Money cashed in successfully!")}await W(),Y(),setTimeout(()=>{window.location.reload()},1500)}catch(j){console.error("Error in handleSubmit:",j);const A=j instanceof Error?j.message:"An unexpected error occurred";let D="system_error";A.includes("network")||A.includes("connection")?D="network":(A.includes("duplicate")||A.includes("already exists"))&&(D="duplicate_account");const ne=Z.createAccountSetupError(D,`Failed to ${z==="create_account"?"create account":"cash in money"}: ${A}`,"Please try again or contact support if the problem persists");ae(ne)}finally{E({isSubmitting:!1})}},$=async()=>{if(!m)throw new Error("User authentication required");const j=r.cashInData.amount>0&&r.cashInData.description.trim()!=="",A={user_id:m.id,account_name:Z.sanitizeAccountName(r.accountData.account_name),account_type:r.accountData.account_type,balance:Z.roundToCentavo(r.accountData.initial_balance),initial_balance:Z.roundToCentavo(r.accountData.initial_balance),description:r.accountData.description?.trim()||void 0,institution_name:r.accountData.institution_name?.trim()||void 0,color:r.accountData.color||"#4e73df",is_default:r.accountData.is_default,currency:"PHP",status:"active",created_at:new Date().toISOString()},D=await At.createAccount(A);if(!D.success)throw new Error(`Failed to create account: ${D.error}`);console.log("Account created successfully:",D.data);const ne=D.data?.id;if(!ne)throw new Error("Account created but ID not returned");return await G("account_created","Account created successfully",{account_id:ne,account_name:A.account_name,account_type:A.account_type,initial_balance:A.balance,initial_budget_plan:r.accountData.initial_budget_plan}),j&&await M(ne),{success:!0,account:D.data}},q=async()=>{if(!m||!w)throw new Error("User authentication and account selection required");if(r.cashInData.amount<=0)throw new Error("Cash-in amount must be greater than 0");const j=Z.validateCashInData(r.cashInData);if(Z.hasValidationErrors(j))throw new Error("Cash-in validation failed: "+Object.values(j).join(", "));const A={user_id:m.id,account_id:w,type:"cash_in",amount:Z.roundToCentavo(r.cashInData.amount),date:r.cashInData.date,description:Z.sanitizeAccountName(r.cashInData.description.trim()),source:r.cashInData.source?.trim()||null,category:r.cashInData.category?.trim()||null,created_at:new Date().toISOString()};console.log("Creating cash-in transaction for existing account:",A);const D=await at.createTransaction(A);if(!D.success)throw new Error(`Failed to create cash-in transaction: ${D.error}`);console.log("Cash-in transaction created successfully:",D.data);const ne=g.find(xe=>xe.id===w);return await G("account_cash_in","Money cashed in to existing account",{account_id:w,account_name:ne?.account_name,cash_in_amount:r.cashInData.amount,transaction_id:D.data?.id,is_existing_account:!0}),{success:!0,transaction:D.data}},M=async j=>{if(!m)throw new Error("User authentication required");console.log("Creating cash-in transaction for account:",j);const A={user_id:m.id,account_id:j,type:"cash_in",amount:Z.roundToCentavo(r.cashInData.amount),date:r.cashInData.date,description:Z.sanitizeAccountName(r.cashInData.description.trim()),notes:r.cashInData.source?.trim()?`Source: ${r.cashInData.source.trim()}${r.cashInData.category?` | Category: ${r.cashInData.category.trim()}`:""}`:r.cashInData.category?.trim()||null,created_at:new Date().toISOString()};console.log("Creating cash-in transaction with data:",A);const D=await at.createTransaction(A);if(!D.success)throw new Error(`Failed to create cash-in transaction: ${D.error}`);return console.log("Cash-in transaction created successfully:",D.data),await G("account_cash_in","Initial cash-in transaction created",{account_id:j,amount:r.cashInData.amount,cash_in_details:r.cashInData,transaction_id:D.data?.id}),D.data},G=async(j,A,D)=>{if(m)try{const ne=navigator.userAgent,{error:xe}=await ie.from("system_activity_log").insert({user_id:m.id,activity_type:j,activity_description:A,user_agent:ne,metadata:{...D,account_setup_modal:!0,experience_level:r.accountTypeChoice?.user_experience_level,choice_reason:r.accountTypeChoice?.choice_reason},severity:"info",created_at:new Date().toISOString()});xe?console.error("Failed to create audit log:",xe):console.log("Audit log created successfully for:",j)}catch(ne){console.error("Exception creating audit log:",ne)}},Q=j=>{console.log("Tip clicked:",j)},ae=j=>{X({hasError:!0,error:j,showErrorModal:!0})},de=()=>{X({hasError:!1,error:null,showErrorModal:!1})},fe=()=>{de()},ye=j=>{const A=g.map(ne=>ne.account_name?.toLowerCase()||""),D=Z.validateAccountDataWithDetails(j,A);return!D.isValid&&D.error?(console.log("Validation failed, showing error modal:",D.error),ae(D.error),!1):(de(),!0)},be=j=>{const A=Z.validateCashInDataWithDetails(j);return!A.isValid&&A.error?(ae(A.error),!1):(de(),!0)};return o?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:1060},children:[e.jsx("div",{className:"w-[95vw] h-[90vh] mx-auto my-auto",children:e.jsxs("div",{className:"w-full h-full flex flex-col bg-white rounded-lg shadow-2xl border border-gray-200",style:{zIndex:1065},children:[e.jsx(ut,{currentStep:r.currentStep,progressPercentage:r.progressPercentage,onClose:Y,onSkipForLater:O,accountType:r.accountData.account_type,onShowMobileSidebar:()=>b(!0)}),r.currentStep==="workflow_choice"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 flex min-h-0",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto pb-20 md:pb-6",children:e.jsx(ct,{userAccounts:g,hasExistingAccounts:f,workflowMode:z,selectedExistingAccount:w,onWorkflowChoice:se,onExistingAccountSelect:le,onContinue:oe})})}),e.jsx("div",{className:"hidden md:flex md:w-1/3 bg-gray-50 border-l border-gray-200 flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto",children:e.jsx(Ne,{currentStep:r.currentStep,accountType:r.accountData.account_type,modalState:r,onTipClick:Q})})})]})}),e.jsx(ke,{currentStep:r.currentStep,onNext:oe,isNextDisabled:z==="cash_in_existing"&&!w,showPrevious:!1})]}),r.currentStep==="account_type_choice"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 flex min-h-0",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto pb-20 md:pb-6",children:e.jsx(ot,{modalState:r,onAccountTypeChoice:C})})}),e.jsx("div",{className:"hidden md:flex md:w-1/3 bg-gray-50 border-l border-gray-200 flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto",children:e.jsx(Ne,{currentStep:r.currentStep,accountType:r.accountData.account_type,modalState:r,onTipClick:Q})})})]})}),e.jsx(ke,{currentStep:r.currentStep,onPrevious:()=>R("workflow_choice"),onNext:()=>C(r.accountData.account_type,r.accountTypeChoice?.user_experience_level||"beginner",r.accountTypeChoice?.choice_reason),isNextDisabled:!r.accountData.account_type})]}),r.currentStep==="account_config"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 flex min-h-0",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto pb-20 md:pb-6",children:e.jsx(lt,{modalState:{...r,validationErrors:{}},updateAccountData:L,updateValidationErrors:()=>{},navigationHandlers:{onPrevious:()=>R("account_type_choice"),onNext:()=>{ye(r.accountData)&&R("cash_in_setup")},isValid:T}})})}),e.jsx("div",{className:"hidden md:flex md:w-1/3 bg-gray-50 border-l border-gray-200 flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto",children:e.jsx(Ne,{currentStep:r.currentStep,accountType:r.accountData.account_type,modalState:r,onTipClick:Q})})})]})}),e.jsx(ke,{currentStep:r.currentStep,onPrevious:()=>R("account_type_choice"),onNext:()=>{ye(r.accountData)&&R("cash_in_setup")},isNextDisabled:r.isSubmitting})]}),r.currentStep==="cash_in_setup"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 flex min-h-0",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto pb-20 md:pb-6",children:e.jsx(dt,{modalState:{...r,validationErrors:{}},updateCashInData:V,updateValidationErrors:()=>{},navigationHandlers:{onPrevious:()=>R("account_config"),onNext:()=>{(r.cashInData.amount>0||r.cashInData.description.trim()!=="")&&!be(r.cashInData)||R("review_confirmation")},isValid:P}})})}),e.jsx("div",{className:"hidden md:flex md:w-1/3 bg-gray-50 border-l border-gray-200 flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto",children:e.jsx(Ne,{currentStep:r.currentStep,accountType:r.accountData.account_type,modalState:r,onTipClick:Q})})})]})}),e.jsx(ke,{currentStep:r.currentStep,onPrevious:()=>R("account_config"),onNext:()=>{(r.cashInData.amount>0||r.cashInData.description.trim()!=="")&&!be(r.cashInData)||R("review_confirmation")},isNextDisabled:!1})]}),r.currentStep==="review_confirmation"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 flex min-h-0",children:e.jsxs("div",{className:"flex w-full h-full",children:[e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto pb-20 md:pb-6",children:e.jsx(mt,{modalState:r,navigationHandlers:{onPrevious:()=>R("cash_in_setup")},onSubmit:B})})}),e.jsx("div",{className:"hidden md:flex md:w-1/3 bg-gray-50 border-l border-gray-200 flex-col",children:e.jsx("div",{className:"p-3 md:p-6 lg:p-8 flex-1 overflow-y-auto",children:e.jsx(Ne,{currentStep:r.currentStep,accountType:r.accountData.account_type,modalState:r,onTipClick:Q})})})]})}),e.jsx(ke,{currentStep:r.currentStep,onPrevious:()=>R("cash_in_setup"),onSubmit:B,isSubmitting:r.isSubmitting})]})]})}),_&&Ye.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 md:hidden flex items-end justify-center animate-fadeIn",style:{zIndex:1070},onClick:()=>b(!1),children:e.jsxs("div",{className:"bg-white rounded-t-2xl shadow-2xl w-full max-h-[80vh] overflow-hidden transition-transform duration-300 ease-out",style:{zIndex:1075,animation:"slideUp 0.3s ease-out"},onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-lightbulb text-blue-600 mr-2"}),"Tips & Help"]}),e.jsx("button",{type:"button",className:"w-8 h-8 flex items-center justify-center rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-200 transition-colors",onClick:()=>b(!1),children:e.jsx("i",{className:"fas fa-times text-lg"})})]}),e.jsx("div",{className:"p-4 overflow-y-auto",style:{maxHeight:"calc(80vh - 60px)"},children:e.jsx(Ne,{currentStep:r.currentStep,accountType:r.accountData.account_type,modalState:r,onTipClick:Q})})]})}),document.body),I&&Ye.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:1070},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl border border-gray-200 max-w-md w-full mx-4",style:{zIndex:1075},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[e.jsx("i",{className:"fas fa-clock text-yellow-500 mr-2"}),"Skip Account Setup"]}),e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 transition-colors",onClick:re,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("i",{className:"fas fa-clock text-yellow-500",style:{fontSize:"3rem"}}),e.jsx("h4",{className:"mt-3 mb-2 text-lg font-medium text-gray-900",children:"Skip for Later?"}),e.jsx("p",{className:"text-gray-600 mb-0",children:"Account setup will be postponed for 25 minutes."})]}),e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-info-circle text-yellow-600 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:"Important:"}),e.jsx("div",{className:"text-yellow-700 text-sm",children:"This setup modal will reappear in about 25 minutes if your account remains empty or not fully set up."})]})]})}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"fas fa-lightbulb text-blue-600 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"Tip:"}),e.jsx("div",{className:"text-blue-700 text-sm",children:"Setting up your account now takes just a few minutes and helps you start tracking your finances immediately."})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[e.jsxs("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",onClick:re,children:[e.jsx("i",{className:"fas fa-arrow-left mr-1"}),"Continue Setup"]}),e.jsxs("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-yellow-600 border border-transparent rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors",onClick:J,children:[e.jsx("i",{className:"fas fa-clock mr-1"}),"Skip for 25 Minutes"]})]})]})}),document.body)]}),H.showErrorModal&&Ye.createPortal(e.jsx(Lt,{isOpen:H.showErrorModal,error:H.error,onClose:()=>X(j=>({...j,showErrorModal:!1})),onRetry:fe}),document.body)]}):null},xt=i.memo(({show:t,userName:s,onClose:a})=>{const{user:u}=$e();if(!t)return null;const n=()=>{const x=new Date().getHours();return x<12?"Good morning":x<18?"Good afternoon":"Good evening"},o=u?.user_metadata?.avatar_url||"",m=s.charAt(0).toUpperCase();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden mb-3 animate__animated animate__fadeInDown",children:e.jsx("div",{className:"relative overflow-hidden rounded-xl shadow-md mobile-welcome-gradient",children:e.jsxs("div",{className:"relative px-3 py-2.5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[o?e.jsx("img",{src:o,alt:s,className:"w-9 h-9 rounded-xl object-cover border-2 border-white/30",onError:x=>{x.currentTarget.style.display="none";const v=x.currentTarget.nextElementSibling;v&&(v.style.display="flex")}}):null,e.jsx("div",{className:`w-9 h-9 rounded-xl bg-white/20 items-center justify-center text-white text-sm font-bold border-2 border-white/30 ${o?"hidden":"flex"}`,children:m}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-white/70 text-[9px] font-medium leading-none m-0",children:n()}),e.jsxs("h4",{className:"text-white text-xs font-bold truncate max-w-[140px] leading-none m-0",children:[s,"!"]})]})]}),e.jsx("button",{type:"button",className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-white hover:bg-white/30 transition-colors flex-shrink-0",onClick:a,"aria-label":"Close",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]})})}),e.jsxs("div",{className:"alert animate__animated animate__fadeIn shadow-sm border-0 mb-3 hidden md:block",role:"alert",style:{borderLeft:"4px solid #6366f1",borderRadius:"8px",background:"linear-gradient(to right, rgba(99, 102, 241, 0.1), transparent)"},children:[e.jsx("button",{type:"button",className:"close",onClick:a,"aria-label":"Close",children:e.jsx("span",{"aria-hidden":"true",children:"×"})}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"welcome-icon mr-3",style:{backgroundColor:"rgba(99, 102, 241, 0.2)"},children:e.jsx("i",{className:"fas fa-chart-line fa-2x text-primary"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"alert-heading font-weight-bold mb-1 text-gray-800 h5",children:["Welcome back, ",s,"!"]}),e.jsx("p",{className:"mb-0 text-gray-600",children:"Here's a summary of your finances. You're doing great!"})]})]})]}),e.jsx("style",{children:`
        .mobile-welcome-gradient {
          background: linear-gradient(135deg, #6366f1 0%, #4f46e5 50%, #4338ca 100%);
        }
      `})]})});xt.displayName="WelcomeMessage";const Ut=({invitations:t,onAcceptInvite:s,onRejectInvite:a})=>{const[u,n]=i.useState(!1);return t.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden mb-3 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-sm overflow-hidden border border-blue-100",children:[e.jsxs("button",{onClick:()=>n(!u),className:"w-full p-3 flex items-center justify-between bg-transparent border-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-envelope text-white text-xs"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-[10px] text-blue-600 font-medium",children:"Family Invitations"}),e.jsxs("p",{className:"text-xs font-bold text-gray-800",children:[t.length," pending"]})]})]}),e.jsx("i",{className:`fas fa-chevron-${u?"up":"down"} text-blue-500 text-xs transition-transform`})]}),u&&e.jsx("div",{className:"px-3 pb-3 space-y-2 animate__animated animate__fadeIn",children:t.map(o=>{const m=o.inviter_email||"another user";return e.jsxs("div",{className:"bg-white rounded-lg p-2.5 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-users text-indigo-500 text-[10px]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:m}),e.jsx("p",{className:"text-xs font-semibold text-gray-800 truncate",children:o.family_name})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex-1 py-1.5 px-2 bg-green-500 hover:bg-green-600 text-white text-[10px] font-medium rounded-lg flex items-center justify-center gap-1 transition-colors",onClick:()=>s(o.id),children:[e.jsx("i",{className:"fas fa-check text-[8px]"}),"Accept"]}),e.jsxs("button",{className:"flex-1 py-1.5 px-2 bg-red-500 hover:bg-red-600 text-white text-[10px] font-medium rounded-lg flex items-center justify-center gap-1 transition-colors",onClick:()=>a(o.id),children:[e.jsx("i",{className:"fas fa-times text-[8px]"}),"Decline"]})]})]},o.id)})})]})}),e.jsxs("div",{className:"alert alert-info shadow-sm animate__animated animate__fadeIn mb-3 hidden md:block",children:[e.jsx("h4",{className:"alert-heading h5",children:"Pending Invitations"}),t.map(o=>{const m=o.inviter_email||"another user";return e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2 pb-2 border-bottom",children:[e.jsxs("p",{className:"mb-0 small",children:["You have been invited by ",e.jsx("strong",{children:m})," to join the ",e.jsx("strong",{children:o.family_name})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-success btn-sm mr-2",onClick:()=>s(o.id),children:"Accept"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>a(o.id),children:"Reject"})]})]},o.id)})]})]})},ht=i.memo(({insights:t,expandedInsight:s,onToggleInsightExpand:a,onRefreshInsights:u})=>{const[n,o]=i.useState(!1),[m,x]=i.useState(null),v=async()=>{u&&(o(!0),u(),setTimeout(()=>o(!1),600))},y=c=>{switch(c){case"success":return{bgColor:"bg-emerald-50",iconBg:"bg-emerald-500",textColor:"text-emerald-700",borderColor:"border-emerald-200",icon:"fa-check-circle"};case"warning":return{bgColor:"bg-amber-50",iconBg:"bg-amber-500",textColor:"text-amber-700",borderColor:"border-amber-200",icon:"fa-exclamation-triangle"};case"danger":return{bgColor:"bg-rose-50",iconBg:"bg-rose-500",textColor:"text-rose-700",borderColor:"border-rose-200",icon:"fa-exclamation-circle"};default:return{bgColor:"bg-blue-50",iconBg:"bg-blue-500",textColor:"text-blue-700",borderColor:"border-blue-200",icon:"fa-info-circle"}}};return t.length===0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-4 text-center border border-indigo-100",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-white shadow-sm flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-lightbulb text-indigo-400 text-lg"})}),e.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"No Insights Yet"}),e.jsx("p",{className:"text-[10px] text-gray-500 mb-3",children:"Add transactions to get personalized tips"}),e.jsxs(ce,{to:"/transactions/add",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-indigo-500 text-white text-[10px] font-medium rounded-lg",children:[e.jsx("i",{className:"fas fa-plus text-[8px]"}),"Add Transaction"]})]})}),e.jsx("div",{className:"desktop-insights-empty",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card shadow-sm border-left-info",children:e.jsx("div",{className:"card-body p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-lightbulb text-3xl text-gray-300 mb-3"}),e.jsx("h5",{className:"text-gray-700 mb-1.5 text-lg font-semibold",children:"No Insights Yet"}),e.jsx("p",{className:"text-gray-500 mb-2 text-xs",children:"As you add more transactions over time, we'll analyze your financial patterns and provide personalized insights to help you improve your financial health."}),e.jsxs(ce,{to:"/transactions/add",className:"inline-block w-auto px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-1"}),"Add More Transactions"]})]})})})})}),e.jsx("style",{children:`
          .desktop-insights-empty { display: none; }
          @media (min-width: 768px) {
            .desktop-insights-empty { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; margin-bottom: 1rem; }
          }
        `})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block md:hidden mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h6",{className:"text-[10px] font-bold text-indigo-600 uppercase tracking-wide flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-lightbulb text-[9px]"}),"Insights",e.jsx("span",{className:"bg-indigo-100 text-indigo-600 px-1.5 py-0.5 rounded-full text-[9px]",children:t.length})]}),u&&e.jsx("button",{onClick:v,disabled:n,className:"w-7 h-7 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 hover:bg-gray-200 transition-colors",children:e.jsx("i",{className:`fas fa-sync-alt text-[10px] ${n?"fa-spin":""}`})})]}),e.jsx("div",{className:"space-y-2",children:t.map((c,g)=>{const h=y(c.type),f=m===g;return e.jsxs("div",{className:`${h.bgColor} rounded-xl border ${h.borderColor} overflow-hidden transition-all duration-200 ${n?"opacity-50":""}`,children:[e.jsxs("button",{onClick:()=>x(f?null:g),className:"w-full p-3 flex items-start gap-3 text-left bg-transparent border-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg ${h.iconBg} flex items-center justify-center flex-shrink-0`,children:e.jsx("i",{className:`fas ${c.icon||h.icon} text-white text-xs`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-[10px] font-bold ${h.textColor} uppercase tracking-wide mb-0.5`,children:c.title}),e.jsx("p",{className:`text-[11px] text-gray-700 ${f?"":"line-clamp-2"}`,children:c.description})]}),e.jsx("i",{className:`fas fa-chevron-${f?"up":"down"} text-gray-400 text-[10px] mt-1`})]}),f&&e.jsx("div",{className:"px-3 pb-3 animate__animated animate__fadeIn",children:e.jsx("div",{className:"ml-11 pt-2 border-t border-gray-200/50",children:e.jsxs("p",{className:"text-[10px] text-gray-600 leading-relaxed",children:[c.type==="success"&&"Keep up the good work! This habit helps you reach your financial goals faster.",c.type==="warning"&&"Consider reviewing your budget to address this before it affects your finances.",c.type==="danger"&&"This needs attention. Visit Budgets to adjust your spending plan.",c.type==="info"&&"Use this information to make better financial decisions."]})})})]},`insight-mobile-${g}`)})})]}),e.jsx("div",{className:"desktop-insights-section",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h6",{className:"text-xs font-bold text-primary uppercase mb-0",children:"Financial Insights"}),u&&t.length>0&&e.jsxs("button",{onClick:v,disabled:n,className:`btn btn-sm btn-outline-primary shadow-sm refresh-btn px-2 py-1 text-xs ${n?"refreshing":""}`,children:[e.jsx("i",{className:`fas fa-sync-alt text-xs ${n?"fa-spin":""}`}),e.jsx("span",{className:"ml-1",children:n?"Refreshing...":"Refresh"})]})]}),e.jsx("div",{className:"row",children:t.map((c,g)=>e.jsx("div",{className:`col-md-${12/t.length} col-12 mb-3 ${g===0?"new-insight":""}`,children:e.jsx("div",{className:`card insight-card border-left-${c.type} shadow-sm h-100 py-2 animate__animated animate__fadeIn ${n?"refreshing":""}`,style:{animationDelay:`${g*.1}s`},children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:`text-xs font-weight-bold text-${c.type} text-uppercase mb-1 small`,children:c.title}),e.jsx("div",{className:"h6 mb-0 font-weight-normal text-gray-800 small",children:c.description}),s===c.title&&e.jsxs("div",{className:"mt-3 text-sm text-gray-600 animate__animated animate__fadeIn",children:[c.type==="success"&&e.jsx("p",{className:"small",children:"Keep up the good work! Maintaining this habit will help you reach your financial goals faster."}),c.type==="warning"&&e.jsx("p",{className:"small",children:"Consider reviewing your budget to address this issue before it affects your financial health."}),c.type==="danger"&&e.jsx("p",{className:"small",children:"This requires immediate attention. Visit the Budget section to make adjustments to your spending plan."}),c.type==="info"&&e.jsx("p",{className:"small",children:"This information can help you make better financial decisions going forward."})]}),e.jsx("div",{className:"insight-action",onClick:()=>a(c.title),children:s===c.title?"Show less":"Learn more"})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:`fas ${c.icon} fa-2x text-gray-300`})})]})})})},`insight-${g}`))})]})}),e.jsx("style",{children:`
        .desktop-insights-section { display: none; }
        @media (min-width: 768px) {
          .desktop-insights-section { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; margin-bottom: 1rem; }
        }
      `})]})});ht.displayName="FinancialInsights";const gt=i.memo(({dateFilter:t,typeFilter:s,categoryFilter:a,customStartDate:u,customEndDate:n,filteredTransactionsCount:o,totalTransactionsCount:m,expenseCategories:x,incomeCategories:v,onDateFilterChange:y,onTypeFilterChange:c,onCategoryFilterChange:g,onCustomStartDateChange:h,onCustomEndDateChange:f,onClearFilters:F})=>{const[w,K]=i.useState(!1),z=p=>{switch(p){case"custom":return"Custom";case"current-month":return"This Month";case"last-3-months":return"3 Months";case"last-6-months":return"6 Months";case"last-year":return"Year";default:return"All"}},k=p=>{const _=x.find(H=>H.id===p);if(_)return _.category_name;const b=v.find(H=>H.id===p);return b?b.category_name:"Unknown Category"},I=t!=="all"||s!=="all"||a!=="all";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block md:hidden mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[e.jsxs("button",{onClick:()=>K(!w),className:`flex-shrink-0 flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[11px] font-medium transition-all ${I?"bg-indigo-500 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx("i",{className:"fas fa-sliders-h text-[10px]"}),"Filters",I&&e.jsx("span",{className:"w-4 h-4 rounded-full bg-white/30 flex items-center justify-center text-[9px]",children:(t!=="all"?1:0)+(s!=="all"?1:0)+(a!=="all"?1:0)})]}),["current-month","last-3-months","all"].map(p=>e.jsx("button",{onClick:()=>y(p),className:`flex-shrink-0 px-3 py-1.5 rounded-full text-[11px] font-medium transition-all ${t===p?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:z(p)},p)),s!=="all"&&e.jsx("span",{className:`flex-shrink-0 px-3 py-1.5 rounded-full text-[11px] font-medium ${s==="income"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:s.charAt(0).toUpperCase()+s.slice(1)}),I&&e.jsx("button",{onClick:F,className:"flex-shrink-0 w-7 h-7 rounded-full bg-gray-200 text-gray-500 flex items-center justify-center hover:bg-gray-300 transition-colors",children:e.jsx("i",{className:"fas fa-times text-[10px]"})})]}),w&&e.jsxs("div",{className:"mt-2 bg-white rounded-xl shadow-lg border border-gray-100 p-3 animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Date"}),e.jsxs("select",{className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400",value:t,onChange:p=>y(p.target.value),children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"current-month",children:"This Month"}),e.jsx("option",{value:"last-3-months",children:"Last 3 Months"}),e.jsx("option",{value:"last-6-months",children:"Last 6 Months"}),e.jsx("option",{value:"last-year",children:"Last Year"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Type"}),e.jsxs("select",{className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400",value:s,onChange:p=>c(p.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"income",children:"Income"}),e.jsx("option",{value:"expense",children:"Expense"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"Category"}),e.jsxs("select",{className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700 focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400",value:a,onChange:p=>g(p.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),e.jsx("optgroup",{label:"Expenses",children:x.map(p=>e.jsx("option",{value:p.id,children:p.category_name},p.id))}),e.jsx("optgroup",{label:"Income",children:v.map(p=>e.jsx("option",{value:p.id,children:p.category_name},p.id))})]})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"From"}),e.jsx("input",{type:"date",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700",value:u,onChange:p=>h(p.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase mb-1 block",children:"To"}),e.jsx("input",{type:"date",className:"w-full px-2 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-[11px] text-gray-700",value:n,onChange:p=>f(p.target.value)})]})]})]}),e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100 flex items-center justify-between",children:[e.jsxs("span",{className:"text-[10px] text-gray-500",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:o})," of ",m," transactions"]}),e.jsx("button",{onClick:()=>K(!1),className:"text-[10px] text-indigo-600 font-medium",children:"Done"})]})]})]}),e.jsx("div",{className:"row mb-4 hidden md:flex",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header py-3 flex items-center justify-between",children:[e.jsxs("h6",{className:"m-0 font-bold text-primary flex items-center text-sm",children:[e.jsx("i",{className:"fas fa-filter mr-2 text-xs"}),"Filter Data"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-secondary flex items-center px-2 py-1 text-xs",onClick:F,children:[e.jsx("i",{className:"fas fa-times text-xs"}),e.jsx("span",{className:"ml-1",children:"Clear Filters"})]})]}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-3 col-md-6 mb-3",children:[e.jsx("label",{className:"form-label text-xs font-bold text-gray-600",children:"Date Range"}),e.jsxs("select",{className:"form-control form-control-sm text-sm py-1.5",value:t,onChange:p=>y(p.target.value),children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"current-month",children:"Current Month"}),e.jsx("option",{value:"last-3-months",children:"Last 3 Months"}),e.jsx("option",{value:"last-6-months",children:"Last 6 Months"}),e.jsx("option",{value:"last-year",children:"Last Year"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})]}),t==="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-lg-2 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label text-xs font-bold text-gray-600",children:"Start"}),e.jsx("input",{type:"date",className:"form-control form-control-sm text-sm py-1.5",value:u,onChange:p=>h(p.target.value)})]}),e.jsxs("div",{className:"col-lg-2 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label text-xs font-bold text-gray-600",children:"End"}),e.jsx("input",{type:"date",className:"form-control form-control-sm text-sm py-1.5",value:n,onChange:p=>f(p.target.value)})]})]}),e.jsxs("div",{className:"col-lg-2 col-md-6 mb-3",children:[e.jsx("label",{className:"form-label text-xs font-bold text-gray-600",children:"Type"}),e.jsxs("select",{className:"form-control form-control-sm text-sm py-1.5",value:s,onChange:p=>c(p.target.value),children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"income",children:"Income"}),e.jsx("option",{value:"expense",children:"Expense"})]})]}),e.jsxs("div",{className:"col-lg-3 col-md-6 mb-3",children:[e.jsx("label",{className:"form-label text-xs font-bold text-gray-600",children:"Category"}),e.jsxs("select",{className:"form-control form-control-sm text-sm py-1.5",value:a,onChange:p=>g(p.target.value),children:[e.jsx("option",{value:"all",children:"All"}),x.map(p=>e.jsx("option",{value:p.id,children:p.category_name},p.id)),v.map(p=>e.jsx("option",{value:p.id,children:p.category_name},p.id))]})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"flex items-center text-xs text-gray-600 flex-wrap gap-1",children:[e.jsx("i",{className:"fas fa-info-circle mr-1 text-xs"}),e.jsxs("span",{children:["Showing ",o," of ",m," transactions",t!=="all"&&e.jsx("span",{className:"badge badge-primary ml-1 text-xs px-1.5 py-0.5",children:z(t)}),s!=="all"&&e.jsx("span",{className:"badge badge-info ml-1 text-xs px-1.5 py-0.5",children:s.charAt(0).toUpperCase()+s.slice(1)}),a!=="all"&&e.jsx("span",{className:"badge badge-success ml-1 text-xs px-1.5 py-0.5",children:k(a)})]})]})})})]})]})})})]})});gt.displayName="FilterControls";const pt=i.memo(({income:t,expenses:s,balance:a,savingsRate:u,activeTip:n,onToggleTip:o})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"block md:hidden mb-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-2xl p-4 mb-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Net Balance"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-wallet text-white text-sm"})})]}),e.jsx("div",{className:"text-white text-2xl font-bold mb-1",children:ue(a)}),e.jsx("div",{className:"flex items-center gap-1",children:e.jsxs("span",{className:`text-xs font-medium ${a>=0?"text-green-300":"text-red-300"}`,children:[e.jsx("i",{className:`fas fa-${a>=0?"arrow-up":"arrow-down"} text-[10px] mr-1`}),a>=0?"Positive":"Negative"," balance"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-arrow-up text-emerald-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Income"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:ue(t)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-rose-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-arrow-down text-rose-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Expenses"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:ue(s)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-amber-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-piggy-bank text-amber-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Saved"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:we(u)}),e.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-1",children:e.jsx("div",{className:"bg-amber-500 h-1 rounded-full transition-all duration-500",style:{width:`${Math.min(u,100)}%`}})})]})]})]}),e.jsxs("div",{className:"desktop-summary-cards",children:[e.jsx("div",{className:"col-xl-3 col-md-6 mb-4",children:e.jsx("div",{className:"card border-left-primary shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-bold text-primary uppercase mb-1 flex items-center",children:["Monthly Income",e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:m=>o("income",m),"aria-label":"Income information"}),n==="income"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Monthly Income"}),e.jsx("div",{className:"tip-description",children:"Total income for the selected period. This includes all sources of income like salary, freelance work, investments, and other earnings."})]})]})]}),e.jsx("div",{className:"text-lg font-bold text-gray-800 truncate",children:ue(t)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-calendar fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6 mb-4",children:e.jsx("div",{className:"card border-left-danger shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-bold text-danger uppercase mb-1 flex items-center",children:["Monthly Expenses",e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:m=>o("expenses",m),"aria-label":"Expenses information"}),n==="expenses"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Monthly Expenses"}),e.jsx("div",{className:"tip-description",children:"Total expenses for the selected period. This includes all categories of spending like housing, food, transportation, entertainment, and other costs."})]})]})]}),e.jsx("div",{className:"text-lg font-bold text-gray-800 truncate",children:ue(s)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-solid fa-peso-sign fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6 mb-4",children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-bold text-info uppercase mb-1 flex items-center",children:["Balance",e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:m=>o("balance",m),"aria-label":"Balance information"}),n==="balance"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Net Balance"}),e.jsx("div",{className:"tip-description",children:"The difference between your income and expenses for the selected period. A positive balance means you earned more than you spent."})]})]})]}),e.jsx("div",{className:"text-lg font-bold text-gray-800 truncate",children:ue(a)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-clipboard-list fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6 mb-4",children:e.jsx("div",{className:"card border-left-success shadow h-100 py-2",children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-bold text-success uppercase mb-1 flex items-center",children:["Savings Rate",e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:m=>o("savings",m),"aria-label":"Savings rate information"}),n==="savings"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Savings Rate"}),e.jsx("div",{className:"tip-description",children:"Percentage of income saved after expenses. Financial experts recommend saving at least 20% of your income for long-term financial health."})]})]})]}),e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"text-lg font-bold text-gray-800 mr-3",children:we(u)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"progress progress-sm mr-2",children:e.jsx("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${Math.min(u,100)}%`},"aria-valuenow":Math.min(u,100),"aria-valuemin":0,"aria-valuemax":100})})})]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-percentage fa-2x text-gray-300"})})]})})})})]}),e.jsx("style",{children:`
        .desktop-summary-cards { display: none; }
        @media (min-width: 768px) {
          .desktop-summary-cards { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; }
        }
      `})]}));pt.displayName="SummaryCards";const nt=(t,s=!1)=>{if(!t||t.length===0)return null;const a=new Map;t.forEach(x=>{const v=new Date(x.date),y=`${v.getFullYear()}-${String(v.getMonth()).padStart(2,"0")}`;a.has(y)||a.set(y,{income:0,expenses:0});const c=a.get(y),g=parseFloat(x.amount?.toString()||"0")||0;x.type==="income"?c.income+=g:x.type==="expense"&&(c.expenses+=g)});const u=Array.from(a.entries()).sort((x,v)=>x[0].localeCompare(v[0])).slice(s?-6:-12);if(u.length===0)return null;const n=[],o=[],m=[];return u.forEach(([x,v])=>{const[y,c]=x.split("-").map(Number),g=new Date(y,c);n.push(g.toLocaleDateString("en-US",{month:"short",year:s?void 0:"2-digit"})),o.push(v.income),m.push(v.expenses)}),{chart:{type:"column",style:{fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},backgroundColor:"transparent",animation:{duration:1e3},height:s?200:350,spacing:s?[5,5,5,5]:[10,10,15,10]},title:{text:null},xAxis:{categories:n,crosshair:!0,labels:{style:{color:"#858796",fontSize:s?"9px":"11px"},rotation:s?-45:0}},yAxis:{min:0,title:{text:null},gridLineColor:"#eaecf4",gridLineDashStyle:"dash",labels:{formatter:function(){return s?this.value>=1e3?`₱${(this.value/1e3).toFixed(0)}k`:`₱${this.value}`:ue(this.value)},style:{color:"#858796",fontSize:s?"9px":"11px"}}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>₱{point.y:,.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0,style:{fontSize:s?"10px":"12px",fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},valuePrefix:"₱"},plotOptions:{column:{pointPadding:s?.1:.2,borderWidth:0,borderRadius:3},series:{animation:{duration:1e3}}},legend:{enabled:!s},series:[{name:"Income",data:o,color:"#1cc88a",type:"column"},{name:"Expenses",data:m,color:"#e74a3b",type:"column"}],credits:{enabled:!1}}},rt=(t,s,a=!1)=>{const u=t?.filter(m=>m.type==="expense")||[];if(u.length===0)return null;const n=new Map;u.forEach(m=>{let x="Uncategorized";const v=m,y=m.category_id||v.expense_category_id;if(y&&s?.length>0){const h=s.find(f=>f.id===y);h&&(x=h.category_name)}const c=n.get(x)||0,g=parseFloat(m.amount?.toString()||"0")||0;n.set(x,c+g)});let o=Array.from(n.entries()).filter(([m,x])=>x>0).map(([m,x])=>({name:m,y:x})).sort((m,x)=>x.y-m.y);if(a&&o.length>5){const m=o.slice(0,5),x=o.slice(5).reduce((v,y)=>v+y.y,0);x>0&&m.push({name:"Other",y:x}),o=m}return o.length===0?null:{chart:{type:"pie",backgroundColor:"transparent",style:{fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},height:a?180:350},title:{text:null},tooltip:{pointFormat:"<b>{point.name}</b>: {point.percentage:.1f}%<br/>₱{point.y:,.0f}",valuePrefix:"₱",style:{fontSize:a?"10px":"12px"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!a,format:"<b>{point.name}</b>: {point.percentage:.1f}%",style:{fontWeight:"normal",fontSize:"10px"},connectorWidth:0,distance:15},showInLegend:a,size:a?"90%":"85%",innerSize:a?"40%":"0%"}},legend:{enabled:a,layout:"horizontal",align:"center",verticalAlign:"bottom",itemStyle:{fontSize:"9px"},symbolRadius:2,itemMarginTop:2},series:[{name:"Expenses",colorByPoint:!0,data:o}],credits:{enabled:!1}}},ft=i.memo(({dateFilter:t,customStartDate:s,customEndDate:a,activeTip:u,onToggleTip:n,transactions:o,expenseCategories:m})=>{const[x,v]=i.useState("bar"),y=i.useMemo(()=>nt(o,!1),[o]),c=i.useMemo(()=>rt(o,m,!1),[o,m]),g=i.useMemo(()=>nt(o,!0),[o]),h=i.useMemo(()=>rt(o,m,!0),[o,m]),f=i.useMemo(()=>t==="all"?"All Time Overview":t==="current-month"?"Current Month Overview":t==="last-3-months"?"Last 3 Months Overview":t==="last-6-months"?"Last 6 Months Overview":t==="last-year"?"Last Year Overview":t==="custom"&&s&&a?`Custom Range (${new Date(s).toLocaleDateString()} - ${new Date(a).toLocaleDateString()})`:"Monthly Overview",[t,s,a]),F=o?.some(w=>w.type==="expense")||!1;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>v("bar"),className:`flex-1 py-2.5 text-[11px] font-semibold transition-colors ${x==="bar"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50/50":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("i",{className:"fas fa-chart-bar mr-1.5 text-[10px]"}),"Overview"]}),e.jsxs("button",{onClick:()=>v("pie"),className:`flex-1 py-2.5 text-[11px] font-semibold transition-colors ${x==="pie"?"text-indigo-600 border-b-2 border-indigo-600 bg-indigo-50/50":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("i",{className:"fas fa-chart-pie mr-1.5 text-[10px]"}),"Categories"]})]}),e.jsx("div",{className:"p-3",children:x==="bar"?g?e.jsxs("div",{className:"animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#1cc88a]"}),"Income"]}),e.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-gray-600",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-[#e74a3b]"}),"Expenses"]})]}),e.jsx(Fe,{highcharts:Me,options:g})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-chart-bar text-gray-400 text-lg"})}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"No transaction data yet"}),e.jsxs(ce,{to:"/transactions/add",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-indigo-500 text-white text-[11px] font-medium rounded-lg",children:[e.jsx("i",{className:"fas fa-plus text-[9px]"}),"Add Transaction"]})]}):h&&F?e.jsx("div",{className:"animate__animated animate__fadeIn",children:e.jsx(Fe,{highcharts:Me,options:h})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-chart-pie text-gray-400 text-lg"})}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"No expense data to categorize"}),e.jsxs(ce,{to:"/transactions/add",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-indigo-500 text-white text-[11px] font-medium rounded-lg",children:[e.jsx("i",{className:"fas fa-plus text-[9px]"}),"Add Expense"]})]})})]})}),e.jsxs("div",{className:"desktop-charts-section",children:[e.jsx("div",{className:"col-xl-8 col-lg-7 mb-4",children:e.jsxs("div",{className:"card shadow mb-4",children:[e.jsx("div",{className:"card-header py-3 flex flex-row items-center justify-between",children:e.jsxs("h6",{className:"m-0 font-bold text-primary flex items-center text-sm",children:[f,e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:w=>n("monthlyChart",w)}),u==="monthlyChart"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Monthly Overview"}),e.jsx("div",{className:"tip-description",children:"Comparison of your income vs expenses over time. This helps you visualize spending patterns and identify months where you saved or overspent."})]})]})]})}),e.jsx("div",{className:"card-body p-3",children:y?e.jsx(Fe,{highcharts:Me,options:y}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-chart-bar text-3xl text-gray-300"})}),e.jsx("h5",{className:"text-gray-700 mb-1.5 text-lg",children:"No Data"}),e.jsx("p",{className:"text-gray-500 mb-4 text-xs",children:"There's no transaction data to display for the selected period. Add some transactions to see your financial overview."}),e.jsxs(ce,{to:"/transactions/add",className:"inline-block w-auto px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-1"}),"Add Transaction"]})]})})]})}),e.jsx("div",{className:"col-xl-4 col-lg-5 mb-4",children:e.jsxs("div",{className:"card shadow mb-4",children:[e.jsx("div",{className:"card-header py-3 flex flex-row items-center justify-between",children:e.jsxs("h6",{className:"m-0 font-bold text-primary flex items-center text-sm",children:["Expense Categories",e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:w=>n("categoryChart",w)}),u==="categoryChart"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Expense Breakdown"}),e.jsx("div",{className:"tip-description",children:"Shows how your expenses are distributed across different categories. This helps identify your biggest spending areas."})]})]})]})}),e.jsx("div",{className:"card-body p-3",children:c&&F?e.jsx(Fe,{highcharts:Me,options:c}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-chart-pie text-3xl text-gray-300"})}),e.jsx("h5",{className:"text-gray-700 mb-1.5 text-lg",children:"No Expenses"}),e.jsx("p",{className:"text-gray-500 mb-4 text-xs",children:"There are no expense transactions to categorize for the selected period."}),e.jsxs(ce,{to:"/transactions/add",className:"inline-block w-auto px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-1"}),"Add Expense"]})]})})]})})]}),e.jsx("style",{children:`
        .desktop-charts-section { display: none; }
        @media (min-width: 768px) {
          .desktop-charts-section { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; }
        }
      `})]})});ft.displayName="ChartSection";const yt=i.memo(({trends:t,filteredTransactions:s,dateFilter:a,activeTip:u,onToggleTip:n,getFilteredChartTitle:o})=>{if(t.length>0){const m=[...t].sort((x,v)=>x.change-v.change);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h6",{className:"text-[11px] font-bold text-gray-800 flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-chart-line text-indigo-500 text-[10px]"}),"Spending Trends"]}),e.jsxs("span",{className:"text-[9px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full",children:[t.length," categories"]})]}),e.jsx("div",{className:"divide-y divide-gray-50",children:m.slice(0,5).map((x,v)=>e.jsxs("div",{className:"px-3 py-2.5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2.5 min-w-0 flex-1",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${x.change<0?"bg-emerald-100":"bg-rose-100"}`,children:e.jsx("i",{className:`fas fa-arrow-${x.change<0?"down":"up"} text-xs ${x.change<0?"text-emerald-600":"text-rose-600"}`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-[11px] font-semibold text-gray-800 truncate",children:x.category}),e.jsx("p",{className:"text-[9px] text-gray-500",children:ue(x.currentAmount)})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0 ml-2",children:[e.jsxs("span",{className:`text-xs font-bold ${x.change<0?"text-emerald-600":"text-rose-600"}`,children:[x.change<0?"−":"+",we(Math.abs(x.change))]}),e.jsx("p",{className:"text-[8px] text-gray-400",children:"vs last period"})]})]},`trend-mobile-${v}`))}),t.length>5&&e.jsx("div",{className:"px-3 py-2 border-t border-gray-100 text-center",children:e.jsxs("span",{className:"text-[10px] text-gray-500",children:["+",t.length-5," more categories"]})})]})}),e.jsx("div",{className:"desktop-trends-section",children:e.jsx("div",{className:"col-12 mb-4",children:e.jsxs("div",{className:"card shadow h-100",children:[e.jsx("div",{className:"card-header py-3 flex flex-row items-center justify-between",children:e.jsxs("h6",{className:"m-0 font-bold text-primary flex items-center text-sm",children:["Monthly Spending Trends ",a!=="all"&&`(${o().replace(" Overview","")})`,e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:x=>n("trends",x)}),u==="trends"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Monthly Spending Trends"}),e.jsx("div",{className:"tip-description",children:"See how your spending is changing compared to previous periods. Green arrows indicate decreased spending, while red arrows show increased spending."})]})]})]})}),e.jsx("div",{className:"card-body p-3",children:e.jsx("div",{className:"row",children:t.map((x,v)=>e.jsx("div",{className:"col-lg-3 col-md-6 mb-4",children:e.jsx("div",{className:`card border-left-${x.change<0?"success":"danger"} shadow-sm h-100 py-2`,children:e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"text-xs font-weight-bold text-uppercase mb-1 text-gray-600 small",children:x.category}),e.jsxs("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:[x.change<0?"↓":"↑"," ",we(Math.abs(x.change))]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[ue(x.currentAmount)," vs ",ue(x.previousAmount)]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:`fas fa-arrow-${x.change<0?"down":"up"} fa-2x ${x.change<0?"text-success":"text-danger"}`})})]})})})},`trend-${v}`))})})]})})}),e.jsx("style",{children:`
          .desktop-trends-section { display: none; }
          @media (min-width: 768px) {
            .desktop-trends-section { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; }
          }
        `})]})}return s&&s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-100 rounded-2xl p-4 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white shadow-sm flex items-center justify-center mx-auto mb-2",children:e.jsx("i",{className:"fas fa-chart-line text-gray-400 text-sm"})}),e.jsx("p",{className:"text-[11px] font-medium text-gray-700 mb-1",children:"Need More Data"}),e.jsx("p",{className:"text-[10px] text-gray-500 mb-3",children:"Add transactions to see spending trends"}),e.jsxs(ce,{to:"/transactions/add",className:"inline-flex items-center gap-1 px-3 py-1.5 bg-indigo-500 text-white text-[10px] font-medium rounded-lg",children:[e.jsx("i",{className:"fas fa-plus text-[8px]"}),"Add Transaction"]})]})}),e.jsx("div",{className:"desktop-trends-empty-section",children:e.jsx("div",{className:"col-12 mb-4",children:e.jsxs("div",{className:"card shadow h-100",children:[e.jsx("div",{className:"card-header py-3",children:e.jsxs("h6",{className:"m-0 font-bold text-primary text-sm",children:["Monthly Spending Trends ",a!=="all"&&`(${o().replace(" Overview","")})`]})}),e.jsx("div",{className:"card-body p-3",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-chart-line text-3xl text-gray-300 mb-3"}),e.jsx("h5",{className:"text-gray-700 mb-1.5 text-lg",children:"Not Enough Data"}),e.jsxs("p",{className:"text-gray-500 mb-4 text-xs",children:[a==="all"?"We need at least two months of transaction data to calculate spending trends.":"Not enough data in the selected time period to calculate spending trends. Try selecting a longer time range or adding more transactions.",e.jsx("br",{}),"Continue adding transactions to see how your spending patterns change over time."]}),e.jsx("div",{className:"mt-4",children:e.jsxs(ce,{to:"/transactions/add",className:"inline-block w-auto px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-2"}),"Add More Transactions"]})})]})})]})})}),e.jsx("style",{children:`
          .desktop-trends-empty-section { display: none; }
          @media (min-width: 768px) {
            .desktop-trends-empty-section { display: flex; flex-wrap: wrap; margin-right: -0.75rem; margin-left: -0.75rem; }
          }
        `})]}):null});yt.displayName="TrendsSection";const Oe=i.memo(({budgets:t,onBudgetItemClick:s})=>{if(!t||t.length===0)return e.jsxs("div",{className:"text-center py-3 md:py-5",children:[e.jsx("div",{className:"mb-1.5 md:mb-3",children:e.jsx("i",{className:"fas fa-chart-pie text-xl md:text-3xl text-gray-300"})}),e.jsx("h5",{className:"text-gray-700 mb-1.5 text-sm md:text-lg font-semibold",children:"No Budgets"}),e.jsx("p",{className:"text-gray-500 mb-2 md:mb-4 text-xs hidden md:block",children:"Create budgets to track your spending by category and stay on top of your financial goals."}),e.jsxs(ce,{to:"/budgets/create",className:"inline-block w-auto px-2 md:px-3 py-1.5 md:py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-xs md:text-sm font-normal rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-1 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Create Your First "}),"Budget"]})]});const a=n=>{switch(n){case"danger":return e.jsx("i",{className:"fas fa-exclamation-circle text-danger-color"});case"warning":return e.jsx("i",{className:"fas fa-exclamation-triangle text-warning-color"});default:return e.jsx("i",{className:"fas fa-check-circle text-success-color"})}},u=[...t].sort((n,o)=>{const m={danger:0,warning:1,success:2},x=n.status||"success",v=o.status||"success";if(m[x]!==m[v])return m[x]-m[v];const y=n.percentage||n.spent/n.amount*100;return(o.percentage||o.spent/o.amount*100)-y});return e.jsxs("div",{className:"space-y-3 md:space-y-5",children:[u.map(n=>e.jsxs("div",{className:"bg-white p-2 md:p-4 rounded-lg shadow-sm hover:shadow-md transition-shadow mb-2 md:mb-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5 md:mb-3",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"hidden md:inline",children:a(n.status)}),e.jsx("span",{className:"font-semibold ml-0 md:ml-2 text-[11px] md:text-base truncate max-w-[120px] md:max-w-none",children:n.category||n.name})]}),e.jsxs("span",{className:"text-[9px] md:text-xs text-gray-500 mt-0.5 md:mt-1",children:[e.jsxs("span",{className:"hidden md:inline",children:[n.month||"June"," ",n.year||2025]}),e.jsxs("span",{className:"inline md:hidden",children:[(n.month||"June").substring(0,3)," ",n.year||2025]}),n.period&&e.jsxs("span",{className:"hidden md:inline",children:[" • ",n.period.charAt(0).toUpperCase()+n.period.slice(1)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold",children:e.jsxs("span",{className:`text-[10px] md:text-sm ${n.status==="danger"?"text-danger-color":n.status==="warning"?"text-warning-color":"text-success-color"}`,children:[ue(n.spent)," ",e.jsxs("span",{className:"hidden md:inline",children:["/ ",ue(n.budget||n.amount)]})]})}),e.jsxs("div",{className:"text-[9px] md:text-xs text-gray-500 mt-0.5 md:mt-1",children:[we(n.percentage||(n.spent&&n.amount?n.spent/n.amount*100:0))," ",e.jsx("span",{className:"hidden md:inline",children:"used"})]})]})]}),e.jsxs("div",{className:"progress-container mb-2 md:mb-3",children:[e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:`progress ${n.status}`,style:{width:`${Math.min(100,n.percentage||(n.spent&&n.amount?n.spent/n.amount*100:0))}%`},title:we(n.percentage||(n.spent&&n.amount?n.spent/n.amount*100:0))})}),e.jsx("div",{className:"flex justify-end items-center mt-0.5 md:mt-1",children:e.jsxs("span",{className:`text-[9px] md:text-xs font-medium ${n.remaining&&n.remaining<=0?"text-danger-color":"text-gray-700"}`,children:[ue(n.remaining||(n.amount&&n.spent?n.amount-n.spent:0))," ",e.jsx("span",{className:"hidden md:inline",children:"remaining"}),e.jsx("span",{className:"inline md:hidden",children:"left"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 md:mt-4 pt-1.5 md:pt-3 border-t border-gray-100 gap-1 md:gap-2",children:[s?e.jsxs("button",{onClick:()=>s(n),className:"text-[9px] md:text-xs flex items-center text-primary-500 hover:text-primary-700 transition-colors border-0 bg-transparent cursor-pointer",children:[e.jsx("i",{className:"fas fa-list-ul mr-0.5 md:mr-1 text-[8px] md:text-[10px]"}),e.jsx("span",{className:"hidden md:inline",children:"View related transactions"}),e.jsx("span",{className:"inline md:hidden",children:"View"})]}):e.jsxs(ce,{to:`/transactions?categoryId=${n.id}&month=5&year=2025`,className:"text-[9px] md:text-xs flex items-center text-primary-500 hover:text-primary-700 transition-colors",children:[e.jsx("i",{className:"fas fa-list-ul mr-0.5 md:mr-1 text-[8px] md:text-[10px]"}),e.jsx("span",{className:"hidden md:inline",children:"View related transactions"}),e.jsx("span",{className:"inline md:hidden",children:"View"})]}),e.jsxs(ce,{to:`/budgets/${n.id}`,className:"text-[9px] md:text-xs flex items-center bg-primary-100 text-primary-700 px-1.5 md:px-3 py-0.5 md:py-1 rounded-full hover:bg-primary-200 transition-colors",children:[e.jsx("i",{className:"fas fa-cog mr-0.5 md:mr-1 text-[8px] md:text-[10px]"}),e.jsx("span",{className:"hidden md:inline",children:"Manage budget"}),e.jsx("span",{className:"inline md:hidden",children:"Manage"})]})]})]},n.id)),e.jsx("div",{className:"text-center mt-4 hidden md:block",children:e.jsx(ce,{to:"/budgets",className:"inline-block w-auto px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:"View All Budgets"})})]})});Oe.displayName="BudgetProgress";const Ue=i.memo(({transactions:t,accounts:s=[],goals:a=[],userData:u})=>{const n=i.useMemo(()=>[...t].sort((c,g)=>new Date(g.date).getTime()-new Date(c.date).getTime()),[t]);if(!n||n.length===0)return e.jsxs("div",{className:"text-center py-3 md:py-5",children:[e.jsx("div",{className:"mb-1.5 md:mb-3",children:e.jsx("i",{className:"fas fa-receipt text-xl md:text-3xl text-gray-300"})}),e.jsx("h5",{className:"text-gray-700 mb-1.5 text-sm md:text-lg font-semibold",children:"No Transactions Yet"}),e.jsx("p",{className:"text-gray-500 mb-2 md:mb-4 text-xs hidden md:block",children:"Start tracking your income and expenses to see your recent transactions here."}),e.jsxs(ce,{to:"/transactions/add",className:"inline-block w-auto px-2 md:px-3 py-1.5 md:py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-xs md:text-sm font-normal rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-xs mr-1 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:"Add Your First "}),"Transaction"]})]});const o=i.useMemo(()=>({Housing:"fa-home",Utilities:"fa-bolt",Groceries:"fa-shopping-cart",Transportation:"fa-truck","Dining Out":"fa-coffee",Entertainment:"fa-film",Healthcare:"fa-heartbeat",Education:"fa-book",Shopping:"fa-shopping-bag","Personal Care":"fa-user",Travel:"fa-map-marker-alt",Subscriptions:"fa-sync",Contribution:"fa-piggy-bank","Goal Contribution":"fa-piggy-bank","Other Expenses":"fa-ellipsis-h",Salary:"fa-money-bill-alt",Freelance:"fa-briefcase",Investments:"fa-chart-line",Gifts:"fa-gift","Other Income":"fa-plus-circle"}),[]),m=i.useCallback(c=>{if(c.goal_id)return"Goal Contribution";if(c.type==="transfer")return"Transfer";if(c.type==="contribution")return"Goal Contribution";let g="Uncategorized";if(c.category_id&&u){const h=c.category_id.toString();if(c.type==="income"){const f=u.incomeCategories.find(F=>F.id.toString()===h);f&&(g=f.category_name)}else{const f=u.expenseCategories.find(F=>F.id.toString()===h);f&&(g=f.category_name)}}return g},[u]),x=i.useCallback(c=>{if(!u){const f=c.toString(),F=s.find(w=>w.id.toString()===f);return F?F.account_name:"Unknown Account"}const g=c.toString(),h=u.accounts.find(f=>f.id.toString()===g);return h?h.account_name:"Unknown Account"},[u,s]),v=i.useCallback(c=>{if(!c)return"Unknown Goal";const g=c.toString(),h=a.find(f=>f.id.toString()===g);return h?h.goal_name:"Unknown Goal"},[a]),y=i.useCallback(c=>o[c]||"fa-tag",[o]);return e.jsxs("div",{className:"transaction-list",children:[n.map((c,g)=>{const h=m(c),f=()=>c.goal_id?"fa-piggy-bank":y(h),F=c.amount>1e4,w=()=>c.goal_id?c.description||`Contribution to ${v(c.goal_id)}`:c.description?c.description:c.notes?c.notes:h==="Contribution"?"Goal Contribution":c.type==="income"?`Income: ${h}`:`Expense: ${h}`,K=()=>{switch(c.type){case"income":return"income";case"expense":return"expense";case"transfer":return"transfer";case"contribution":return"contribution";default:return"expense"}};return e.jsxs(ce,{to:`/transactions/${c.id}`,className:`transaction-item animate__animated animate__fadeIn py-2 md:py-3 px-2 md:px-3 ${F?"border-warning-color border-2":""}`,style:{animationDelay:`${g*.05}s`},children:[e.jsx("div",{className:`transaction-icon ${K()} w-7 h-7 md:w-10 md:h-10 text-xs md:text-sm`,children:e.jsx("i",{className:`fas ${f()}`})}),e.jsxs("div",{className:"transaction-details flex-1 min-w-0 ml-2 md:ml-3",children:[e.jsxs("div",{className:"transaction-title text-[11px] md:text-sm truncate",children:[w(),F&&e.jsx("span",{className:"text-warning-color ml-1 md:ml-2 hidden md:inline",children:e.jsx("i",{className:"fas fa-exclamation-triangle",title:"Unusually large transaction"})})]}),e.jsxs("div",{className:"transaction-category text-[9px] md:text-xs truncate",children:[h,c.account_id?e.jsxs("span",{className:"hidden md:inline",children:[" • ",x(c.account_id)]}):""]})]}),e.jsxs("div",{className:`transaction-amount ${K()} text-[11px] md:text-sm font-semibold`,children:[c.type==="income"?"+":"-",ue(c.amount)]}),e.jsxs("div",{className:"transaction-date hidden md:flex text-xs text-gray-500 ml-3",children:[e.jsx("i",{className:"fas fa-calendar-alt text-muted mr-1"}),Dt(c.date)]})]},c.id)}),e.jsx("div",{className:"text-center mt-4 py-3 hidden md:block",children:e.jsx(ce,{to:"/transactions",className:"inline-block w-auto px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:"View All Transactions"})})]})});Ue.displayName="RecentTransactions";const bt=i.memo(({budgetProgress:t,recentTransactions:s,expenseCategories:a,accounts:u,goals:n,userData:o,activeTip:m,onToggleTip:x,getFilteredUrlParams:v,onBudgetItemClick:y})=>{const[c,g]=i.useState("transactions");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block md:hidden mb-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-gray-100",children:[e.jsxs("button",{onClick:()=>g("transactions"),className:`flex-1 py-3 text-[11px] font-semibold transition-all relative ${c==="transactions"?"text-indigo-600 bg-indigo-50/50":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("i",{className:"fas fa-exchange-alt mr-1.5 text-[10px]"}),"Transactions",s.length>0&&e.jsx("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full text-[9px] ${c==="transactions"?"bg-indigo-200 text-indigo-700":"bg-gray-200 text-gray-600"}`,children:s.length}),c==="transactions"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]}),e.jsxs("button",{onClick:()=>g("budgets"),className:`flex-1 py-3 text-[11px] font-semibold transition-all relative ${c==="budgets"?"text-indigo-600 bg-indigo-50/50":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx("i",{className:"fas fa-chart-pie mr-1.5 text-[10px]"}),"Budgets",t.length>0&&e.jsx("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full text-[9px] ${c==="budgets"?"bg-indigo-200 text-indigo-700":"bg-gray-200 text-gray-600"}`,children:t.length}),c==="budgets"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600"})]})]}),e.jsx("div",{className:"p-3",children:c==="transactions"?e.jsxs("div",{className:"animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-[10px] text-gray-500",children:"Recent activity"}),e.jsxs(ce,{to:`/transactions?${v()}`,className:"text-[10px] text-indigo-600 font-medium flex items-center gap-1",children:["View all",e.jsx("i",{className:"fas fa-chevron-right text-[8px]"})]})]}),e.jsx("div",{className:"max-h-[350px] overflow-y-auto -mx-3 px-3",children:e.jsx(Ue,{transactions:s,categories:a,accounts:u,goals:n,userData:o})})]}):e.jsxs("div",{className:"animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-[10px] text-gray-500",children:"Budget progress"}),e.jsxs(ce,{to:"/budgets",className:"text-[10px] text-indigo-600 font-medium flex items-center gap-1",children:["Manage",e.jsx("i",{className:"fas fa-chevron-right text-[8px]"})]})]}),e.jsx("div",{className:"max-h-[350px] overflow-y-auto -mx-3 px-3",children:e.jsx(Oe,{budgets:t,onBudgetItemClick:y})})]})})]})}),e.jsxs("div",{className:"desktop-bottom-section",children:[e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card shadow mb-4 h-100",children:[e.jsxs("div",{className:"card-header py-3 flex flex-row items-center justify-between",children:[e.jsxs("h6",{className:"m-0 font-bold text-primary flex items-center text-sm",children:["Budget Progress",e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:h=>x("budget",h)}),m==="budget"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Budget Progress"}),e.jsx("div",{className:"tip-description",children:"Track your spending against your budget limits for each category. Green bars indicate you're well under budget, yellow means you're approaching your limit, and red shows where you've exceeded your budget allocations."})]})]})]}),e.jsx(ce,{to:"/budgets",className:"inline-block w-auto px-3 py-1.5 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:"Manage Budgets"})]}),e.jsx("div",{className:"card-body p-3",children:e.jsx("div",{className:"max-h-[445px] overflow-y-auto",children:e.jsx(Oe,{budgets:t,onBudgetItemClick:y})})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card shadow mb-4 h-100 recent-transactions",children:[e.jsxs("div",{className:"card-header py-3 flex flex-row items-center justify-between",children:[e.jsxs("h6",{className:"m-0 font-bold text-primary flex items-center text-sm",children:["Recent Transactions",e.jsxs("div",{className:"ml-2 relative",children:[e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:h=>x("transactions",h)}),m==="transactions"&&e.jsxs("div",{className:"tip-box",children:[e.jsx("div",{className:"tip-title",children:"Recent Transactions"}),e.jsx("div",{className:"tip-description",children:"View your most recent income and expense transactions. This helps you track your latest financial activity and spot any unusual patterns. Click on any transaction to edit or categorize it properly."})]})]})]}),e.jsx(ce,{to:`/transactions?${v()}`,className:"inline-block w-auto px-3 py-1.5 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-normal rounded shadow-sm transition-colors",children:"View All"})]}),e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"max-h-[445px] overflow-y-auto",children:e.jsx(Ue,{transactions:s,categories:a,accounts:u,goals:n,userData:o})})})]})})]}),e.jsx("style",{children:`
        .desktop-bottom-section {
          display: none;
        }
        @media (min-width: 768px) {
          .desktop-bottom-section {
            display: flex;
            flex-wrap: wrap;
            margin-right: -0.75rem;
            margin-left: -0.75rem;
          }
        }
      `})]})});bt.displayName="BottomSection";const zt=()=>{const{user:t}=$e(),s=it(),{showErrorToast:a}=ze(),[u,n]=i.useState(null),[o,m]=i.useState([]),[x,v]=i.useState([]),[y,c]=i.useState([]),[g,h]=i.useState(!0),f=i.useRef(!1),F=i.useRef(0),w=2e3,K=i.useCallback(async()=>{if(!t){s("/");return}const _=Date.now();if(f.current||_-F.current<w){console.log("Fetch request deduplication: skipping duplicate or too frequent request");return}try{f.current=!0,F.current=_,h(!0);const{data:b,error:H}=await ie.from("accounts").select("*").eq("user_id",t.id);if(H)throw console.error("Error fetching accounts:",H),H;const{data:X,error:r}=await ie.from("income_categories").select("*").eq("user_id",t.id);if(r)throw console.error("Error fetching income categories:",r),r;const{data:ee,error:E}=await ie.from("expense_categories").select("*").eq("user_id",t.id);if(E)throw console.error("Error fetching expense categories:",E),E;const{data:L,error:V}=await ie.from("goals").select("*").eq("user_id",t.id);if(V)throw console.error("Error fetching goals:",V),V;const R=await Tt.fetchTransactionsWithMapping(t.id,{limit:500});if(!R.success)throw console.error("Error fetching transactions:",R.error),new Error(R.error||"Failed to fetch transactions");const se=R.data||[];let le=null,oe=null;try{const W=await ie.from("budgets").select(`
            *,
            budget_categories!budgets_category_id_fkey(category_name)
          `).eq("user_id",t.id);if(!W.error&&W.data)le=W.data,console.log("Successfully fetched budgets from budgets table with budget_categories");else throw new Error("Budget_categories relationship not found")}catch(W){console.log("Attempt 1 failed, trying expense_categories relationship:",W);try{const B=await ie.from("budgets").select(`
              *,
              expense_categories!budgets_category_id_fkey(category_name)
            `).eq("user_id",t.id);if(!B.error&&B.data)le=B.data,console.log("Successfully fetched budgets from budgets table with expense_categories");else throw new Error("Expense_categories relationship not found")}catch(B){console.log("Attempt 2 failed, trying budgets table without relationships:",B);try{const $=await ie.from("budgets").select("*").eq("user_id",t.id);if(!$.error&&$.data)le=$.data,console.log("Successfully fetched budgets from budgets table without relationships");else throw new Error("Budgets table not accessible")}catch($){console.log("Attempt 3 failed, trying budget_details view:",$);try{const q=await ie.from("budget_details").select("*").eq("user_id",t.id).order("percentage",{ascending:!1});if(!q.error&&q.data)le=q.data,console.log("Successfully fetched budgets from budget_details view");else throw new Error("Budget_details view not accessible")}catch(q){console.log("All budget query attempts failed, continuing without budget data:",q),le=[],oe=null}}}}oe&&console.error("Error fetching budgets:",oe);const C=await z(t.id),T=k(le||[]),P=se||[],N=P.filter(W=>W.type==="income").reduce((W,B)=>W+(parseFloat(B.amount.toString())||0),0),Y=P.filter(W=>W.type==="expense").reduce((W,B)=>W+(parseFloat(B.amount.toString())||0),0),O=N>0?(N-Y)/N*100:0,J={user:{id:t.id,email:t.email||"",name:t.user_metadata?.full_name||t.email?.split("@")[0]||"User"},accounts:b||[],incomeCategories:X||[],expenseCategories:ee||[],goals:L||[],transactions:se||[],summaryData:{income:N,expenses:Y,balance:N-Y,savingsRate:O}};n(J),c(C),m(T.slice(0,10));const re=[...se||[]].sort((W,B)=>new Date(B.date).getTime()-new Date(W.date).getTime()).slice(0,10);v(re)}catch(b){console.error("Error fetching dashboard data:",b),a(b.message||"Failed to load dashboard data")}finally{h(!1),f.current=!1}},[t,s,a]),z=i.useCallback(async _=>{let b=[];try{const{data:H,error:X}=await ie.from("family_details").select("*, invitee:invitee_id(*), family:family_id(*)").eq("invitee_id",_).eq("status","pending");if(X){console.log("Family details not found, trying family_members:",X);const{data:r,error:ee}=await ie.from("family_members").select("*, families:family_id(*)").eq("user_id",_).eq("status","pending");if(ee){console.log("Family members not found, trying invite_requests:",ee);const{data:E,error:L}=await ie.from("invite_requests").select("*").eq("invitee_id",_).eq("status","pending");L?console.error("Error fetching invitations from all possible tables:",L):E&&(b=E.map(V=>({id:V.id,family_id:V.family_id,family_name:V.family_name||"Unknown Family",inviter_user_id:V.inviter_id,inviter_email:V.inviter_email||"Unknown"})))}else r&&(b=r.map(E=>({id:E.id,family_id:E.family_id,family_name:E.families?.family_name||"Unknown Family",inviter_user_id:E.invited_by||_,inviter_email:"Family Admin"})))}else H&&(b=H.map(r=>({id:r.id,family_id:r.family_id,family_name:r.family?.family_name||"Unknown Family",inviter_user_id:r.inviter_id||"",inviter_email:r.invitee?.email||"Unknown"})))}catch(H){console.error("Error processing family invitations:",H)}return b},[]),k=i.useCallback(_=>_.map(b=>{let H="success",X=0,r=0,ee=0,E=0,L="";return"percentage"in b?(X=b.percentage||0,r=b.spent||0,ee=b.amount||0,E=b.remaining||0,L=b.category_name||""):(ee=b.amount||0,r=b.spent||0,E=ee-r,X=ee>0?r/ee*100:0,b.budget_categories?.category_name?L=b.budget_categories.category_name:b.expense_categories?.category_name?L=b.expense_categories.category_name:b.category_name?L=b.category_name:b.name?L=b.name:L=`Budget ${b.id||"Unknown"}`),X>=100?H="danger":X>=80&&(H="warning"),{id:b.id,category:L,name:L,amount:ee,spent:r,remaining:E,percentage:X,status:H}}),[]),I=i.useCallback(async _=>{if(!t){a("You must be logged in to accept invitations");return}try{const{error:b}=await ie.from("family_invitations").update({status:"accepted"}).eq("id",_);if(b)throw b;const{data:H,error:X}=await ie.from("family_invitations").select("family_id, families:family_id(family_name)").eq("id",_).single();if(X)throw X;const{error:r}=await ie.from("family_members").insert({family_id:H?.family_id,user_id:t.id,role:"member"});if(r)throw r;c(ee=>ee.filter(E=>E.id!==_))}catch(b){console.error("Error accepting invitation:",b),a(b.message||"Failed to accept invitation")}},[t,a]),p=i.useCallback(async _=>{if(!t){a("You must be logged in to reject invitations");return}try{const{error:b}=await ie.from("family_invitations").update({status:"rejected"}).eq("id",_);if(b)throw b;c(H=>H.filter(X=>X.id!==_))}catch(b){console.error("Error rejecting invitation:",b),a(b.message||"Failed to reject invitation")}},[t,a]);return i.useEffect(()=>{K()},[t]),{userData:u,budgetProgress:o,recentTransactions:x,pendingInvites:y,loading:g,fetchUserData:K,handleAcceptInvite:I,handleRejectInvite:p}},Wt=t=>{const[s,a]=i.useState("all"),[u,n]=i.useState("all"),[o,m]=i.useState("all"),[x,v]=i.useState(""),[y,c]=i.useState(""),[g,h]=i.useState([]),[f,F]=i.useState(null),w=i.useRef(!1),K=i.useMemo(()=>s,[s]),z=i.useMemo(()=>u,[u]),k=i.useMemo(()=>o,[o]),I=i.useMemo(()=>x,[x]),p=i.useMemo(()=>y,[y]),_=i.useMemo(()=>t,[t]),b=i.useCallback(E=>E.filter(L=>{const V=new Date(L.date),R=new Date;if(K!=="all")switch(K){case"current-month":const se=R.getMonth(),le=R.getFullYear();if(V.getMonth()!==se||V.getFullYear()!==le)return!1;break;case"last-3-months":const oe=new Date;if(oe.setMonth(R.getMonth()-2),oe.setDate(1),oe.setHours(0,0,0,0),V<oe)return!1;break;case"last-6-months":const C=new Date;if(C.setMonth(R.getMonth()-5),C.setDate(1),C.setHours(0,0,0,0),V<C)return!1;break;case"last-year":const T=R.getFullYear()-1;if(V.getFullYear()!==T)return!1;break;case"custom":if(I&&p){const P=new Date(I),N=new Date(p);if(!isNaN(P.getTime())&&!isNaN(N.getTime())&&(P>N||V<P||V>N))return!1}else if(I){const P=new Date(I);if(!isNaN(P.getTime())&&V<P)return!1}else if(p){const P=new Date(p);if(!isNaN(P.getTime())&&V>P)return!1}break}if(k!=="all"&&L.type!==k)return!1;if(z!=="all"){const se=L;if((L.category_id||se.expense_category_id||se.income_category_id)!==z)return!1}return!0}),[K,k,z,I,p]),H=i.useCallback(()=>{const E=new URLSearchParams;try{if(K!=="all"){if(K==="current-month"){const L=new Date;if(isNaN(L.getTime()))return E.toString();E.append("month",String(L.getMonth()+1)),E.append("year",String(L.getFullYear()))}else if(K==="custom"&&I&&p){const L=new Date(I),V=new Date(p);!isNaN(L.getTime())&&!isNaN(V.getTime())&&(E.append("startDate",I),E.append("endDate",p))}else if(K.startsWith("last-")){const L=K.split("-")[1],V=parseInt(L);if(!isNaN(V)&&V>0){const R=new Date,se=new Date,le=se.getMonth(),oe=se.getFullYear();let C=le-V,T=oe;for(;C<0;)C+=12,T--;se.setFullYear(T,C,1),!isNaN(se.getTime())&&!isNaN(R.getTime())&&(E.append("startDate",se.toISOString().split("T")[0]),E.append("endDate",R.toISOString().split("T")[0]))}}}}catch(L){return console.error("Error generating filtered URL params:",L),new URLSearchParams().toString()}return k!=="all"&&E.append("type",k),z!=="all"&&E.append("categoryId",z),E.toString()},[K,I,p,k,z]),X=i.useCallback(()=>{a("all"),n("all"),m("all"),v(""),c("")},[]),r=i.useMemo(()=>!_||!_.transactions?[]:b(_.transactions),[_,b]),ee=i.useMemo(()=>{if(!r.length)return{income:0,expenses:0,balance:0,savingsRate:0};const E=r.filter(R=>R.type==="income").reduce((R,se)=>R+(parseFloat(se.amount.toString())||0),0),L=r.filter(R=>R.type==="expense").reduce((R,se)=>R+(parseFloat(se.amount.toString())||0),0),V=E>0?(E-L)/E*100:0;return{income:E,expenses:L,balance:E-L,savingsRate:V}},[r]);return i.useEffect(()=>{if(!w.current&&_?.transactions&&_.transactions.length>0){w.current=!0,h(r),F({..._,summaryData:ee});return}if(r.length>0&&g.length===0){h(r),_&&F({..._,summaryData:ee});return}const E=setTimeout(()=>{h(r),_&&F({..._,summaryData:ee})},300);return()=>clearTimeout(E)},[r,ee,_]),{dateFilter:s,setDateFilter:a,categoryFilter:u,setCategoryFilter:n,typeFilter:o,setTypeFilter:m,customStartDate:x,setCustomStartDate:v,customEndDate:y,setCustomEndDate:c,filteredTransactions:g,filteredUserData:f,filterTransactions:b,getFilteredUrlParams:H,clearFilters:X}},Ht=(t,s,a,u,n,o,m)=>{i.useRef(0),i.useRef(Date.now()),i.useRef(!1);const[x,v]=i.useState([]),[y,c]=i.useState([]),[g,h]=i.useState(null),[f,F]=i.useState(null),w=i.useMemo(()=>t||[],[t]),K=i.useMemo(()=>s,[s]),z=i.useMemo(()=>a,[a]),k=i.useMemo(()=>n,[n]),I=i.useMemo(()=>o,[o]),p=i.useMemo(()=>m,[m]);i.useCallback(()=>{const C=new Date;let T,P=C;switch(k){case"current-month":T=new Date(C.getFullYear(),C.getMonth(),1);break;case"last-3-months":T=new Date(C.getFullYear(),C.getMonth()-2,1);break;case"last-6-months":T=new Date(C.getFullYear(),C.getMonth()-5,1);break;case"last-year":T=new Date(C.getFullYear()-1,0,1),P=new Date(C.getFullYear()-1,11,31);break;case"custom":I&&p?(T=new Date(I),P=new Date(p),(isNaN(T.getTime())||isNaN(P.getTime())||T>P)&&(T=new Date(C.getFullYear(),C.getMonth()-3,1),P=C)):I?(T=new Date(I),isNaN(T.getTime())&&(T=new Date(C.getFullYear(),C.getMonth()-3,1))):p?(P=new Date(p),isNaN(P.getTime())&&(P=C),T=new Date(P.getFullYear(),P.getMonth()-3,1)):T=new Date(C.getFullYear(),C.getMonth()-3,1);break;default:if(w&&w.length>0){const N=w.map(O=>new Date(O.date)),Y=new Date(Math.min(...N.map(O=>O.getTime())));T=new Date(Y.getFullYear(),Y.getMonth(),1)}else T=new Date(C.getFullYear(),C.getMonth()-11,1);break}return{startDate:T,endDate:P}},[k,I,p]);const _=i.useCallback(C=>ue(C),[]),b=i.useCallback(C=>we(C),[]),H=i.useCallback((C,T,P)=>{const N=[];if((!w||w.length===0)&&C===0&&T===0&&P===0)return;const Y=isNaN(C)||!isFinite(C)?0:Math.max(0,C),O=isNaN(T)||!isFinite(T)?0:Math.max(0,T),J=isNaN(P)||!isFinite(P)?0:P,re=Y-O;Y===0&&O>0&&N.push({title:"Critical: No income recorded",description:`You have expenses of ${_(O)} but no recorded income. Add your income sources to get accurate financial insights and improve your financial health score.`,type:"danger",icon:"fa-exclamation-triangle"}),re<-5e3?N.push({title:"Urgent: Significant negative balance",description:`Your expenses exceed income by ${_(Math.abs(re))}. Take immediate action to balance your finances or review your budget.`,type:"danger",icon:"fa-exclamation-circle"}):re<0&&N.push({title:"Warning: Negative balance detected",description:`Your expenses exceed income by ${_(Math.abs(re))}. Consider reducing expenses or increasing income.`,type:"warning",icon:"fa-exclamation-triangle"});const W=w.filter(l=>parseFloat(l.amount.toString())>1e3&&(l.category_id==="subscription"||l.notes&&l.notes.toLowerCase().includes("subscription")));if(W.length>0){const l=W.find(d=>parseFloat(d.amount.toString())>1e4);l?N.push({title:"Critical: Unusual subscription charge",description:`There's an unusually large subscription charge of ${_(Number(l.amount))} on ${new Date(l.date).toLocaleDateString()}. Please verify this transaction.`,type:"danger",icon:"fa-exclamation-circle"}):W.length>0&&N.push({title:"Unusual spending detected",description:`Found ${W.length} ${W.length===1?"transaction":"transactions"} that ${W.length===1?"doesn't":"don't"} match your typical spending pattern.`,type:"warning",icon:"fa-exclamation-circle"})}const B=K.filter(l=>l.spent>l.amount);if(B.length>0&&N.push({title:`Over budget in ${B.length} ${B.length===1?"category":"categories"}`,description:`You've exceeded your budget in ${B.map(l=>l.category).join(", ")}. Consider adjusting your spending or your budget amounts.`,type:"danger",icon:"fa-exclamation-triangle"}),Y<O&&Y>0){const l=O-Y,d=l/Y*100;d>50?N.push({title:"Critical: Major overspending",description:`You spent ${_(l)} (${b(d)}) more than earned. Immediate action needed.`,type:"danger",icon:"fa-exclamation-triangle"}):N.push({title:"Spending exceeds income",description:`You spent ${_(l)} more than you earned this period. Review your expenses to identify areas to cut back.`,type:"danger",icon:"fa-arrow-trend-down"})}else Y>O&&J>=30?N.push({title:"Outstanding savings rate!",description:`Excellent! You're saving ${b(J)} of your income. Consider investing excess funds for growth.`,type:"success",icon:"fa-trophy"}):Y>O&&J>=20?N.push({title:"Great savings rate!",description:`You're saving ${b(J)} of your income, which meets or exceeds the recommended 20%.`,type:"success",icon:"fa-piggy-bank"}):Y>O&&J<20&&J>=10?N.push({title:"Improve your savings",description:`Your current savings rate is ${b(J)}. Try to save at least 20% of your income for financial security.`,type:"info",icon:"fa-chart-line"}):Y>O&&J<10&&J>=5?N.push({title:"Low savings rate warning",description:`You're only saving ${b(J)} of your income. Consider reducing expenses to improve financial security.`,type:"warning",icon:"fa-exclamation-circle"}):Y>O&&J<5&&N.push({title:"Critical: Minimal savings",description:`Your savings rate is only ${b(J)}. This leaves you vulnerable to financial emergencies.`,type:"danger",icon:"fa-shield-alt"});const $=O/30,q=w.filter(l=>{const d=new Date(l.date),S=new Date;return S.setDate(S.getDate()-7),d>=S&&l.type==="expense"});if(q.length>0){const d=q.reduce((S,U)=>S+(parseFloat(U.amount.toString())||0),0)/7;$>0&&d>$*1.5?N.push({title:"Recent spending spike",description:`Your daily spending this week (${_(d)}) is ${b((d/$-1)*100)} above average.`,type:"warning",icon:"fa-arrow-up"}):$>0&&d<$*.7&&N.push({title:"Great spending control!",description:`Excellent! Your daily spending this week (${_(d)}) is ${b((1-d/$)*100)} below average.`,type:"success",icon:"fa-thumbs-up"})}const M=w.filter(l=>l.type==="expense");if(M.length>0&&O>0){const l=M.filter(d=>(parseFloat(d.amount.toString())||0)>O*.15);if(l.length>0){const d=l.reduce((te,ge)=>{const st=parseFloat(te.amount.toString())||0;return(parseFloat(ge.amount.toString())||0)>st?ge:te}),S=parseFloat(d.amount.toString())||0,U=S/O*100;N.push({title:"Large expense detected",description:`Your largest expense (${_(S)}) represents ${b(U)} of total spending.`,type:U>30?"warning":"info",icon:"fa-exclamation-circle"})}}const G=M.filter(l=>(parseFloat(l.amount.toString())||0)<100);if(G.length>20&&O>0){const l=G.reduce((S,U)=>S+(parseFloat(U.amount.toString())||0),0),d=l/O*100;N.push({title:"Many small purchases",description:`You have ${G.length} transactions under ₱100, totaling ${_(l)} (${b(d)} of expenses).`,type:"info",icon:"fa-coins"})}const Q=M.filter(l=>{const d=new Date(l.date).getDay();return d===0||d===6}),ae=M.filter(l=>{const d=new Date(l.date).getDay();return d>=1&&d<=5});if(Q.length>0&&ae.length>0){const l=Q.reduce((te,ge)=>te+(parseFloat(ge.amount.toString())||0),0),d=ae.reduce((te,ge)=>te+(parseFloat(ge.amount.toString())||0),0),S=l/Math.max(1,Q.length/2),U=d/Math.max(1,ae.length/5);U>0&&S>U*1.5&&N.push({title:"High weekend spending",description:`You spend ${b((S/U-1)*100)} more per day on weekends. Consider budgeting for weekend activities.`,type:"warning",icon:"fa-calendar-week"})}const de=new Date().getMonth(),fe=new Date().getFullYear(),ye=M.filter(l=>{const d=new Date(l.date);return d.getMonth()===de&&d.getFullYear()===fe}),be=M.filter(l=>{const d=new Date(l.date),S=de===0?11:de-1,U=de===0?fe-1:fe;return d.getMonth()===S&&d.getFullYear()===U});if(ye.length>0&&be.length>0){const l=ye.reduce((U,te)=>U+parseFloat(te.amount.toString()),0),d=be.reduce((U,te)=>U+parseFloat(te.amount.toString()),0),S=(l-d)/d*100;S>20?N.push({title:"Spending increased significantly",description:`Your spending this month is ${b(S)} higher than last month. Review recent purchases.`,type:"warning",icon:"fa-arrow-trend-up"}):S<-15&&N.push({title:"Great spending reduction!",description:`Excellent! You've reduced spending by ${b(Math.abs(S))} compared to last month.`,type:"success",icon:"fa-arrow-trend-down"})}const j=w.filter(l=>l.type==="income");if(j.length>=2){const l=j.map(ge=>parseFloat(ge.amount.toString())),d=Math.min(...l),S=Math.max(...l),U=C/j.length,te=(S-d)/U*100;te>50?N.push({title:"Irregular income detected",description:`Your income varies by ${b(te)}. Consider building a larger emergency fund for stability.`,type:"info",icon:"fa-chart-line"}):te<10&&N.push({title:"Stable income stream",description:`Great! Your income is very consistent with only ${b(te)} variation.`,type:"success",icon:"fa-check-circle"})}const A=O/Math.max(1,M.length/30),D=Y>O&&A>0?(Y-O)/A:0;D<1&&Y>0?N.push({title:"Build emergency fund",description:"You need an emergency fund covering 3-6 months of expenses. Start saving immediately for financial security.",type:"danger",icon:"fa-shield-alt"}):D>=6?N.push({title:"Strong emergency fund!",description:`Excellent! Your current savings can cover ${Math.floor(D)} months of expenses.`,type:"success",icon:"fa-shield-check"}):D>=3&&N.push({title:"Good emergency fund",description:`You have ${Math.floor(D)} months of expenses saved. Consider building up to 6 months.`,type:"info",icon:"fa-shield-halved"});const ne=["subscription","monthly","netflix","spotify","gym","membership","plan"],xe=M.filter(l=>{const d=(l.notes||"").toLowerCase();return ne.some(S=>d.includes(S))||parseFloat(l.amount.toString()).toString().endsWith(".00")});if(xe.length>5){const l=xe.reduce((S,U)=>S+parseFloat(U.amount.toString()),0),d=l/T*100;N.push({title:"Multiple subscriptions detected",description:`You have ${xe.length} potential subscriptions costing ${_(l)} (${b(d)} of expenses).`,type:d>15?"warning":"info",icon:"fa-repeat"})}const he=new Map;M.forEach(l=>{const d=new Date(l.date).getDate(),S=parseFloat(l.amount.toString());he.set(d,(he.get(d)||0)+S)});const We=Array.from(he.entries()).filter(([l,d])=>d>T*.1).sort((l,d)=>d[1]-l[1]);if(We.length>0){const l=We[0];N.push({title:"Heavy spending day identified",description:`Day ${l[0]} of the month shows highest spending (${_(l[1])}). Plan major purchases carefully.`,type:"info",icon:"fa-calendar-day"})}const De=new Map;M.forEach(l=>{const d=new Date(l.date).toDateString();De.set(d,(De.get(d)||0)+1)});const jt=Array.from(De.values()).reduce((l,d)=>l+d,0)/De.size,He=Array.from(De.entries()).filter(([l,d])=>d>jt*2).length;He>0&&N.push({title:"Spending pattern detected",description:`You have ${He} days with unusually high transaction activity. Consider consolidating purchases.`,type:"info",icon:"fa-chart-bar"});const qe=M.filter(l=>{const d=parseFloat(l.amount.toString());return d%100===0||d%50===0});qe.length>M.length*.3&&N.push({title:"Round number spending pattern",description:`${b(qe.length/M.length*100)} of your transactions are round numbers. This might indicate budgeting opportunities.`,type:"info",icon:"fa-calculator"});const Te=new Map;M.forEach(l=>{const d=l.category||"Uncategorized";Te.set(d,(Te.get(d)||0)+parseFloat(l.amount.toString()))});const Re=Array.from(Te.entries()).sort((l,d)=>d[1]-l[1])[0];if(Re&&Te.size>1){const l=Re[1]/T*100;l>40&&N.push({title:"Spending concentrated in one category",description:`${b(l)} of spending is in ${Re[0]}. Consider diversifying expenses or reviewing this category.`,type:"warning",icon:"fa-pie-chart"})}const Ie=new Map;M.forEach(l=>{const d=new Date(l.date).toDateString();Ie.has(d)||Ie.set(d,[]),Ie.get(d).push(l)});const Ge=Array.from(Ie.entries()).filter(([l,d])=>d.length>=5&&d.reduce((S,U)=>S+parseFloat(U.amount.toString()),0)>T*.15);Ge.length>0&&N.push({title:"Potential impulse buying detected",description:`Found ${Ge.length} days with 5+ transactions and high spending. Consider implementing a 24-hour waiting period for purchases.`,type:"warning",icon:"fa-exclamation-triangle"});const _e=Y+O>0?Y/(Y+O)*100:0;_e>=60?N.push({title:"Excellent financial health!",description:`Your financial health score is ${Math.round(_e)}%. You're managing money very well.`,type:"success",icon:"fa-heart"}):_e>=45?N.push({title:"Good financial health",description:`Your financial health score is ${Math.round(_e)}%. There's room for improvement by increasing income or reducing expenses.`,type:"info",icon:"fa-heartbeat"}):_e>0?N.push({title:"Financial health needs attention",description:`Your financial health score is ${Math.round(_e)}%. Focus on increasing income and controlling expenses.`,type:"warning",icon:"fa-heart-broken"}):O>0&&N.push({title:"Critical: Financial health at risk",description:"No income recorded while having expenses. Add income sources immediately to improve your financial health score.",type:"danger",icon:"fa-heart-broken"});const Se=new Map;if(M.forEach(l=>{const d=new Date(l.date).getMonth(),S=parseFloat(l.amount.toString());Se.set(d,(Se.get(d)||0)+S)}),Se.size>=3){const l=Array.from(Se.values()),d=l.reduce((U,te)=>U+te,0)/l.length,S=Array.from(Se.entries()).filter(([U,te])=>te>d*1.3);if(S.length>0){const U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],te=S.map(([ge])=>U[ge]).join(", ");N.push({title:"Seasonal spending pattern detected",description:`Higher spending detected in ${te}. Plan and budget for these seasonal increases.`,type:"info",icon:"fa-calendar-alt"})}}const Ve=3;let Pe=0;for(let l=0;l<Ve;l++){const d=new Date;d.setMonth(d.getMonth()-l);const S=new Date(d.getFullYear(),d.getMonth(),1),U=new Date(d.getFullYear(),d.getMonth()+1,0),te=w.filter(je=>{const Ce=new Date(je.date);return Ce>=S&&Ce<=U}),ge=te.filter(je=>je.type==="income").reduce((je,Ce)=>je+parseFloat(Ce.amount.toString()),0);te.filter(je=>je.type==="expense").reduce((je,Ce)=>je+parseFloat(Ce.amount.toString()),0)>ge&&Pe++}if(Pe>=2&&N.push({title:"Persistent deficit warning",description:`You've spent more than earned in ${Pe} of the last ${Ve} months. Consider debt counseling or financial planning.`,type:"danger",icon:"fa-exclamation-circle"}),Y>O){const d=(Y-O)*12;d>=5e4?N.push({title:"Strong goal achievement potential",description:`At current savings rate, you could save ${_(d)} annually. Perfect for major financial goals!`,type:"success",icon:"fa-bullseye"}):d>=2e4&&N.push({title:"Moderate goal achievement potential",description:`You could save ${_(d)} annually. Consider setting medium-term financial goals.`,type:"info",icon:"fa-target"})}const vt=M.filter(l=>{const d=new Date(l.date).getHours();return d>=6&&d<12}),Nt=M.filter(l=>{const d=new Date(l.date).getHours();return d>=12&&d<18}),wt=M.filter(l=>{const d=new Date(l.date).getHours();return d>=18||d<6}),_t=vt.reduce((l,d)=>l+parseFloat(d.amount.toString()),0),Ke=Nt.reduce((l,d)=>l+parseFloat(d.amount.toString()),0),Je=wt.reduce((l,d)=>l+parseFloat(d.amount.toString()),0),Ee=Math.max(_t,Ke,Je);if(Ee>0){let l="morning";Ee===Ke&&(l="afternoon"),Ee===Je&&(l="evening");const d=Ee/T*100;d>50&&N.push({title:`Heavy ${l} spending`,description:`${b(d)} of spending occurs in the ${l}. Consider if this aligns with your financial goals.`,type:"info",icon:"fa-clock"})}const Be=Y-O,Ze=[{amount:1e5,title:"₱100K milestone achieved!"},{amount:5e4,title:"₱50K milestone achieved!"},{amount:25e3,title:"₱25K milestone achieved!"},{amount:1e4,title:"₱10K milestone achieved!"},{amount:5e3,title:"₱5K milestone achieved!"}].find(l=>Be>=l.amount);Ze&&Be>0&&N.push({title:Ze.title,description:`Congratulations! Your current net positive flow is ${_(Be)}. Keep up the excellent financial management!`,type:"success",icon:"fa-trophy"});const Xe=M.filter(l=>{const d=new Date(l.date),S=new Date;return S.setDate(S.getDate()-30),d>=S}),Qe=M.filter(l=>{const d=new Date(l.date),S=new Date,U=new Date;return S.setDate(S.getDate()-60),U.setDate(U.getDate()-30),d>=S&&d<U});if(Xe.length>0&&Qe.length>0){const l=Xe.reduce((U,te)=>U+parseFloat(te.amount.toString()),0),d=Qe.reduce((U,te)=>U+parseFloat(te.amount.toString()),0),S=(l-d)/d*100;S>25?N.push({title:"Rapid expense growth",description:`Your expenses grew ${b(S)} in the last 30 days. Monitor spending carefully.`,type:"danger",icon:"fa-arrow-up"}):S<-15&&N.push({title:"Expense reduction success!",description:`Great job! You've reduced expenses by ${b(Math.abs(S))} in the last 30 days.`,type:"success",icon:"fa-arrow-down"})}const Ct={danger:4,warning:3,success:2,info:1},et=[];N.forEach(l=>{const d=Ct[l.type]||1;for(let S=0;S<d;S++)et.push(l)});const tt=[...et].sort(()=>Math.random()-.5).filter((l,d,S)=>S.findIndex(U=>U.title===l.title)===d),kt=tt.slice(0,Math.min(4,tt.length));v(kt)},[_,b,w,K,z]),X=i.useCallback(()=>{if(!w||w.length===0)return;const C=w.filter($=>$.type==="expense");if(C.length===0)return;const T=new Map;C.forEach($=>{const q=new Date($.date),M=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`;T.has(M)||T.set(M,new Map);const G=T.get(M),Q=$.expense_category_id||$.category_id||$.category||"uncategorized";{const ae=parseFloat($.amount.toString())||0,de=G.get(Q)||0;G.set(Q,de+ae)}});const P=Array.from(T.keys()).sort();if(P.length<2)return;const N=P[P.length-1],Y=P[P.length-2],O=T.get(N)||new Map,J=T.get(Y)||new Map,re=[];new Set([...Array.from(O.keys()),...Array.from(J.keys())]).forEach($=>{const q=O.get($)||0,M=J.get($)||0;if(q===0&&M===0)return;const G=z.find(de=>de.id===$),Q=G?G.category_name:$==="uncategorized"?"Uncategorized":"Other";let ae=0;M>0?ae=(q-M)/M*100:q>0&&(ae=100),re.push({category:Q,change:ae,previousAmount:M,currentAmount:q})}),re.sort(($,q)=>Math.abs(q.currentAmount-q.previousAmount)-Math.abs($.currentAmount-$.previousAmount));const B=re.slice(0,4);c(B)},[z,w]),r=i.useMemo(()=>{if(!w||w.length===0)return{income:0,expenses:0,savingsRate:0,hasData:!1};const C=w.filter(N=>N.type==="income").reduce((N,Y)=>N+(parseFloat(Y.amount.toString())||0),0),T=w.filter(N=>N.type==="expense").reduce((N,Y)=>N+(parseFloat(Y.amount.toString())||0),0),P=C>0?(C-T)/C*100:0;return{income:C,expenses:T,savingsRate:P,hasData:!0}},[w]),ee=i.useRef(!1),E=i.useRef({income:0,expenses:0,savingsRate:0});i.useEffect(()=>{if(!r.hasData||!(E.current.income!==r.income||E.current.expenses!==r.expenses||Math.abs(E.current.savingsRate-r.savingsRate)>.01)&&ee.current)return;E.current={income:r.income,expenses:r.expenses,savingsRate:r.savingsRate};const T=setTimeout(()=>{H(r.income,r.expenses,r.savingsRate),ee.current=!0},200);return()=>clearTimeout(T)},[r.hasData,r.income,r.expenses,r.savingsRate,H]);const L=i.useRef(!1),V=i.useRef(0);i.useEffect(()=>{if(!r.hasData||w.length===0||V.current===w.length&&L.current)return;V.current=w.length;const C=setTimeout(()=>{X(),L.current=!0},500);return()=>clearTimeout(C)},[r.hasData,X,w.length]);const R=i.useRef(!1),se=i.useRef(0),le=i.useRef("");i.useEffect(()=>{const C=w?.length||0;if(C===0){R.current=!1,se.current=0,le.current="";return}const T=w.map(J=>J.id).sort().join(",");if(R.current&&se.current===C&&le.current===T)return;console.log("[useInsightsAndCharts] Generating charts for",C,"transactions");const P=()=>{const J=new Map;w.forEach(q=>{const M=new Date(q.date),G=`${M.getFullYear()}-${String(M.getMonth()).padStart(2,"0")}`;J.has(G)||J.set(G,{income:0,expenses:0});const Q=J.get(G),ae=parseFloat(q.amount?.toString()||"0")||0;q.type==="income"?Q.income+=ae:q.type==="expense"&&(Q.expenses+=ae)});const re=Array.from(J.entries()).sort((q,M)=>q[0].localeCompare(M[0])).slice(-12),W=[],B=[],$=[];return re.forEach(([q,M])=>{const[G,Q]=q.split("-").map(Number),ae=new Date(G,Q);W.push(ae.toLocaleDateString("en-US",{month:"short",year:"2-digit"})),B.push(M.income),$.push(M.expenses)}),W.length===0?null:{chart:{type:"column",style:{fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},backgroundColor:"transparent",animation:{duration:1e3},height:350},title:{text:null},xAxis:{categories:W,crosshair:!0,labels:{style:{color:"#858796"}}},yAxis:{min:0,title:{text:null},gridLineColor:"#eaecf4",gridLineDashStyle:"dash",labels:{formatter:function(){return ue(this.value)},style:{color:"#858796"}}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:,.0f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0,style:{fontSize:"12px",fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},valuePrefix:"₱"},plotOptions:{column:{pointPadding:.2,borderWidth:0,borderRadius:3},series:{animation:{duration:1e3}}},series:[{name:"Income",data:B,color:"#1cc88a",type:"column"},{name:"Expenses",data:$,color:"#e74a3b",type:"column"}],credits:{enabled:!1}}},N=()=>{const J=w.filter(B=>B.type==="expense");if(J.length===0)return null;const re=new Map;J.forEach(B=>{const $=B,q=B.category_id||$.expense_category_id;let M="Uncategorized";if(q&&z&&z.length>0){const ae=z.find(de=>de.id===q);ae&&(M=ae.category_name)}const G=re.get(M)||0,Q=parseFloat(B.amount?.toString()||"0")||0;re.set(M,G+Q)});const W=Array.from(re.entries()).filter(([B,$])=>$>0).map(([B,$])=>({name:B,y:$})).sort((B,$)=>$.y-B.y);return W.length===0?null:{chart:{type:"pie",backgroundColor:"transparent",style:{fontFamily:'Nunito, -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif'},height:350},title:{text:null},tooltip:{pointFormat:"<b>{point.name}</b>: {point.percentage:.1f}% (₱{point.y:,.2f})",valuePrefix:"₱"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f}%",style:{fontWeight:"normal"},connectorWidth:0,distance:15},showInLegend:!1,size:"85%"}},legend:{enabled:!1},series:[{name:"Expenses",colorByPoint:!0,data:W}],credits:{enabled:!1}}},Y=P(),O=N();h(Y),F(O),R.current=!0,se.current=C,le.current=T},[w,z]);const oe=i.useCallback(()=>{r.hasData&&H(r.income,r.expenses,r.savingsRate)},[r.hasData,r.income,r.expenses,r.savingsRate,H]);return{insights:x,trends:y,monthlyData:g,categoryData:f,refreshInsights:oe}},qt=Ht,Gt=()=>{const[t,s]=i.useState(!0),[a,u]=i.useState(!1),[n,o]=i.useState(null),[m,x]=i.useState(null),[v,y]=i.useState(null);i.useEffect(()=>{if(window.Highcharts)u(!0);else{const f=setInterval(()=>{window.Highcharts&&(u(!0),clearInterval(f))},100);return()=>clearInterval(f)}},[]),i.useEffect(()=>{const f=setTimeout(()=>{s(!1)},5e3);return()=>{clearTimeout(f)}},[]);const c=i.useRef(f=>{const F=f.getBoundingClientRect();return{top:F.bottom+window.scrollY,left:F.left+F.width/2+window.scrollX}}).current,g=i.useCallback((f,F)=>{if(n===f)o(null),y(null);else if(o(f),F&&F.currentTarget){const w=c(F.currentTarget);y(w)}},[n]),h=i.useCallback(f=>{x(F=>F===f?null:f)},[]);return{showWelcome:t,setShowWelcome:s,highchartsLoaded:a,activeTip:n,expandedInsight:m,tooltipPosition:v,toggleTip:g,toggleInsightExpand:h}},rs=()=>{const{user:t}=$e(),s=it(),{showSuccessToast:a}=ze(),[u,n]=i.useState(!1),{userData:o,budgetProgress:m,recentTransactions:x,pendingInvites:v,loading:y,fetchUserData:c,handleAcceptInvite:g,handleRejectInvite:h}=zt(),{dateFilter:f,setDateFilter:F,categoryFilter:w,setCategoryFilter:K,typeFilter:z,setTypeFilter:k,customStartDate:I,setCustomStartDate:p,customEndDate:_,setCustomEndDate:b,filteredTransactions:H,filteredUserData:X,getFilteredUrlParams:r,clearFilters:ee}=Wt(o),E=i.useMemo(()=>H||[],[H]),{insights:L,trends:V,refreshInsights:R}=qt(E,m,o?.expenseCategories||[],t?.id||"",f,I,_),{showWelcome:se,setShowWelcome:le,activeTip:oe,expandedInsight:C,toggleTip:T,toggleInsightExpand:P}=Gt();i.useEffect(()=>{(async()=>{if(!y&&t&&o){const W=o.accounts&&o.accounts.length>0;let B=!1;try{const{data:G,error:Q}=await ie.rpc("check_account_setup_completed",{user_uuid:t.id});Q?(console.error("Error checking account setup completion:",Q),B=localStorage.getItem("accountSetupCompleted")==="true"):B=G===!0}catch(G){console.error("Exception checking account setup completion:",G),B=localStorage.getItem("accountSetupCompleted")==="true"}let $=!1;try{const{data:G,error:Q}=await ie.rpc("check_account_setup_skip_active",{user_uuid:t.id});if(Q){console.error("Error checking account setup skip status:",Q);const ae=sessionStorage.getItem("accountSetupSkipped"),de=localStorage.getItem("accountSetupSkipped")==="permanent",fe=localStorage.getItem("accountSetupReminder");let ye=!1;if(fe){const be=new Date(fe);ye=new Date>=be}$=!!ae||de&&!ye}else $=G===!0}catch(G){console.error("Exception checking account setup skip status:",G);const Q=sessionStorage.getItem("accountSetupSkipped"),ae=localStorage.getItem("accountSetupSkipped")==="permanent",de=localStorage.getItem("accountSetupReminder");let fe=!1;if(de){const ye=new Date(de);fe=new Date>=ye}$=!!Q||ae&&!fe}const q=W&&o.accounts.every(G=>G.balance===0||G.balance==="0"||!G.balance);if((!W||q)&&!B&&!$){const G=setTimeout(()=>{n(!0)},1e3);return()=>clearTimeout(G)}}})()},[y,t,o]);const N=i.useCallback(()=>{n(!1)},[]),Y=i.useCallback(()=>{n(!1),a("Account created successfully! Welcome to smart financial management."),c()},[a,c]),O=i.useCallback(()=>f==="all"?"All Time Overview":f==="current-month"?"Current Month Overview":f==="last-3-months"?"Last 3 Months Overview":f==="last-6-months"?"Last 6 Months Overview":f==="last-year"?"Last Year Overview":f==="custom"&&I&&_?`Custom Range (${new Date(I).toLocaleDateString()} - ${new Date(_).toLocaleDateString()})`:"Monthly Overview",[f,I,_]),J=i.useCallback(re=>{const W=r(),B=new URLSearchParams(W);B.set("categoryId",String(re.id)),s(`/transactions?${B.toString()}`)},[r,s]);return y?e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading your finances..."})]})}),e.jsxs("div",{className:"text-center my-5 py-5 animate__animated animate__fadeIn hidden md:block",children:[e.jsx("div",{className:"spinner-border text-primary w-12 h-12",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("h5",{className:"mt-4 text-gray-600 font-light text-lg",children:"Loading Dashboard"}),e.jsx("p",{className:"text-gray-500 text-base",children:"Please wait while we prepare your financial summary..."})]})]}):!t||!o?(s("/"),null):e.jsxs("div",{className:"container-fluid",children:[e.jsx(Ot,{isOpen:u,onClose:N,onAccountCreated:Y}),e.jsx(Ut,{invitations:v,onAcceptInvite:g,onRejectInvite:h}),e.jsx(xt,{show:se,userName:o.user.name||"User",onClose:()=>le(!1)}),e.jsx(ht,{insights:L,expandedInsight:C,onToggleInsightExpand:P,onRefreshInsights:R}),e.jsxs("div",{className:"hidden md:flex items-center justify-between mb-4 dashboard-actions flex-wrap",children:[e.jsx("h1",{className:"text-lg font-semibold mb-0 text-gray-800",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:c,className:"inline-flex items-center justify-center px-3 py-2 bg-[#1cc88a] hover:bg-[#17a673] text-white text-sm font-medium rounded shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:y,children:[e.jsx("i",{className:"fas fa-sync text-xs mr-1"}),y?"Refreshing...":"Refresh"]}),e.jsxs(ce,{to:"/reports",className:"inline-flex items-center justify-center px-3 py-2 bg-[#4e73df] hover:bg-[#2e59d9] text-white text-sm font-medium rounded shadow-sm transition-colors",children:[e.jsx("i",{className:"fas fa-download text-xs mr-1"}),"Generate Report"]})]})]}),e.jsx("div",{className:"block md:hidden mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Dashboard"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:c,className:"w-9 h-9 rounded-full bg-emerald-500 hover:bg-emerald-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95 disabled:opacity-50",disabled:y,"aria-label":"Refresh data",children:e.jsx("i",{className:`fas fa-sync text-xs ${y?"fa-spin":""}`})}),e.jsx(ce,{to:"/reports",className:"w-9 h-9 rounded-full bg-indigo-500 hover:bg-indigo-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95","aria-label":"Generate report",children:e.jsx("i",{className:"fas fa-chart-bar text-xs"})})]})]})}),e.jsx(gt,{dateFilter:f,typeFilter:z,categoryFilter:w,customStartDate:I,customEndDate:_,filteredTransactionsCount:H.length,totalTransactionsCount:o.transactions.length,expenseCategories:o.expenseCategories,incomeCategories:o.incomeCategories,onDateFilterChange:F,onTypeFilterChange:k,onCategoryFilterChange:K,onCustomStartDateChange:p,onCustomEndDateChange:b,onClearFilters:ee}),e.jsx(pt,{income:X?.summaryData.income||0,expenses:X?.summaryData.expenses||0,balance:X?.summaryData.balance||0,savingsRate:X?.summaryData.savingsRate||0,activeTip:oe,onToggleTip:T}),e.jsx(ft,{dateFilter:f,customStartDate:I,customEndDate:_,activeTip:oe,onToggleTip:T,transactions:E,expenseCategories:o?.expenseCategories||[]}),e.jsx(yt,{trends:V,filteredTransactions:H,dateFilter:f,activeTip:oe,onToggleTip:T,getFilteredChartTitle:O}),e.jsx(bt,{budgetProgress:m,recentTransactions:x,expenseCategories:o.expenseCategories,accounts:o.accounts,goals:o.goals,userData:o,activeTip:oe,onToggleTip:T,getFilteredUrlParams:r,onBudgetItemClick:J})]})};export{rs as default};
