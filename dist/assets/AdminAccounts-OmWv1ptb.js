import{j as e,B as J}from"./ui-vendor-Cn1Vfl4w.js";import{r as i}from"./react-vendor-D4A9EtXC.js";import{t as ee,z as se,b as re,p as ae}from"./index-BbApZ7g3.js";import{g as le}from"./currencyHelpers-DQ_bH0yJ.js";import{A as te}from"./accountService-CFCTGWw4.js";import"./chart-vendor-B0c7K_uV.js";const oe=({show:s,onClose:g,title:a,icon:r,color:u,data:h})=>s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop fade show",style:{zIndex:1040},onClick:g}),e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{zIndex:1050},onClick:g,children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"modal-content border-0 shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"modal-header bg-gradient-danger text-white border-0",children:[e.jsxs("h5",{className:"modal-title d-flex align-items-center",children:[e.jsx("div",{className:"modal-icon-container mr-3",style:{width:"45px",height:"45px",borderRadius:"12px",background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:`fas ${r}`,style:{fontSize:"1.25rem"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"modal-title-main font-weight-bold",children:a}),e.jsx("div",{className:"modal-subtitle",style:{opacity:.85,fontSize:"0.85rem"},children:"Detailed breakdown"})]})]}),e.jsx("button",{type:"button",className:"close text-white",onClick:g,style:{textShadow:"none",opacity:.9},children:e.jsx("span",{children:"×"})})]}),e.jsx("div",{className:"modal-body bg-white p-0",children:e.jsx("div",{className:"stats-breakdown-list",children:h.map((o,N)=>e.jsxs("div",{className:"stats-breakdown-item d-flex justify-content-between align-items-center py-3 px-4",style:{borderBottom:N<h.length-1?"1px solid #f0f0f0":"none",transition:"background-color 0.2s ease"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-weight-medium text-gray-800",children:o.label}),o.subLabel&&e.jsx("small",{className:"text-muted",children:o.subLabel})]}),e.jsx("span",{className:`badge badge-${u} badge-pill px-3 py-2`,style:{fontSize:"0.9rem",fontWeight:600,minWidth:"60px",textAlign:"center"},children:o.value})]},N))})}),e.jsx("div",{className:"modal-footer bg-light border-0",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center w-100",children:[e.jsx("div",{className:"modal-footer-info",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle mr-1 text-danger"}),"Data reflects current statistics"]})}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:g,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Close"]})]})})]})})})]}):null,me=({stats:s,loading:g=!1})=>{const[a,r]=i.useState({show:!1,title:"",icon:"",color:"",data:[]}),u=x=>`₱${Math.abs(x).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,h=s.totalUsers>0?(s.usersWithAccounts/s.totalUsers*100).toFixed(1):"0",o=s.totalAccounts>0?(s.activeAccounts/s.totalAccounts*100).toFixed(1):"0",N=()=>{r({show:!0,title:"Total Accounts Breakdown",icon:"fa-university",color:"danger",data:[{label:"Total Accounts",value:s.totalAccounts},{label:"Active Accounts",value:s.activeAccounts,subLabel:`${o}% of total`},{label:"Inactive Accounts",value:s.inactiveAccounts},{label:"Closed Accounts",value:s.closedAccounts||0},{label:"Average per User",value:s.usersWithAccounts>0?(s.totalAccounts/s.usersWithAccounts).toFixed(1):"0"}]})},w=()=>{r({show:!0,title:"Total Balance Breakdown",icon:"fa-coins",color:"success",data:[{label:"Total Balance",value:u(s.totalBalance)},{label:"Positive Balances",value:u(s.positiveBalance),subLabel:"Assets"},{label:"Negative Balances",value:u(s.negativeBalance),subLabel:"Liabilities"},{label:"Net Worth",value:u(s.totalBalance)},{label:"Average per Account",value:u(s.totalAccounts>0?s.totalBalance/s.totalAccounts:0)}]})},j=()=>{r({show:!0,title:"Users with Accounts Breakdown",icon:"fa-users",color:"info",data:[{label:"Users with Accounts",value:s.usersWithAccounts},{label:"Total Users",value:s.totalUsers},{label:"Coverage Rate",value:`${h}%`},{label:"Users without Accounts",value:s.totalUsers-s.usersWithAccounts},{label:"Accounts per User",value:s.usersWithAccounts>0?(s.totalAccounts/s.usersWithAccounts).toFixed(1):"0"}]})},y=()=>{r({show:!0,title:"Monthly Growth Breakdown",icon:"fa-chart-line",color:"warning",data:[{label:"Growth Rate",value:`${s.growthPercentage>=0?"+":""}${s.growthPercentage.toFixed(1)}%`},{label:"New This Month",value:s.newAccountsThisMonth},{label:"New Last Month",value:s.newAccountsLastMonth},{label:"Change",value:s.newAccountsThisMonth-s.newAccountsLastMonth,subLabel:"Month over month"},{label:"Trend",value:s.growthPercentage>0?"Growing":s.growthPercentage<0?"Declining":"Stable"}]})};return g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-md-none mb-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Array.from({length:4}).map((x,k)=>e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 animate-pulse",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-gray-200 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-16 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]},k))})}),e.jsx("div",{className:"row d-none d-md-flex",children:Array.from({length:4}).map((x,k)=>e.jsx("div",{className:"col-xl-3 col-md-6 col-sm-12 mb-4",children:e.jsx("div",{className:"admin-stat-card admin-card-loading",children:e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"skeleton-line skeleton-stat-value mb-2"}),e.jsx("div",{className:"skeleton-line skeleton-stat-title"})]})})},k))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-md-none mb-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",onClick:N,children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-red-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-university text-red-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Total Accounts"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:ee(s.totalAccounts)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-gray-400",children:[e.jsx("i",{className:"fas fa-check-circle text-[8px]"}),e.jsxs("span",{className:"text-[9px] font-medium",children:[s.activeAccounts," active, ",s.inactiveAccounts," inactive"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",onClick:w,children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-coins text-emerald-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Total Balance"}),e.jsx("p",{className:"text-sm font-bold text-gray-800 truncate",children:se(s.totalBalance)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-emerald-500",children:[e.jsx("i",{className:"fas fa-plus-circle text-[8px]"}),e.jsx("span",{className:"text-[9px] font-medium",children:se(s.positiveBalance)})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",onClick:j,children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-blue-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-users text-blue-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Users with Accounts"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:ee(s.usersWithAccounts)}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-blue-500",children:[e.jsx("i",{className:"fas fa-percentage text-[8px]"}),e.jsxs("span",{className:"text-[9px] font-medium",children:[h,"% coverage"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",onClick:y,children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-amber-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-chart-line text-amber-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Monthly Growth"}),e.jsxs("p",{className:`text-sm font-bold ${s.growthPercentage>=0?"text-emerald-600":"text-rose-600"}`,children:[s.growthPercentage>=0?"+":"",s.growthPercentage.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1 text-gray-400",children:[e.jsx("i",{className:"fas fa-calendar text-[8px]"}),e.jsxs("span",{className:"text-[9px] font-medium",children:["This: ",s.newAccountsThisMonth," | Last: ",s.newAccountsLastMonth]})]})]})]})}),e.jsxs("div",{className:"row d-none d-md-flex",children:[e.jsx("div",{className:"col-xl-3 col-md-6 col-sm-12 mb-4",children:e.jsxs("div",{className:"admin-stat-card admin-stat-card-danger h-100 position-relative",onClick:N,style:{cursor:"pointer"},children:[e.jsx("div",{className:"card-bg-pattern"}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"stat-title text-danger text-uppercase mb-2",children:"Total Accounts"}),e.jsx("div",{className:"stat-value mb-0 font-weight-bold text-gray-800",children:ee(s.totalAccounts)}),e.jsxs("div",{className:"stat-change mt-2 d-flex align-items-center text-muted",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),e.jsxs("span",{className:"font-weight-medium",children:[s.activeAccounts," active, ",s.inactiveAccounts," inactive"]})]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"stat-icon-container stat-icon-danger",children:e.jsx("i",{className:"fas fa-university stat-icon"})})})]})}),e.jsx("div",{className:"card-footer-link bg-danger",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center py-2 px-4",children:[e.jsx("span",{className:"font-weight-medium",children:"View Details"}),e.jsx("div",{className:"footer-arrow",children:e.jsx("i",{className:"fas fa-chevron-right"})})]})}),e.jsx("div",{className:"card-hover-overlay"})]})}),e.jsx("div",{className:"col-xl-3 col-md-6 col-sm-12 mb-4",children:e.jsxs("div",{className:"admin-stat-card admin-stat-card-success h-100 position-relative",onClick:w,style:{cursor:"pointer"},children:[e.jsx("div",{className:"card-bg-pattern"}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"stat-title text-success text-uppercase mb-2",children:"Total Balance"}),e.jsx("div",{className:"stat-value mb-0 font-weight-bold text-gray-800",children:se(s.totalBalance)}),e.jsxs("div",{className:"stat-change mt-2 d-flex align-items-center text-success",children:[e.jsx("i",{className:"fas fa-plus-circle mr-1"}),e.jsx("span",{className:"font-weight-medium",children:se(s.positiveBalance)}),e.jsx("span",{className:"ml-1 small",children:"assets"})]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"stat-icon-container stat-icon-success",children:e.jsx("i",{className:"fas fa-coins stat-icon"})})})]})}),e.jsx("div",{className:"card-footer-link bg-success",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center py-2 px-4",children:[e.jsx("span",{className:"font-weight-medium",children:"View Details"}),e.jsx("div",{className:"footer-arrow",children:e.jsx("i",{className:"fas fa-chevron-right"})})]})}),e.jsx("div",{className:"card-hover-overlay"})]})}),e.jsx("div",{className:"col-xl-3 col-md-6 col-sm-12 mb-4",children:e.jsxs("div",{className:"admin-stat-card admin-stat-card-info h-100 position-relative",onClick:j,style:{cursor:"pointer"},children:[e.jsx("div",{className:"card-bg-pattern"}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"stat-title text-info text-uppercase mb-2",children:"Users with Accounts"}),e.jsx("div",{className:"stat-value mb-0 font-weight-bold text-gray-800",children:ee(s.usersWithAccounts)}),e.jsxs("div",{className:"stat-change mt-2 d-flex align-items-center text-info",children:[e.jsx("i",{className:"fas fa-percentage mr-1"}),e.jsxs("span",{className:"font-weight-medium",children:[h,"%"]}),e.jsx("span",{className:"ml-1 small",children:"coverage"})]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"stat-icon-container stat-icon-info",children:e.jsx("i",{className:"fas fa-users stat-icon"})})})]})}),e.jsx("div",{className:"card-footer-link bg-info",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center py-2 px-4",children:[e.jsx("span",{className:"font-weight-medium",children:"View Details"}),e.jsx("div",{className:"footer-arrow",children:e.jsx("i",{className:"fas fa-chevron-right"})})]})}),e.jsx("div",{className:"card-hover-overlay"})]})}),e.jsx("div",{className:"col-xl-3 col-md-6 col-sm-12 mb-4",children:e.jsxs("div",{className:"admin-stat-card admin-stat-card-warning h-100 position-relative",onClick:y,style:{cursor:"pointer"},children:[e.jsx("div",{className:"card-bg-pattern"}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"stat-title text-warning text-uppercase mb-2",children:"Monthly Growth"}),e.jsxs("div",{className:`stat-value mb-0 font-weight-bold ${s.growthPercentage>=0?"text-success":"text-danger"}`,children:[s.growthPercentage>=0?"+":"",s.growthPercentage.toFixed(1),"%"]}),e.jsxs("div",{className:"stat-change mt-2 d-flex align-items-center text-muted",children:[e.jsx("i",{className:"fas fa-calendar mr-1"}),e.jsxs("span",{className:"font-weight-medium",children:["This: ",s.newAccountsThisMonth," | Last: ",s.newAccountsLastMonth]})]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("div",{className:"stat-icon-container stat-icon-warning",children:e.jsx("i",{className:"fas fa-chart-line stat-icon"})})})]})}),e.jsx("div",{className:"card-footer-link bg-warning",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center py-2 px-4",children:[e.jsx("span",{className:"font-weight-medium",children:"View Details"}),e.jsx("div",{className:"footer-arrow",children:e.jsx("i",{className:"fas fa-chevron-right"})})]})}),e.jsx("div",{className:"card-hover-overlay"})]})})]}),e.jsx(oe,{show:a.show,onClose:()=>r(x=>({...x,show:!1})),title:a.title,icon:a.icon,color:a.color,data:a.data})]})},B=[{value:"checking",label:"Checking",icon:"fas fa-university",color:"#4e73df",description:"Primary spending account",balanceValidation:s=>!0,balanceHint:"Enter current account balance"},{value:"savings",label:"Savings",icon:"fas fa-piggy-bank",color:"#1cc88a",description:"Savings and emergency funds",balanceValidation:s=>s>=0,balanceHint:"Savings accounts typically have positive balances"},{value:"credit",label:"Credit Card",icon:"fas fa-credit-card",color:"#e74a3b",description:"Credit card accounts",balanceValidation:s=>s<=0,balanceHint:"Enter as negative amount (debt) or zero"},{value:"investment",label:"Investment",icon:"fas fa-chart-line",color:"#f6c23e",description:"Investment and retirement accounts",balanceValidation:s=>!0,balanceHint:"Enter current market value"},{value:"cash",label:"Cash",icon:"fas fa-money-bill-wave",color:"#36b9cc",description:"Physical cash on hand",balanceValidation:s=>s>=0,balanceHint:"Physical cash amount"},{value:"other",label:"Other",icon:"fas fa-wallet",color:"#858796",description:"Other financial accounts",balanceValidation:s=>!0,balanceHint:"Enter current balance"}],O=[{value:"active",label:"Active",badge:"badge-success",icon:"fas fa-check-circle",description:"Account is active and in use"},{value:"inactive",label:"Inactive",badge:"badge-warning",icon:"fas fa-pause-circle",description:"Account is temporarily inactive"},{value:"closed",label:"Closed",badge:"badge-danger",icon:"fas fa-times-circle",description:"Account has been closed"}],Q=["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#858796","#5a5c69","#60c39e"],xe=({filters:s,users:g,onFiltersChange:a,onReset:r,loading:u=!1,hasActiveFilters:h=!1,activeFilterCount:o=0})=>{const[N,w]=i.useState(!1),[j,y]=i.useState(s.balanceMin?.toString()||""),[x,k]=i.useState(s.balanceMax?.toString()||"");i.useEffect(()=>{y(s.balanceMin?.toString()||""),k(s.balanceMax?.toString()||"")},[s.balanceMin,s.balanceMax]);const D=(c,b)=>{const S=c===""?void 0:parseFloat(c),C=b===""?void 0:parseFloat(b);(S===void 0||!isNaN(S))&&(C===void 0||!isNaN(C))&&a({balanceMin:S,balanceMax:C})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-md-none mb-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h6",{className:"text-[11px] font-bold text-gray-800 flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-filter text-red-500 text-[10px]"}),"Filters",o>0&&e.jsx("span",{className:"bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full text-[9px]",children:o})]}),e.jsxs("button",{className:"text-[10px] text-gray-500 flex items-center gap-1",onClick:r,disabled:u,children:[e.jsx("i",{className:"fas fa-undo text-[8px]"}),"Reset"]})]}),e.jsxs("div",{className:"px-3 py-2 border-b border-gray-100 bg-gray-50",children:[e.jsxs("div",{className:"relative mb-2",children:[e.jsx("i",{className:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-[10px]"}),e.jsx("input",{type:"text",className:"w-full pl-8 pr-3 py-2 text-xs bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none",placeholder:"Search accounts...",value:s.searchTerm,onChange:c=>a({searchTerm:c.target.value}),disabled:u})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("select",{className:"px-2 py-1.5 text-[10px] bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none",value:s.filterType,onChange:c=>a({filterType:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Types"}),B.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]}),e.jsxs("select",{className:"px-2 py-1.5 text-[10px] bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none",value:s.filterStatus,onChange:c=>a({filterStatus:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Status"}),O.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsxs("select",{className:"px-2 py-1.5 text-[10px] bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none",value:s.filterUser,onChange:c=>a({filterUser:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Users"}),g.map(c=>e.jsx("option",{value:c.id,children:c.full_name||c.email},c.id))]}),e.jsxs("select",{className:"px-2 py-1.5 text-[10px] bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none",value:s.filterDefault,onChange:c=>a({filterDefault:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Accounts"}),e.jsx("option",{value:"default",children:"Default Only"}),e.jsx("option",{value:"non-default",children:"Non-Default"})]})]})]}),h&&e.jsxs("div",{className:"px-3 py-2 flex flex-wrap gap-1.5",children:[s.searchTerm&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 rounded-full text-[9px]",children:['"',s.searchTerm,'"',e.jsx("button",{onClick:()=>a({searchTerm:""}),className:"hover:text-red-900",children:e.jsx("i",{className:"fas fa-times text-[8px]"})})]}),s.filterType!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-[9px]",children:[B.find(c=>c.value===s.filterType)?.label,e.jsx("button",{onClick:()=>a({filterType:"all"}),className:"hover:text-blue-900",children:e.jsx("i",{className:"fas fa-times text-[8px]"})})]}),s.filterStatus!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-[9px]",children:[O.find(c=>c.value===s.filterStatus)?.label,e.jsx("button",{onClick:()=>a({filterStatus:"all"}),className:"hover:text-amber-900",children:e.jsx("i",{className:"fas fa-times text-[8px]"})})]}),s.filterUser!=="all"&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-[9px]",children:[g.find(c=>c.id===s.filterUser)?.full_name?.substring(0,10)||"User",e.jsx("button",{onClick:()=>a({filterUser:"all"}),className:"hover:text-emerald-900",children:e.jsx("i",{className:"fas fa-times text-[8px]"})})]})]})]})}),e.jsxs("div",{className:"card shadow mb-4 d-none d-md-block",children:[e.jsxs("div",{className:"card-header py-3 d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"m-0 font-weight-bold text-danger",children:[e.jsx("i",{className:"fas fa-filter mr-2"}),"Account Filters",o>0&&e.jsx("span",{className:"badge badge-danger ml-2",children:o})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("button",{type:"button",className:"btn btn-outline-secondary btn-sm mr-2",onClick:()=>w(!N),children:[e.jsx("i",{className:`fas fa-chevron-${N?"up":"down"} mr-1`}),"Advanced"]}),h&&e.jsxs("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:r,disabled:u,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Clear All"]})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-search mr-1"}),"Search Accounts"]}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Account name, institution...",value:s.searchTerm,onChange:c=>a({searchTerm:c.target.value}),disabled:u})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-user mr-1"}),"User"]}),e.jsxs("select",{className:"form-control",value:s.filterUser,onChange:c=>a({filterUser:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Users"}),g.map(c=>e.jsxs("option",{value:c.id,children:[c.full_name||c.email,c.account_count!==void 0&&` (${c.account_count} accounts)`]},c.id))]})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-tags mr-1"}),"Account Type"]}),e.jsxs("select",{className:"form-control",value:s.filterType,onChange:c=>a({filterType:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Types"}),B.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-toggle-on mr-1"}),"Status"]}),e.jsxs("select",{className:"form-control",value:s.filterStatus,onChange:c=>a({filterStatus:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Status"}),O.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))]})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"Default Account"]}),e.jsxs("select",{className:"form-control",value:s.filterDefault,onChange:c=>a({filterDefault:c.target.value}),disabled:u,children:[e.jsx("option",{value:"all",children:"All Accounts"}),e.jsx("option",{value:"default",children:"Default Only"}),e.jsx("option",{value:"non-default",children:"Non-Default Only"})]})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-list mr-1"}),"Items per Page"]}),e.jsxs("select",{className:"form-control",value:s.pageSize,onChange:c=>a({pageSize:parseInt(c.target.value)}),disabled:u,children:[e.jsx("option",{value:5,children:"5 per page"}),e.jsx("option",{value:10,children:"10 per page"}),e.jsx("option",{value:25,children:"25 per page"}),e.jsx("option",{value:50,children:"50 per page"}),e.jsx("option",{value:100,children:"100 per page"})]})]})]}),N&&e.jsxs("div",{className:"border-top pt-3 mt-3",children:[e.jsxs("h6",{className:"text-gray-700 font-weight-bold mb-3",children:[e.jsx("i",{className:"fas fa-cogs mr-2"}),"Advanced Filters"]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-calendar mr-1"}),"Creation Date Range"]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsx("input",{type:"date",className:"form-control",placeholder:"From date",value:s.dateFrom,onChange:c=>a({dateFrom:c.target.value}),disabled:u})}),e.jsx("div",{className:"col-6",children:e.jsx("input",{type:"date",className:"form-control",placeholder:"To date",value:s.dateTo,onChange:c=>a({dateTo:c.target.value}),disabled:u})})]}),(s.dateFrom||s.dateTo)&&e.jsx("small",{className:"text-muted mt-1 d-block",children:e.jsxs("button",{type:"button",className:"btn btn-link btn-sm p-0 text-danger",onClick:()=>a({dateFrom:"",dateTo:""}),children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Clear dates"]})})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-peso-sign mr-1"}),"Balance Range (PHP)"]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Min balance",value:j,onChange:c=>{y(c.target.value),D(c.target.value,x)},disabled:u,step:"0.01"})}),e.jsx("div",{className:"col-6",children:e.jsx("input",{type:"number",className:"form-control",placeholder:"Max balance",value:x,onChange:c=>{k(c.target.value),D(j,c.target.value)},disabled:u,step:"0.01"})})]}),(s.balanceMin!==void 0||s.balanceMax!==void 0)&&e.jsx("small",{className:"text-muted mt-1 d-block",children:e.jsxs("button",{type:"button",className:"btn btn-link btn-sm p-0 text-danger",onClick:()=>{y(""),k(""),a({balanceMin:void 0,balanceMax:void 0})},children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Clear balance range"]})})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-sort mr-1"}),"Sort By"]}),e.jsxs("select",{className:"form-control",value:s.sortField,onChange:c=>a({sortField:c.target.value}),disabled:u,children:[e.jsx("option",{value:"created_at",children:"Creation Date"}),e.jsx("option",{value:"updated_at",children:"Last Modified"}),e.jsx("option",{value:"account_name",children:"Account Name"}),e.jsx("option",{value:"balance",children:"Balance"}),e.jsx("option",{value:"account_type",children:"Account Type"}),e.jsx("option",{value:"status",children:"Status"})]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label text-gray-700 font-weight-bold",children:[e.jsx("i",{className:"fas fa-sort-amount-down mr-1"}),"Sort Direction"]}),e.jsxs("select",{className:"form-control",value:s.sortDirection,onChange:c=>a({sortDirection:c.target.value}),disabled:u,children:[e.jsx("option",{value:"desc",children:"Descending"}),e.jsx("option",{value:"asc",children:"Ascending"})]})]})]})]}),h&&e.jsxs("div",{className:"border-top pt-3 mt-3",children:[e.jsxs("h6",{className:"text-gray-700 font-weight-bold mb-2",children:[e.jsx("i",{className:"fas fa-filter mr-2"}),"Active Filters (",o,")"]}),e.jsxs("div",{className:"d-flex flex-wrap",children:[s.searchTerm&&e.jsxs("span",{className:"badge badge-primary mr-2 mb-2",children:['Search: "',s.searchTerm,'"',e.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 ml-1 text-white",onClick:()=>a({searchTerm:""}),children:e.jsx("i",{className:"fas fa-times"})})]}),s.filterUser!=="all"&&e.jsxs("span",{className:"badge badge-info mr-2 mb-2",children:["User: ",g.find(c=>c.id===s.filterUser)?.full_name||s.filterUser,e.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 ml-1 text-white",onClick:()=>a({filterUser:"all"}),children:e.jsx("i",{className:"fas fa-times"})})]}),s.filterType!=="all"&&e.jsxs("span",{className:"badge badge-success mr-2 mb-2",children:["Type: ",B.find(c=>c.value===s.filterType)?.label||s.filterType,e.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 ml-1 text-white",onClick:()=>a({filterType:"all"}),children:e.jsx("i",{className:"fas fa-times"})})]}),s.filterStatus!=="all"&&e.jsxs("span",{className:"badge badge-warning mr-2 mb-2",children:["Status: ",O.find(c=>c.value===s.filterStatus)?.label||s.filterStatus,e.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 ml-1 text-white",onClick:()=>a({filterStatus:"all"}),children:e.jsx("i",{className:"fas fa-times"})})]}),s.filterDefault!=="all"&&e.jsxs("span",{className:"badge badge-secondary mr-2 mb-2",children:["Default: ",s.filterDefault==="default"?"Default Only":"Non-Default Only",e.jsx("button",{type:"button",className:"btn btn-link btn-sm p-0 ml-1 text-white",onClick:()=>a({filterDefault:"all"}),children:e.jsx("i",{className:"fas fa-times"})})]})]})]})]})]})]})},he=({accounts:s,filters:g,totalPages:a,totalItems:r,loading:u=!1,onSort:h,onPageChange:o,onAccountView:N,onAccountEdit:w,onAccountDelete:j,onSetDefault:y})=>{const{currentPage:x,pageSize:k,sortField:D,sortDirection:c}=g,[b,S]=i.useState([]),C=t=>{h(t)},z=t=>D===t?e.jsx("i",{className:`ml-1 fas fa-sort-${c==="asc"?"up":"down"}`}):e.jsx("i",{className:"ml-1 fas fa-sort text-gray-400"}),P=t=>B.find(p=>p.value===t)||B[5],M=t=>O.find(p=>p.value===t)||O[0],A=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=t=>{S(p=>p.includes(t)?p.filter(_=>_!==t):[...p,t])},l=()=>{b.length===s.length?S([]):S(s.map(t=>t.id))},n=t=>`₱${Math.abs(t).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-md-none",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-3",children:[e.jsxs("div",{className:"px-3 py-2.5 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("h6",{className:"text-[11px] font-bold text-gray-800 flex items-center gap-1.5",children:[e.jsx("i",{className:"fas fa-university text-red-500 text-[10px]"}),"Accounts",e.jsx("span",{className:"bg-red-100 text-red-600 px-1.5 py-0.5 rounded-full text-[9px]",children:r})]}),e.jsxs("span",{className:"text-[9px] text-gray-400",children:[Math.min((x-1)*k+1,r),"-",Math.min(x*k,r)," of ",r]})]}),u?e.jsx("div",{className:"p-4",children:Array.from({length:3}).map((t,p)=>e.jsx("div",{className:"animate-pulse mb-3 last:mb-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-2 bg-gray-200 rounded w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]})},p))}):s.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-university text-gray-400 text-lg"})}),e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"No accounts found"}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Try adjusting your filters"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:s.map(t=>{const p=P(t.account_type),_=M(t.status);return e.jsxs("div",{className:"p-3 hover:bg-gray-50 transition-colors",onClick:()=>N(t),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:(t.color||p.color)+"20",color:t.color||p.color},children:e.jsx("i",{className:`${p.icon} text-sm`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h6",{className:"text-xs font-bold text-gray-800 truncate",children:t.account_name}),t.is_default&&e.jsx("span",{className:"flex-shrink-0 w-4 h-4 rounded-full bg-amber-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-star text-amber-500 text-[8px]"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx("span",{className:"text-[10px] text-gray-500 truncate",children:t.user_name||t.user_email}),e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[8px] font-medium",style:{backgroundColor:_.value==="active"?"#dcfce7":_.value==="inactive"?"#f3f4f6":"#fee2e2",color:_.value==="active"?"#16a34a":_.value==="inactive"?"#6b7280":"#dc2626"},children:_.label})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded",style:{backgroundColor:p.color+"20",color:p.color},children:p.label}),e.jsxs("span",{className:`text-sm font-bold ${t.balance>=0?"text-emerald-600":"text-rose-600"}`,children:[t.balance>=0?"":"-",n(t.balance)]})]})]}),e.jsx("div",{className:"flex-shrink-0 self-center",children:e.jsx("i",{className:"fas fa-chevron-right text-gray-300 text-xs"})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-2 pt-2 border-t border-gray-50",children:[e.jsxs("button",{onClick:R=>{R.stopPropagation(),N(t)},className:"px-2 py-1 text-[9px] text-blue-600 bg-blue-50 rounded hover:bg-blue-100 transition-colors",children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"View"]}),e.jsxs("button",{onClick:R=>{R.stopPropagation(),w(t)},className:"px-2 py-1 text-[9px] text-amber-600 bg-amber-50 rounded hover:bg-amber-100 transition-colors",children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs("button",{onClick:R=>{R.stopPropagation(),j(t)},className:"px-2 py-1 text-[9px] text-rose-600 bg-rose-50 rounded hover:bg-rose-100 transition-colors",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})]})]},t.id)})}),a>1&&e.jsxs("div",{className:"px-3 py-2.5 border-t border-gray-100 bg-gray-50 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>o(x-1),disabled:x===1,className:"px-2.5 py-1.5 text-[10px] font-medium text-gray-600 bg-white border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-chevron-left mr-1"}),"Prev"]}),e.jsxs("span",{className:"text-[10px] text-gray-500",children:["Page ",x," of ",a]}),e.jsxs("button",{onClick:()=>o(x+1),disabled:x===a,className:"px-2.5 py-1.5 text-[10px] font-medium text-gray-600 bg-white border border-gray-200 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:["Next",e.jsx("i",{className:"fas fa-chevron-right ml-1"})]})]})]})}),e.jsxs("div",{className:"card shadow d-none d-md-block",children:[e.jsx("div",{className:"card-header bg-white border-0 py-3",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"m-0 font-weight-bold text-danger",children:[e.jsx("i",{className:"fas fa-table mr-2"}),"Accounts (",r,")"]}),e.jsxs("div",{className:"table-actions d-flex align-items-center",children:[b.length>0&&e.jsxs("div",{className:"mr-3",children:[e.jsxs("span",{className:"badge badge-info mr-2",children:[b.length," selected"]}),e.jsxs("button",{className:"btn btn-outline-danger btn-sm",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Bulk Delete"]})]}),e.jsxs("small",{className:"text-muted",children:["Showing ",Math.min((x-1)*k+1,r)," to ",Math.min(x*k,r)," of ",r," entries"]})]})]})}),u?e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table modern-table mb-0",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"40px"},children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"20px",height:"16px"}})}),e.jsx("th",{children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"80px",height:"16px"}})}),e.jsx("th",{children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"100px",height:"16px"}})}),e.jsx("th",{children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"60px",height:"16px"}})}),e.jsx("th",{children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"80px",height:"16px"}})}),e.jsx("th",{children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"70px",height:"16px"}})}),e.jsx("th",{children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"60px",height:"16px"}})}),e.jsx("th",{children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"80px",height:"16px"}})}),e.jsx("th",{className:"text-center",style:{width:"120px"},children:e.jsx("div",{className:"skeleton-line skeleton-table-header",style:{width:"60px",height:"16px",margin:"0 auto"}})})]})}),e.jsx("tbody",{children:Array.from({length:k}).map((t,p)=>e.jsxs("tr",{className:"skeleton-row",children:[e.jsx("td",{children:e.jsx("div",{className:"skeleton-checkbox"})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"skeleton-circle mr-2",style:{width:"32px",height:"32px"}}),e.jsxs("div",{children:[e.jsx("div",{className:"skeleton-line mb-1",style:{width:"120px",height:"16px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"80px",height:"12px"}})]})]})}),e.jsx("td",{children:e.jsx("div",{className:"skeleton-line",style:{width:"100px",height:"16px"}})}),e.jsx("td",{children:e.jsx("div",{className:"skeleton-line",style:{width:"60px",height:"16px"}})}),e.jsx("td",{children:e.jsx("div",{className:"skeleton-line",style:{width:"80px",height:"16px"}})}),e.jsx("td",{children:e.jsx("div",{className:"skeleton-badge",style:{width:"70px",height:"24px"}})}),e.jsx("td",{children:e.jsx("div",{className:"skeleton-line",style:{width:"60px",height:"12px"}})}),e.jsx("td",{children:e.jsx("div",{className:"skeleton-line",style:{width:"70px",height:"12px"}})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-center",children:[e.jsx("div",{className:"skeleton-button mr-1",style:{width:"32px",height:"32px"}}),e.jsx("div",{className:"skeleton-button mr-1",style:{width:"32px",height:"32px"}}),e.jsx("div",{className:"skeleton-button",style:{width:"32px",height:"32px"}})]})})]},p))})]})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover modern-table mb-0",children:[e.jsx("thead",{className:"table-header",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-0",style:{width:"40px"},children:e.jsxs("div",{className:"custom-control custom-checkbox",children:[e.jsx("input",{type:"checkbox",className:"custom-control-input",id:"selectAll",checked:b.length===s.length&&s.length>0,onChange:l}),e.jsx("label",{className:"custom-control-label",htmlFor:"selectAll"})]})}),e.jsxs("th",{className:"border-0 sortable-header",onClick:()=>C("account_name"),style:{cursor:"pointer"},children:["Account ",z("account_name")]}),e.jsxs("th",{className:"border-0 sortable-header",onClick:()=>C("user_email"),style:{cursor:"pointer"},children:["User ",z("user_email")]}),e.jsxs("th",{className:"border-0 sortable-header",onClick:()=>C("account_type"),style:{cursor:"pointer"},children:["Type ",z("account_type")]}),e.jsxs("th",{className:"border-0 sortable-header",onClick:()=>C("balance"),style:{cursor:"pointer"},children:["Balance ",z("balance")]}),e.jsxs("th",{className:"border-0 sortable-header",onClick:()=>C("status"),style:{cursor:"pointer"},children:["Status ",z("status")]}),e.jsx("th",{className:"border-0",children:"Default"}),e.jsxs("th",{className:"border-0 sortable-header",onClick:()=>C("created_at"),style:{cursor:"pointer"},children:["Created ",z("created_at")]}),e.jsx("th",{className:"border-0 text-center",style:{width:"120px"},children:"Actions"})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"py-5",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"empty-state-container",children:[e.jsx("i",{className:"fas fa-university fa-4x text-gray-300 mb-4"}),e.jsx("h4",{className:"text-gray-700 mb-3",children:"No Accounts Found"}),e.jsx("p",{className:"text-muted mb-4 max-width-sm mx-auto",children:"No accounts match your current filters. Try adjusting your search criteria or add a new account to get started."}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsxs("button",{className:"btn btn-outline-primary btn-sm mr-2",children:[e.jsx("i",{className:"fas fa-filter mr-2"}),"Clear Filters"]}),e.jsxs("button",{className:"btn btn-primary btn-sm",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add First Account"]})]})]})})})}):s.map(t=>{const p=P(t.account_type),_=M(t.status);return e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{children:e.jsxs("div",{className:"custom-control custom-checkbox",children:[e.jsx("input",{type:"checkbox",className:"custom-control-input",id:`select-${t.id}`,checked:b.includes(t.id),onChange:()=>U(t.id)}),e.jsx("label",{className:"custom-control-label",htmlFor:`select-${t.id}`})]})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mr-3",style:{width:"32px",height:"32px",backgroundColor:t.color||p.color+"20",color:t.color||p.color},children:e.jsx("i",{className:p.icon,style:{fontSize:"14px"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-weight-bold text-gray-800",children:t.account_name}),t.institution_name&&e.jsxs("small",{className:"text-muted",children:[t.institution_name,t.account_number_masked&&` •••• ${t.account_number_masked}`]})]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[t.user_avatar&&e.jsx("img",{src:t.user_avatar,alt:"User",className:"rounded-circle mr-2",style:{width:"24px",height:"24px"}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-weight-bold text-gray-800",children:t.user_name||"Unknown User"}),e.jsx("small",{className:"text-muted",children:t.user_email})]})]})}),e.jsx("td",{children:e.jsxs("span",{className:"badge",style:{backgroundColor:p.color+"20",color:p.color},children:[e.jsx("i",{className:`${p.icon} mr-1`}),p.label]})}),e.jsx("td",{children:e.jsx("span",{className:t.balance_class,children:t.display_balance})}),e.jsx("td",{children:e.jsxs("span",{className:`badge ${_.badge}`,children:[e.jsx("i",{className:`${_.icon} mr-1`}),_.label]})}),e.jsx("td",{children:t.is_default?e.jsxs("span",{className:"badge badge-warning",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"Default"]}):e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>y&&y(t),title:"Set as default",children:e.jsx("i",{className:"far fa-star"})})}),e.jsx("td",{children:e.jsx("small",{className:"text-muted",children:t.created_at?A(t.created_at):"N/A"})}),e.jsx("td",{className:"py-3 text-center",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary mr-1",onClick:()=>N(t),title:"View Details",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{className:"btn btn-sm btn-outline-warning mr-1",onClick:()=>w(t),title:"Edit Account",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>j(t),title:"Delete Account",children:e.jsx("i",{className:"fas fa-trash"})})]})})]},t.id)})})]})})}),a>1&&e.jsx("div",{className:"card-footer bg-white border-0",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-muted",children:["Showing ",Math.min((x-1)*k+1,r)," to ",Math.min(x*k,r)," of ",r," entries"]}),e.jsx("nav",{children:e.jsxs("ul",{className:"pagination mb-0",children:[e.jsx("li",{className:`page-item ${x===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>o(x-1),disabled:x===1,children:e.jsx("i",{className:"fas fa-chevron-left"})})}),Array.from({length:Math.min(a,5)},(t,p)=>{let _;return a<=5||x<=3?_=p+1:x>=a-2?_=a-4+p:_=x-2+p,e.jsx("li",{className:`page-item ${x===_?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>o(_),children:_})},_)}),e.jsx("li",{className:`page-item ${x===a?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>o(x+1),disabled:x===a,children:e.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})})]})]})]})},ue=({show:s,onClose:g,onAdd:a,users:r,loading:u=!1})=>{const[h,o]=i.useState({account_name:"",account_type:"checking",balance:0,initial_balance:0,currency:"PHP",status:"active",is_default:!1,description:"",institution_name:"",account_number_masked:"",color:Q[0],user_id:"",admin_notes:""}),[N,w]=i.useState({}),[j,y]=i.useState(!1),[x,k]=i.useState(""),[D,c]=i.useState(!1),b=le();i.useEffect(()=>{s&&(o({account_name:"",account_type:"checking",balance:0,initial_balance:0,currency:"PHP",status:"active",is_default:!1,description:"",institution_name:"",account_number_masked:"",color:Q[0],user_id:"",admin_notes:""}),w({}),k(""),c(!1))},[s]),i.useEffect(()=>{const l=n=>{if(D){const t=n.target;!t.closest(".user-dropdown-container")&&!t.closest(".input-group")&&c(!1)}};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[D]);const S=()=>{const l={};return h.account_name.trim()?h.account_name.length<2&&(l.account_name="Account name must be at least 2 characters"):l.account_name="Account name is required",h.user_id||(l.user_id="Please select an account owner"),isNaN(h.balance)&&(l.balance="Please enter a valid balance amount"),w(l),Object.keys(l).length===0},C=(l,n)=>{o(t=>({...t,[l]:n})),N[l]&&w(t=>({...t,[l]:""}))},z=l=>{o(n=>({...n,user_id:l.id})),k(l.user_metadata?.full_name||l.full_name||l.email),c(!1),N.user_id&&w(n=>({...n,user_id:""}))},P=async l=>{if(l.preventDefault(),!!S()){y(!0);try{await a(h)&&g()}catch(n){console.error("Error adding account:",n)}finally{y(!1)}}},M=r.filter(l=>{const n=x.toLowerCase(),t=l.user_metadata?.full_name||l.full_name||"",p=l.email||"";return t.toLowerCase().includes(n)||p.toLowerCase().includes(n)}),A=r.find(l=>l.id===h.user_id),U=B.find(l=>l.value===h.account_type)||B[0];return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop fade show",style:{zIndex:1040},onClick:g}),e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{zIndex:1050},onClick:g,children:e.jsx("div",{className:"modal-dialog modal-md modal-dialog-centered",onClick:l=>l.stopPropagation(),style:{margin:"auto",maxWidth:"500px",width:"calc(100% - 16px)"},children:e.jsxs("div",{className:"modal-content border-0 shadow-lg",style:{borderRadius:"16px",overflow:"hidden",maxHeight:"90vh",margin:"8px"},children:[e.jsx("div",{className:"modal-header border-0 text-white",style:{background:"linear-gradient(135deg, #dc3545 0%, #c82333 100%)",padding:"12px 16px"},children:e.jsxs("div",{className:"d-flex align-items-center w-100",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"36px",height:"36px",background:"rgba(255,255,255,0.2)",borderRadius:"10px",marginRight:"10px"},children:e.jsx("i",{className:"fas fa-plus-circle",style:{fontSize:"16px"}})}),e.jsxs("div",{className:"flex-grow-1 min-w-0",children:[e.jsx("h6",{className:"mb-0 font-weight-bold",style:{fontSize:"14px"},children:"Add Account"}),e.jsx("small",{className:"d-none d-sm-block",style:{opacity:.9,fontSize:"11px"},children:"Create new financial account"})]}),e.jsx("button",{type:"button",className:"btn btn-light btn-sm flex-shrink-0",onClick:g,disabled:j,style:{width:"30px",height:"30px",borderRadius:"8px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:"fas fa-times text-danger",style:{fontSize:"12px"}})})]})}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"modal-body",style:{maxHeight:"calc(90vh - 140px)",overflowY:"auto",padding:"12px 16px",WebkitOverflowScrolling:"touch"},children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.85rem"},children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Account Owner ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{className:"position-relative user-dropdown-container",children:[e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text bg-white border-right-0",children:e.jsx("i",{className:"fas fa-search text-muted"})})}),e.jsx("input",{type:"text",className:`form-control border-left-0 ${N.user_id?"is-invalid":A?"is-valid":""}`,placeholder:"Search for a user...",value:x,onChange:l=>{k(l.target.value),c(!0),h.user_id&&o(n=>({...n,user_id:""}))},onFocus:()=>c(!0),disabled:j,style:{boxShadow:"none",fontSize:"0.85rem"}})]}),D&&M.length>0&&e.jsx("div",{className:"dropdown-menu show w-100",style:{maxHeight:"150px",overflowY:"auto",position:"absolute",zIndex:1e3},children:M.slice(0,5).map(l=>e.jsxs("button",{type:"button",className:"dropdown-item d-flex align-items-center py-2",onClick:()=>z(l),children:[e.jsx("img",{src:l.avatar_url||l.user_metadata?.avatar_url||"../images/placeholder.png",alt:"Avatar",className:"rounded-circle mr-2",style:{width:"28px",height:"28px",objectFit:"cover"},onError:n=>{n.currentTarget.src="../images/placeholder.png"}}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{style:{fontSize:"0.85rem"},children:l.user_metadata?.full_name||l.full_name||l.email.split("@")[0]}),e.jsx("small",{className:"text-muted",children:l.email})]})]},l.id))})]}),N.user_id&&e.jsx("small",{className:"text-danger mt-1 d-block",children:N.user_id}),A&&e.jsxs("div",{className:"mt-2 p-2 d-flex align-items-center",style:{background:"white",borderRadius:"6px",border:"1px solid #28a745"},children:[e.jsx("i",{className:"fas fa-check-circle text-success mr-2"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:A.user_metadata?.full_name||A.full_name||A.email})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.85rem"},children:[e.jsx("i",{className:`${U.icon} mr-2`}),"Account Details"]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-sm-8 mb-3",children:[e.jsxs("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:["Account Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control form-control-sm ${N.account_name?"is-invalid":h.account_name.trim()?"is-valid":""}`,placeholder:"e.g., Primary Checking",value:h.account_name,onChange:l=>C("account_name",l.target.value),disabled:j,style:{fontSize:"0.85rem"}}),N.account_name&&e.jsx("small",{className:"text-danger",children:N.account_name})]}),e.jsxs("div",{className:"col-12 col-sm-4 mb-3",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Account Type"}),e.jsx("select",{className:"form-control form-control-sm",value:h.account_type,onChange:l=>C("account_type",l.target.value),disabled:j,style:{fontSize:"0.85rem"},children:B.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Initial Balance"}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:b})}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",placeholder:"0.00",value:h.balance,onChange:l=>C("balance",parseFloat(l.target.value)||0),disabled:j,style:{fontSize:"0.85rem"}})]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Status"}),e.jsxs("select",{className:"form-control form-control-sm",value:h.status,onChange:l=>C("status",l.target.value),disabled:j,style:{fontSize:"0.85rem"},children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Description"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:2,placeholder:"Optional description...",value:h.description,onChange:l=>C("description",l.target.value),disabled:j,style:{fontSize:"0.85rem"}})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDefault",checked:h.is_default,onChange:l=>C("is_default",l.target.checked),disabled:j}),e.jsx("label",{className:"form-check-label",htmlFor:"isDefault",style:{fontSize:"0.85rem"},children:"Set as default account"})]})]})]})]}),e.jsxs("div",{className:"modal-footer border-0 py-2",style:{background:"#f8f9fa",padding:"8px 16px"},children:[e.jsxs("small",{className:"text-muted mr-auto d-none d-sm-block",style:{fontSize:"0.75rem"},children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"Required fields marked with *"]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm mr-2",onClick:g,disabled:j,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Cancel"]}),e.jsx("button",{type:"submit",className:"btn btn-danger btn-sm",disabled:j||!h.account_name.trim()||!h.user_id,children:j?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm mr-1"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Create"]})})]})]})]})})})]}):null},fe=({show:s,onClose:g,onUpdate:a,account:r,users:u,loading:h=!1})=>{const[o,N]=i.useState({account_name:"",account_type:"checking",balance:0,initial_balance:0,currency:"PHP",status:"active",is_default:!1,description:"",institution_name:"",account_number_masked:"",color:Q[0],user_id:"",admin_notes:""}),[w,j]=i.useState({}),[y,x]=i.useState(!1),[k,D]=i.useState(""),[c,b]=i.useState(!1),S=le();i.useEffect(()=>{if(s&&r){N({account_name:r.account_name,account_type:r.account_type,balance:r.balance,initial_balance:r.initial_balance||r.balance,currency:r.currency||"PHP",status:r.status,is_default:r.is_default,description:r.description||"",institution_name:r.institution_name||"",account_number_masked:r.account_number_masked||"",color:r.color||Q[0],user_id:r.user_id,admin_notes:r.admin_notes||""});const n=u.find(t=>t.id===r.user_id);D(n?.full_name||n?.email||""),j({}),b(!1)}},[s,r,u]),i.useEffect(()=>{const n=t=>{c&&(t.target.closest(".user-dropdown-container")||b(!1))};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[c]);const C=()=>{const n={};return o.account_name.trim()?o.account_name.length<2&&(n.account_name="Account name must be at least 2 characters"):n.account_name="Account name is required",o.user_id||(n.user_id="Please select an account owner"),isNaN(o.balance)&&(n.balance="Please enter a valid balance amount"),o.account_type==="credit"&&o.balance>0&&(n.balance="Credit account balance must be zero or negative (representing debt)"),o.account_number_masked&&o.account_number_masked.length<4&&(n.account_number_masked="Account number must be at least 4 characters"),j(n),Object.keys(n).length===0},z=(n,t)=>{N(p=>({...p,[n]:t})),w[n]&&j(p=>({...p,[n]:""}))},P=n=>{N(t=>({...t,user_id:n.id})),D(n.full_name||n.email),b(!1),w.user_id&&j(t=>({...t,user_id:""}))},M=u.filter(n=>{const t=k.toLowerCase();return n.full_name?.toLowerCase().includes(t)||n.email.toLowerCase().includes(t)}),A=u.find(n=>n.id===o.user_id),U=B.find(n=>n.value===o.account_type)||B[0],l=async n=>{if(n.preventDefault(),!(!r||!C())){x(!0);try{await a(r.id,o)&&g()}catch(t){console.error("Error updating account:",t)}finally{x(!1)}}};return!s||!r?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop fade show",style:{zIndex:1040},onClick:g}),e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{zIndex:1050},onClick:g,children:e.jsx("div",{className:"modal-dialog modal-md modal-dialog-centered",onClick:n=>n.stopPropagation(),style:{margin:"auto",maxWidth:"500px",width:"calc(100% - 16px)"},children:e.jsxs("div",{className:"modal-content border-0 shadow-lg",style:{borderRadius:"16px",overflow:"hidden",maxHeight:"90vh",margin:"8px"},children:[e.jsx("div",{className:"modal-header border-0 text-white",style:{background:"linear-gradient(135deg, #dc3545 0%, #c82333 100%)",padding:"12px 16px"},children:e.jsxs("div",{className:"d-flex align-items-center w-100",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"36px",height:"36px",background:"rgba(255,255,255,0.2)",borderRadius:"10px",marginRight:"10px"},children:e.jsx("i",{className:"fas fa-edit",style:{fontSize:"16px"}})}),e.jsxs("div",{className:"flex-grow-1 min-w-0",children:[e.jsx("h6",{className:"mb-0 font-weight-bold",style:{fontSize:"14px"},children:"Edit Account"}),e.jsx("small",{className:"d-none d-sm-block text-truncate",style:{opacity:.9,fontSize:"11px"},children:r?.account_name})]}),e.jsx("button",{type:"button",className:"btn btn-light btn-sm flex-shrink-0",onClick:g,disabled:y,style:{width:"30px",height:"30px",borderRadius:"8px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:"fas fa-times text-danger",style:{fontSize:"12px"}})})]})}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"modal-body",style:{maxHeight:"calc(90vh - 140px)",overflowY:"auto",padding:"12px 16px",WebkitOverflowScrolling:"touch"},children:[e.jsxs("div",{className:"mb-3 p-2 d-flex align-items-center",style:{background:"#fff5f5",borderRadius:"8px",borderLeft:"3px solid #dc3545"},children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center mr-2",style:{width:"32px",height:"32px",backgroundColor:r.color||U.color+"20",borderRadius:"6px"},children:e.jsx("i",{className:U.icon,style:{color:r.color||U.color,fontSize:"0.9rem"}})}),e.jsxs("div",{className:"flex-grow-1 min-w-0",children:[e.jsx("small",{className:"text-muted d-block",style:{fontSize:"0.7rem"},children:"Current Account"}),e.jsx("strong",{className:"text-truncate d-block",style:{fontSize:"0.85rem"},children:r.account_name})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.85rem"},children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Account Owner ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{className:"position-relative user-dropdown-container",children:[e.jsx("input",{type:"text",className:`form-control form-control-sm ${w.user_id?"is-invalid":A?"is-valid":""}`,placeholder:"Search for user...",value:k,onChange:n=>{D(n.target.value),b(!0),o.user_id&&N(t=>({...t,user_id:""}))},onFocus:()=>b(!0),disabled:y,style:{fontSize:"0.85rem"}}),c&&M.length>0&&e.jsx("div",{className:"dropdown-menu show w-100",style:{maxHeight:"150px",overflowY:"auto",position:"absolute",zIndex:1e3},children:M.slice(0,5).map(n=>e.jsxs("button",{type:"button",className:"dropdown-item d-flex align-items-center py-2",onClick:()=>P(n),children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mr-2",style:{width:"24px",height:"24px",backgroundColor:"#dc354520",color:"#dc3545"},children:e.jsx("i",{className:"fas fa-user",style:{fontSize:"10px"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"0.85rem"},children:n.full_name||"Unknown"}),e.jsx("small",{className:"text-muted",children:n.email})]})]},n.id))})]}),w.user_id&&e.jsx("small",{className:"text-danger",children:w.user_id}),A&&e.jsxs("div",{className:"mt-2 p-2 d-flex align-items-center",style:{background:"white",borderRadius:"6px",border:"1px solid #28a745"},children:[e.jsx("i",{className:"fas fa-check-circle text-success mr-2"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:A.full_name||A.email})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.85rem"},children:[e.jsx("i",{className:`${U.icon} mr-2`}),"Account Details"]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-sm-8 mb-3",children:[e.jsxs("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:["Account Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control form-control-sm ${w.account_name?"is-invalid":o.account_name.trim()?"is-valid":""}`,placeholder:"e.g., Primary Checking",value:o.account_name,onChange:n=>z("account_name",n.target.value),disabled:y,style:{fontSize:"0.85rem"}}),w.account_name&&e.jsx("small",{className:"text-danger",children:w.account_name})]}),e.jsxs("div",{className:"col-12 col-sm-4 mb-3",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Type"}),e.jsx("select",{className:"form-control form-control-sm",value:o.account_type,onChange:n=>z("account_type",n.target.value),disabled:y,style:{fontSize:"0.85rem"},children:B.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6 mb-3",children:[e.jsxs("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:["Balance ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:S})}),e.jsx("input",{type:"number",step:"0.01",className:`form-control ${w.balance?"is-invalid":""}`,placeholder:"0.00",value:o.balance,onChange:n=>z("balance",parseFloat(n.target.value)||0),disabled:y,style:{fontSize:"0.85rem"}})]}),w.balance&&e.jsx("small",{className:"text-danger",children:w.balance})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Status"}),e.jsxs("select",{className:"form-control form-control-sm",value:o.status,onChange:n=>z("status",n.target.value),disabled:y,style:{fontSize:"0.85rem"},children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Account Color"}),e.jsx("div",{className:"d-flex flex-wrap",style:{gap:"6px"},children:Q.map(n=>e.jsx("div",{onClick:()=>z("color",n),style:{width:"24px",height:"24px",backgroundColor:n,borderRadius:"4px",cursor:"pointer",border:o.color===n?"2px solid #333":"1px solid #ddd"},title:n},n))})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"is_default",checked:o.is_default,onChange:n=>z("is_default",n.target.checked),disabled:y}),e.jsx("label",{className:"form-check-label",htmlFor:"is_default",style:{fontSize:"0.85rem"},children:"Set as default account"})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.85rem"},children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Optional Information"]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6 mb-2",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Institution"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Bank name...",value:o.institution_name,onChange:n=>z("institution_name",n.target.value),disabled:y,style:{fontSize:"0.85rem"}})]}),e.jsxs("div",{className:"col-6 mb-2",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Account #"}),e.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"1234",value:o.account_number_masked,onChange:n=>z("account_number_masked",n.target.value),maxLength:10,disabled:y,style:{fontSize:"0.85rem"}})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"mb-1",style:{fontSize:"0.85rem"},children:"Description"}),e.jsx("textarea",{className:"form-control form-control-sm",rows:2,placeholder:"Notes about this account...",value:o.description,onChange:n=>z("description",n.target.value),disabled:y,style:{fontSize:"0.85rem"}})]})]})]})]}),e.jsxs("div",{className:"modal-footer border-0 py-2",style:{background:"#f8f9fa",padding:"8px 16px"},children:[e.jsxs("small",{className:"text-muted mr-auto d-none d-sm-block",style:{fontSize:"0.75rem"},children:[e.jsx("i",{className:"fas fa-fingerprint mr-1"}),"ID: ",e.jsxs("code",{style:{fontSize:"0.7rem"},children:[r.id?.substring(0,12),"..."]})]}),e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm mr-2",onClick:g,disabled:y,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Cancel"]}),e.jsx("button",{type:"submit",className:"btn btn-danger btn-sm",disabled:y||!o.account_name.trim()||!o.user_id,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm mr-1"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save mr-1"}),"Update"]})})]})]})]})})})]})},be=({show:s,onClose:g,account:a})=>{const[r,u]=i.useState("overview");if(!s||!a)return null;const h=B.find(x=>x.value===a.account_type)||B[5],o=O.find(x=>x.value===a.status)||O[0],N=le(),w=x=>x?new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",j=a.balance-(a.initial_balance||0),y=Math.floor((Date.now()-new Date(a.created_at||Date.now()).getTime())/(1e3*60*60*24));return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop fade show",style:{zIndex:1040},onClick:g}),e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{zIndex:1050},onClick:g,children:e.jsx("div",{className:"modal-dialog modal-md modal-dialog-centered",onClick:x=>x.stopPropagation(),style:{margin:"auto",maxWidth:"550px",width:"calc(100% - 16px)"},children:e.jsxs("div",{className:"modal-content border-0 shadow-lg",style:{borderRadius:"16px",overflow:"hidden",maxHeight:"90vh",margin:"8px"},children:[e.jsx("div",{className:"modal-header border-0 text-white",style:{background:"linear-gradient(135deg, #dc3545 0%, #c82333 100%)",padding:"12px 16px"},children:e.jsxs("div",{className:"d-flex align-items-center w-100",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"36px",height:"36px",background:"rgba(255,255,255,0.2)",borderRadius:"10px",marginRight:"10px"},children:e.jsx("i",{className:h.icon,style:{fontSize:"16px"}})}),e.jsxs("div",{className:"flex-grow-1 min-w-0",children:[e.jsx("h6",{className:"mb-0 font-weight-bold",style:{fontSize:"14px"},children:"Account Details"}),e.jsx("small",{className:"d-none d-sm-block text-truncate",style:{opacity:.9,fontSize:"11px"},children:a.account_name})]}),e.jsx("button",{type:"button",className:"btn btn-light btn-sm flex-shrink-0",onClick:g,style:{width:"30px",height:"30px",borderRadius:"8px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:"fas fa-times text-danger",style:{fontSize:"12px"}})})]})}),e.jsx("div",{className:"px-3 py-2",style:{background:"#f8f9fa",borderBottom:"1px solid #e9ecef"},children:e.jsxs("div",{className:"row text-center g-1",children:[e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row align-items-center justify-content-center",children:[e.jsx("i",{className:`${o.icon}`,style:{color:o.value==="active"?"#28a745":o.value==="inactive"?"#6c757d":"#dc3545",fontSize:"0.8rem"}}),e.jsxs("div",{className:"text-center text-sm-left ml-sm-1",children:[e.jsx("small",{className:"text-muted d-block",style:{fontSize:"0.65rem",lineHeight:1},children:"Status"}),e.jsx("strong",{style:{fontSize:"0.7rem",color:o.value==="active"?"#28a745":o.value==="inactive"?"#6c757d":"#dc3545"},children:o.label})]})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row align-items-center justify-content-center",children:[e.jsx("i",{className:`${h.icon} text-danger`,style:{fontSize:"0.8rem"}}),e.jsxs("div",{className:"text-center text-sm-left ml-sm-1",children:[e.jsx("small",{className:"text-muted d-block",style:{fontSize:"0.65rem",lineHeight:1},children:"Type"}),e.jsx("strong",{className:"text-danger",style:{fontSize:"0.7rem"},children:h.label})]})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row align-items-center justify-content-center",children:[e.jsx("i",{className:"fas fa-calendar-alt text-danger",style:{fontSize:"0.8rem"}}),e.jsxs("div",{className:"text-center text-sm-left ml-sm-1",children:[e.jsx("small",{className:"text-muted d-block",style:{fontSize:"0.65rem",lineHeight:1},children:"Age"}),e.jsxs("strong",{className:"text-danger",style:{fontSize:"0.7rem"},children:[y,"d"]})]})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"d-flex flex-column flex-sm-row align-items-center justify-content-center",children:[e.jsx("i",{className:`fas ${a.is_default?"fa-star text-warning":"fa-circle text-secondary"}`,style:{fontSize:"0.8rem"}}),e.jsxs("div",{className:"text-center text-sm-left ml-sm-1",children:[e.jsx("small",{className:"text-muted d-block",style:{fontSize:"0.65rem",lineHeight:1},children:"Default"}),e.jsx("strong",{style:{fontSize:"0.7rem"},className:a.is_default?"text-warning":"text-secondary",children:a.is_default?"Yes":"No"})]})]})})]})}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"calc(90vh - 180px)",overflowY:"auto",padding:"12px 16px",WebkitOverflowScrolling:"touch"},children:[e.jsxs("div",{className:"mb-3 p-3 text-center",style:{background:a.balance>=0?"rgba(40, 167, 69, 0.1)":"rgba(220, 53, 69, 0.1)",borderRadius:"10px"},children:[e.jsx("small",{className:"text-muted d-block",children:"Current Balance"}),e.jsxs("h4",{className:`mb-1 font-weight-bold ${a.balance>=0?"text-success":"text-danger"}`,children:[N,Math.abs(a.balance).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"px-3 pt-2",children:e.jsx("div",{className:"d-flex",style:{gap:"6px"},children:[{id:"overview",icon:"fa-university",label:"Overview"},{id:"financial",icon:"fa-coins",label:"Financial"},{id:"details",icon:"fa-info-circle",label:"Details"}].map(x=>e.jsxs("button",{className:`btn btn-sm ${r===x.id?"btn-danger":"btn-outline-secondary"}`,onClick:()=>u(x.id),style:{borderRadius:"16px",padding:"4px 12px",fontSize:"0.8rem"},children:[e.jsx("i",{className:`fas ${x.icon} mr-1`}),x.label]},x.id))})}),e.jsxs("div",{className:"modal-body py-3",style:{maxHeight:"50vh",overflowY:"auto"},children:[r==="overview"&&e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-5 text-center mb-3 mb-lg-0",children:[e.jsxs("div",{className:"position-relative d-inline-block mb-3",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center rounded-circle",style:{width:"80px",height:"80px",backgroundColor:a.color||h.color+"20",border:`3px solid ${a.color||h.color}`,margin:"0 auto"},children:e.jsx("i",{className:h.icon,style:{fontSize:"32px",color:a.color||h.color}})}),e.jsx("div",{className:"position-absolute",style:{bottom:"5px",right:"5px",width:"18px",height:"18px",borderRadius:"50%",background:o.value==="active"?"#28a745":"#6c757d",border:"2px solid white"}})]}),e.jsx("h6",{className:"font-weight-bold mb-1",children:a.account_name}),e.jsx("p",{className:"text-muted mb-2",style:{fontSize:"0.85rem"},children:h.description}),e.jsxs("div",{className:"d-flex justify-content-center flex-wrap",style:{gap:"6px"},children:[e.jsxs(J,{bg:o.value==="active"?"success":o.value==="inactive"?"secondary":"danger",style:{fontSize:"0.7rem"},children:[e.jsx("i",{className:`${o.icon} mr-1`}),o.label]}),e.jsxs(J,{bg:"danger",style:{fontSize:"0.7rem"},children:[e.jsx("i",{className:`${h.icon} mr-1`}),h.label]}),a.is_default&&e.jsxs(J,{bg:"warning",style:{fontSize:"0.7rem"},children:[e.jsx("i",{className:"fas fa-star mr-1"}),"Default"]})]}),e.jsxs("div",{className:"mt-3 p-3",style:{background:a.balance>=0?"rgba(40, 167, 69, 0.1)":"rgba(220, 53, 69, 0.1)",borderRadius:"8px"},children:[e.jsx("small",{className:"text-muted d-block",children:"Current Balance"}),e.jsxs("h4",{className:`mb-0 font-weight-bold ${a.balance>=0?"text-success":"text-danger"}`,children:[N,Math.abs(a.balance).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"col-lg-7",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.9rem"},children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Quick Info"]}),e.jsxs("div",{className:"p-2",style:{background:"#f8f9fa",borderRadius:"8px",fontSize:"0.85rem"},children:[e.jsxs("div",{className:"d-flex justify-content-between py-1",style:{borderBottom:"1px solid #e9ecef"},children:[e.jsx("small",{className:"text-muted",children:"Account ID"}),e.jsxs("code",{style:{fontSize:"0.75rem"},children:[a.id?.substring(0,16),"..."]})]}),e.jsxs("div",{className:"d-flex justify-content-between py-1",style:{borderBottom:"1px solid #e9ecef"},children:[e.jsx("small",{className:"text-muted",children:"Owner"}),e.jsx("span",{style:{fontSize:"0.8rem"},children:a.user_name||"N/A"})]}),e.jsxs("div",{className:"d-flex justify-content-between py-1",style:{borderBottom:"1px solid #e9ecef"},children:[e.jsx("small",{className:"text-muted",children:"Email"}),e.jsx("span",{style:{fontSize:"0.8rem"},children:a.user_email||"N/A"})]}),e.jsxs("div",{className:"d-flex justify-content-between py-1",style:{borderBottom:"1px solid #e9ecef"},children:[e.jsx("small",{className:"text-muted",children:"Created"}),e.jsx("span",{style:{fontSize:"0.8rem"},children:w(a.created_at)})]}),e.jsxs("div",{className:"d-flex justify-content-between py-1",children:[e.jsx("small",{className:"text-muted",children:"Currency"}),e.jsx(J,{bg:"info",style:{fontSize:"0.7rem"},children:a.currency||"PHP"})]})]})]})]}),r==="financial"&&e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.9rem"},children:[e.jsx("i",{className:"fas fa-wallet mr-2"}),"Balance Summary"]}),e.jsx("div",{className:"p-2",style:{background:"#f8f9fa",borderRadius:"8px"},children:e.jsx("table",{className:"table table-sm table-borderless mb-0",style:{fontSize:"0.8rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Current Balance"}),e.jsx("td",{className:"text-right py-1",children:e.jsxs("strong",{className:a.balance>=0?"text-success":"text-danger",children:[N,a.balance.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Initial Balance"}),e.jsxs("td",{className:"text-right py-1",children:[N,(a.initial_balance||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Net Change"}),e.jsx("td",{className:"text-right py-1",children:e.jsxs("strong",{className:j>=0?"text-success":"text-danger",children:[j>=0?"+":"-",N,Math.abs(j).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})]})})]})]})})})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.9rem"},children:[e.jsx("i",{className:"fas fa-chart-line mr-2"}),"Performance"]}),e.jsx("div",{className:"p-2",style:{background:"#f8f9fa",borderRadius:"8px"},children:e.jsx("table",{className:"table table-sm table-borderless mb-0",style:{fontSize:"0.8rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Account Age"}),e.jsx("td",{className:"text-right py-1",children:e.jsxs("strong",{className:"text-danger",children:[y," days"]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Transactions"}),e.jsx("td",{className:"text-right py-1",children:a.transaction_count||0})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Status"}),e.jsx("td",{className:"text-right py-1",children:e.jsx(J,{bg:o.value==="active"?"success":"secondary",style:{fontSize:"0.65rem"},children:o.label})})]})]})})})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.9rem"},children:[e.jsx("i",{className:"fas fa-chart-bar mr-2"}),"Balance Progress"]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("small",{className:"text-muted",children:"Initial → Current"}),e.jsxs("strong",{className:j>=0?"text-success":"text-danger",style:{fontSize:"0.85rem"},children:[j>=0?"+":"",(j/(a.initial_balance||1)*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"progress",style:{height:"8px",borderRadius:"4px"},children:e.jsx("div",{className:`progress-bar ${j>=0?"bg-success":"bg-danger"}`,style:{width:`${Math.min(Math.abs(a.balance/(a.initial_balance||a.balance||1)*100),100)}%`,borderRadius:"4px"}})})]})]})]}),r==="details"&&e.jsxs("div",{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.9rem"},children:[e.jsx("i",{className:"fas fa-user mr-2"}),"Owner Details"]}),e.jsx("div",{className:"p-2",style:{background:"#f8f9fa",borderRadius:"8px"},children:e.jsx("table",{className:"table table-sm table-borderless mb-0",style:{fontSize:"0.8rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"User ID"}),e.jsx("td",{className:"text-right py-1",children:e.jsxs("code",{style:{fontSize:"0.7rem"},children:[a.user_id?.substring(0,12),"..."]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Name"}),e.jsx("td",{className:"text-right py-1",children:a.user_name||"N/A"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Email"}),e.jsx("td",{className:"text-right py-1",children:a.user_email||"N/A"})]})]})})})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.9rem"},children:[e.jsx("i",{className:"fas fa-clock mr-2"}),"Timestamps"]}),e.jsx("div",{className:"p-2",style:{background:"#f8f9fa",borderRadius:"8px"},children:e.jsx("table",{className:"table table-sm table-borderless mb-0",style:{fontSize:"0.8rem"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Created"}),e.jsx("td",{className:"text-right py-1",children:w(a.created_at)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Updated"}),e.jsx("td",{className:"text-right py-1",children:w(a.updated_at)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted py-1",children:"Age"}),e.jsx("td",{className:"text-right py-1",children:e.jsxs("strong",{className:"text-danger",children:[y," days"]})})]})]})})})]})]}),(a.description||a.institution_name||a.account_number_masked||a.admin_notes)&&e.jsxs(e.Fragment,{children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.9rem"},children:[e.jsx("i",{className:"fas fa-file-alt mr-2"}),"Additional Information"]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[a.institution_name&&e.jsxs("div",{className:"mb-2",children:[e.jsx("small",{className:"text-muted d-block",children:"Institution"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:a.institution_name})]}),a.account_number_masked&&e.jsxs("div",{className:"mb-2",children:[e.jsx("small",{className:"text-muted d-block",children:"Account Number"}),e.jsxs("code",{style:{fontSize:"0.85rem"},children:["****",a.account_number_masked]})]}),a.description&&e.jsxs("div",{className:"mb-2",children:[e.jsx("small",{className:"text-muted d-block",children:"Description"}),e.jsx("span",{style:{fontSize:"0.85rem"},children:a.description})]}),a.admin_notes&&e.jsxs("div",{className:"p-2 mt-2",style:{background:"#fff5f5",borderRadius:"6px",borderLeft:"3px solid #dc3545"},children:[e.jsxs("small",{className:"text-danger d-block",children:[e.jsx("i",{className:"fas fa-sticky-note mr-1"}),"Admin Notes"]}),e.jsx("span",{style:{fontSize:"0.85rem"},children:a.admin_notes})]})]})]})]})]}),e.jsxs("div",{className:"modal-footer border-0 py-2",style:{background:"#f8f9fa"},children:[e.jsxs("small",{className:"text-muted mr-auto",style:{fontSize:"0.75rem"},children:[e.jsx("i",{className:"fas fa-fingerprint mr-1"}),"ID: ",e.jsxs("code",{style:{fontSize:"0.7rem"},children:[a.id?.substring(0,12),"..."]})]}),e.jsxs("button",{type:"button",className:"btn btn-danger btn-sm",onClick:g,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Close"]})]})]})]})})})]})},pe=({show:s,onClose:g,onDelete:a,account:r})=>{const[u,h]=i.useState(""),[o,N]=i.useState(!1),[w,j]=i.useState(!1),y=async()=>{if(!(!r||u!==r.account_name)){N(!0);try{await a(r.id)&&(h(""),j(!1),g())}catch(b){console.error("Error deleting account:",b)}finally{N(!1)}}},x=()=>{o||(h(""),j(!1),g())};if(!s||!r)return null;const k=B.find(b=>b.value===r.account_type)||B[5],D=u===r.account_name&&w,c=[];return r.is_default&&c.push({type:"danger",icon:"fas fa-star",message:"This is the default account for the user. Deleting it may affect user functionality."}),r.balance!==0&&c.push({type:"warning",icon:"fas fa-coins",message:`Account has a non-zero balance of ${r.display_balance}. This balance will be lost.`}),r.transaction_count&&r.transaction_count>0&&c.push({type:"info",icon:"fas fa-exchange-alt",message:`This account has ${r.transaction_count} associated transactions. Consider the impact on financial records.`}),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-backdrop fade show",style:{zIndex:1040},onClick:g}),e.jsx("div",{className:"modal fade show d-block",tabIndex:-1,style:{zIndex:1050},onClick:g,children:e.jsx("div",{className:"modal-dialog modal-md modal-dialog-centered",onClick:b=>b.stopPropagation(),style:{margin:"auto",maxWidth:"450px",width:"calc(100% - 16px)"},children:e.jsxs("div",{className:"modal-content border-0 shadow-lg",style:{borderRadius:"16px",overflow:"hidden",maxHeight:"90vh",margin:"8px"},children:[e.jsx("div",{className:"modal-header border-0 text-white",style:{background:"linear-gradient(135deg, #dc3545 0%, #c82333 100%)",padding:"12px 16px"},children:e.jsxs("div",{className:"d-flex align-items-center w-100",children:[e.jsx("div",{className:"d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"36px",height:"36px",background:"rgba(255,255,255,0.2)",borderRadius:"10px",marginRight:"10px"},children:e.jsx("i",{className:"fas fa-trash-alt",style:{fontSize:"16px"}})}),e.jsxs("div",{className:"flex-grow-1 min-w-0",children:[e.jsx("h6",{className:"mb-0 font-weight-bold",style:{fontSize:"14px"},children:"Delete Account"}),e.jsx("small",{className:"d-none d-sm-block",style:{opacity:.9,fontSize:"11px"},children:"This action cannot be undone"})]}),e.jsx("button",{type:"button",className:"btn btn-light btn-sm flex-shrink-0",onClick:x,disabled:o,style:{width:"30px",height:"30px",borderRadius:"8px",padding:0,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:"fas fa-times text-danger",style:{fontSize:"12px"}})})]})}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"calc(90vh - 140px)",overflowY:"auto",padding:"12px 16px",WebkitOverflowScrolling:"touch"},children:[e.jsxs("div",{className:"mb-3 p-3 text-center",style:{background:"#fff5f5",borderRadius:"8px",border:"2px solid #dc3545"},children:[e.jsx("div",{className:"d-inline-flex align-items-center justify-content-center mb-2",style:{width:"50px",height:"50px",backgroundColor:"#dc354520",borderRadius:"50%"},children:e.jsx("i",{className:k.icon,style:{color:"#dc3545",fontSize:"1.5rem"}})}),e.jsx("h6",{className:"font-weight-bold mb-1",style:{fontSize:"0.95rem"},children:r.account_name}),e.jsxs("small",{className:"text-muted d-block mb-2",children:[r.user_name," • ",r.user_email]}),e.jsxs("div",{className:"d-flex justify-content-center flex-wrap",style:{gap:"8px",fontSize:"0.8rem"},children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Type:"})," ",k.label]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Balance:"})," ",e.jsx("span",{className:r.balance>=0?"text-success":"text-danger",children:r.display_balance})]})]})]}),c.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.85rem"},children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"Impact Assessment"]}),c.map((b,S)=>e.jsxs("div",{className:"p-2 mb-2 d-flex align-items-start",style:{background:b.type==="danger"?"#fff5f5":b.type==="warning"?"#fff8e6":"#e8f4fc",borderRadius:"6px",fontSize:"0.8rem"},children:[e.jsx("i",{className:`${b.icon} mr-2 mt-1`,style:{color:b.type==="danger"?"#dc3545":b.type==="warning"?"#f6c23e":"#36b9cc",fontSize:"0.75rem"}}),e.jsx("span",{children:b.message})]},S))]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-danger mb-2",style:{fontSize:"0.85rem"},children:[e.jsx("i",{className:"fas fa-keyboard mr-2"}),"Confirmation Required"]}),e.jsxs("div",{className:"p-3",style:{background:"#f8f9fa",borderRadius:"8px"},children:[e.jsxs("p",{className:"mb-2",style:{fontSize:"0.8rem"},children:["Type the account name to confirm: ",e.jsx("code",{className:"text-danger",children:r.account_name})]}),e.jsx("input",{type:"text",className:`form-control form-control-sm ${u===r.account_name?"is-valid":u?"is-invalid":""}`,placeholder:`Type "${r.account_name}"`,value:u,onChange:b=>h(b.target.value),disabled:o,style:{fontSize:"0.85rem"}}),u&&u!==r.account_name&&e.jsx("small",{className:"text-danger",children:"Account name doesn't match"})]})]}),e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"acknowledgeWarnings",checked:w,onChange:b=>j(b.target.checked),disabled:o}),e.jsx("label",{className:"form-check-label",htmlFor:"acknowledgeWarnings",style:{fontSize:"0.8rem"},children:e.jsx("strong",{children:"I understand and want to permanently delete this account"})})]}),e.jsx("div",{className:"p-2",style:{background:"#fff5f5",borderRadius:"8px",borderLeft:"3px solid #dc3545"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-skull-crossbones text-danger mr-2"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-danger",style:{fontSize:"0.8rem"},children:"Permanent Deletion"}),e.jsx("p",{className:"mb-0 text-muted",style:{fontSize:"0.7rem"},children:"This cannot be undone and may affect financial reports."})]})]})})]}),e.jsxs("div",{className:"modal-footer border-0 py-2",style:{background:"#f8f9fa",padding:"8px 16px"},children:[e.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm mr-2",onClick:x,disabled:o,children:[e.jsx("i",{className:"fas fa-times mr-1"}),"Cancel"]}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:y,disabled:!D||o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm mr-1"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Delete"]})})]})]})})})]})},je=()=>{const[s,g]=i.useState([]),[a,r]=i.useState([]),[u,h]=i.useState({totalAccounts:0,activeAccounts:0,inactiveAccounts:0,closedAccounts:0,totalUsers:0,usersWithAccounts:0,totalBalance:0,positiveBalance:0,negativeBalance:0,accountsByType:{},accountsByStatus:{},accountsByUser:{},balancesByType:{},newAccountsThisMonth:0,newAccountsLastMonth:0,growthPercentage:0}),[o,N]=i.useState(!0),[w,j]=i.useState(null),[y,x]=i.useState(1),[k,D]=i.useState(0),c=i.useRef(null),{showSuccessToast:b,showErrorToast:S}=re(),C=i.useCallback(d=>B.find(f=>f.value===d)?.icon||"fas fa-wallet",[]),z=i.useCallback((d,m)=>{const v=`${le()}${Math.abs(d).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return m==="credit"?d<0?{display:`-${v}`,class:"text-danger font-weight-bold"}:d===0?{display:v,class:"text-success font-weight-bold"}:{display:`+${v}`,class:"text-warning font-weight-bold"}:{display:`${d>=0?"":"-"}${v}`,class:`font-weight-bold ${d>=0?"text-success":"text-danger"}`}},[]),P=i.useCallback((d,m)=>{const f=m.get(d.user_id),v=z(d.balance,d.account_type);return{...d,user_email:f?.email||"",user_name:f?.full_name||f?.user_metadata?.full_name||"Unknown User",user_avatar:f?.avatar_url||f?.user_metadata?.avatar_url,user_full_name:f?.full_name||f?.user_metadata?.full_name,display_balance:v.display,balance_class:v.class,type_icon:C(d.account_type),currency:d.currency||"PHP"}},[z,C]),M=i.useCallback(async()=>{try{const{data:d,error:m}=await ae.auth.admin.listUsers({page:1,perPage:1e3});if(m)throw m;return(d?.users||[]).map(v=>({id:v.id,email:v.email||"",full_name:v.user_metadata?.full_name||v.email||"",avatar_url:v.user_metadata?.avatar_url||"",user_metadata:v.user_metadata||{},account_count:0,total_balance:0,default_account_id:void 0}))}catch(d){return console.error("Error fetching users:",d),S("Failed to fetch users"),[]}},[S]),A=i.useCallback(d=>{const m={totalAccounts:d.length,activeAccounts:0,inactiveAccounts:0,closedAccounts:0,totalUsers:0,usersWithAccounts:0,totalBalance:0,positiveBalance:0,negativeBalance:0,accountsByType:{},accountsByStatus:{},accountsByUser:{},balancesByType:{},newAccountsThisMonth:0,newAccountsLastMonth:0,growthPercentage:0},f=new Set,v=new Date,E=v.getMonth(),W=v.getFullYear(),G=E===0?11:E-1,V=E===0?W-1:W;return d.forEach(T=>{switch(f.add(T.user_id),T.status){case"active":m.activeAccounts++;break;case"inactive":m.inactiveAccounts++;break;case"closed":m.closedAccounts++;break}if(m.accountsByType[T.account_type]=(m.accountsByType[T.account_type]||0)+1,m.accountsByStatus[T.status]=(m.accountsByStatus[T.status]||0)+1,m.accountsByUser[T.user_email]=(m.accountsByUser[T.user_email]||0)+1,T.status!=="closed"&&(m.totalBalance+=T.balance,m.balancesByType[T.account_type]=(m.balancesByType[T.account_type]||0)+T.balance,T.balance>=0?m.positiveBalance+=T.balance:m.negativeBalance+=Math.abs(T.balance)),T.created_at){const Y=new Date(T.created_at),L=Y.getMonth(),I=Y.getFullYear();I===W&&L===E?m.newAccountsThisMonth++:I===V&&L===G&&m.newAccountsLastMonth++}}),m.totalUsers=f.size,m.usersWithAccounts=f.size,m.newAccountsLastMonth>0?m.growthPercentage=(m.newAccountsThisMonth-m.newAccountsLastMonth)/m.newAccountsLastMonth*100:m.newAccountsThisMonth>0&&(m.growthPercentage=100),m},[]),U=i.useCallback(async(d,m)=>{try{if(N(!0),j(null),(m||a).length===0){const H=await M();r(H)}let v=ae.from("accounts").select("*",{count:"exact"});d.searchTerm&&(v=v.or(`account_name.ilike.%${d.searchTerm}%,institution_name.ilike.%${d.searchTerm}%`)),d.filterUser&&d.filterUser!=="all"&&(v=v.eq("user_id",d.filterUser)),d.filterType&&d.filterType!=="all"&&(v=v.eq("account_type",d.filterType)),d.filterStatus&&d.filterStatus!=="all"&&(v=v.eq("status",d.filterStatus)),d.filterDefault&&d.filterDefault!=="all"&&(v=v.eq("is_default",d.filterDefault==="default")),d.dateFrom&&(v=v.gte("created_at",d.dateFrom)),d.dateTo&&(v=v.lte("created_at",d.dateTo)),d.balanceMin!==void 0&&(v=v.gte("balance",d.balanceMin)),d.balanceMax!==void 0&&(v=v.lte("balance",d.balanceMax));const E=d.sortField||"created_at",W=d.sortDirection||"desc";v=v.order(E,{ascending:W==="asc"});const G=d.currentPage||1,V=d.pageSize||10,T=(G-1)*V;v=v.range(T,T+V-1);const{data:Y,error:L,count:I}=await v;if(L)throw L;let q=[];m&&m.length>0?q=m:(q=await M(),r(q));const K=new Map;q.forEach(H=>{K.set(H.id,H)});const X=(Y||[]).map(H=>P(H,K));g(X),D(I||0),x(Math.ceil((I||0)/V));const ne=A(X);h(ne)}catch(f){console.error("Error fetching accounts:",f),j(f instanceof Error?f.message:"Failed to fetch accounts"),S("Failed to fetch accounts")}finally{N(!1)}},[M,P,A,S]),l=i.useCallback(async d=>{try{const m=await te.createAccount({user_id:d.user_id,account_name:d.account_name,account_type:d.account_type,balance:d.balance,initial_balance:d.initial_balance||d.balance,currency:d.currency||"PHP",status:d.status,is_default:d.is_default,description:d.description,institution_name:d.institution_name,account_number_masked:d.account_number_masked,color:d.color});return m.success?(b("Account created successfully"),!0):(S(m.error||"Failed to create account"),!1)}catch(m){return console.error("Error creating account:",m),S("Failed to create account"),!1}},[b,S]),n=i.useCallback(async(d,m)=>{try{const f=await te.updateAccount(d,{...m,currency:m.currency||"PHP"},m.user_id||"");return f.success?(b("Account updated successfully"),!0):(S(f.error||"Failed to update account"),!1)}catch(f){return console.error("Error updating account:",f),S("Failed to update account"),!1}},[b,S]),t=i.useCallback(async d=>{try{const m=await te.deleteAccount(d,"admin");return m.success?(b("Account deleted successfully"),!0):(S(m.error||"Failed to delete account"),!1)}catch(m){return console.error("Error deleting account:",m),S("Failed to delete account"),!1}},[b,S]),p=i.useCallback(async(d,m)=>{try{const f=await te.setDefaultAccount(d,m);return f.success?(b("Default account updated successfully"),!0):(S(f.error||"Failed to update default account"),!1)}catch(f){return console.error("Error setting default account:",f),S("Failed to update default account"),!1}},[b,S]),_=i.useCallback(async d=>{const m=await M();r(m),d&&await U(d,m)},[M,U]);i.useEffect(()=>(c.current=ae.channel("admin-accounts").on("postgres_changes",{event:"*",schema:"public",table:"accounts"},d=>{console.log("Account change detected:",d)}).subscribe(),()=>{c.current&&ae.removeChannel(c.current)}),[]),i.useEffect(()=>{(async()=>{try{const m=await M();r(m),await U({searchTerm:"",filterUser:"all",filterType:"all",filterStatus:"all",filterDefault:"all",sortField:"created_at",sortDirection:"desc",currentPage:1,pageSize:10},m)}catch(m){console.error("Error initializing account data:",m),j(m instanceof Error?m.message:"Failed to initialize data"),N(!1)}})()},[M,U]);const R=i.useMemo(()=>a,[a.length,JSON.stringify(a.map(d=>d.id))]);return{accounts:s,users:R,stats:u,loading:o,error:w,totalPages:y,totalItems:k,fetchAccounts:U,createAccount:l,updateAccount:n,deleteAccount:t,setDefaultAccount:p,refreshData:_,getAccountTypeIcon:C,formatAccountBalance:z}},ge=()=>{const[s,g]=i.useState({searchTerm:"",filterUser:"all",filterType:"all",filterStatus:"all",filterDefault:"all",sortField:"created_at",sortDirection:"desc",currentPage:1,pageSize:10,dateFrom:"",dateTo:"",balanceMin:void 0,balanceMax:void 0}),a=i.useCallback(l=>{g(n=>({...n,...l,currentPage:l.currentPage!==void 0?l.currentPage:1}))},[]),r=i.useCallback(()=>{g({searchTerm:"",filterUser:"all",filterType:"all",filterStatus:"all",filterDefault:"all",sortField:"created_at",sortDirection:"desc",currentPage:1,pageSize:10,dateFrom:"",dateTo:"",balanceMin:void 0,balanceMax:void 0})},[]),u=i.useCallback(l=>{a({searchTerm:l,currentPage:1})},[a]),h=i.useCallback(l=>{a({filterUser:l,currentPage:1})},[a]),o=i.useCallback(l=>{a({filterType:l,currentPage:1})},[a]),N=i.useCallback(l=>{a({filterStatus:l,currentPage:1})},[a]),w=i.useCallback(l=>{a({filterDefault:l,currentPage:1})},[a]),j=i.useCallback((l,n)=>{const t=n||(s.sortField===l&&s.sortDirection==="asc"?"desc":"asc");a({sortField:l,sortDirection:t,currentPage:1})},[s.sortField,s.sortDirection,a]),y=i.useCallback(l=>{a({currentPage:l})},[a]),x=i.useCallback(l=>{a({pageSize:l,currentPage:1})},[a]),k=i.useCallback((l,n)=>{a({dateFrom:l,dateTo:n,currentPage:1})},[a]),D=i.useCallback((l,n)=>{a({balanceMin:l,balanceMax:n,currentPage:1})},[a]),c=i.useCallback(()=>{a({dateFrom:"",dateTo:"",currentPage:1})},[a]),b=i.useCallback(()=>{a({balanceMin:void 0,balanceMax:void 0,currentPage:1})},[a]),S=i.useMemo(()=>s.filterUser!=="all"||s.filterType!=="all"||s.filterStatus!=="all"||s.filterDefault!=="all"||s.dateFrom!==""||s.dateTo!==""||s.balanceMin!==void 0||s.balanceMax!==void 0,[s]),C=i.useMemo(()=>{let l=0;return s.filterUser!=="all"&&l++,s.filterType!=="all"&&l++,s.filterStatus!=="all"&&l++,s.filterDefault!=="all"&&l++,(s.dateFrom!==""||s.dateTo!=="")&&l++,(s.balanceMin!==void 0||s.balanceMax!==void 0)&&l++,l},[s]),z=i.useMemo(()=>{const l=[];return s.searchTerm&&l.push(`Search: "${s.searchTerm}"`),s.filterUser!=="all"&&l.push(`User: ${s.filterUser}`),s.filterType!=="all"&&l.push(`Type: ${s.filterType}`),s.filterStatus!=="all"&&l.push(`Status: ${s.filterStatus}`),s.filterDefault!=="all"&&l.push(`Default: ${s.filterDefault}`),(s.dateFrom||s.dateTo)&&(s.dateFrom&&s.dateTo?l.push(`Date: ${s.dateFrom} to ${s.dateTo}`):s.dateFrom?l.push(`Date: From ${s.dateFrom}`):s.dateTo&&l.push(`Date: Until ${s.dateTo}`)),(s.balanceMin!==void 0||s.balanceMax!==void 0)&&(s.balanceMin!==void 0&&s.balanceMax!==void 0?l.push(`Balance: ₱${s.balanceMin.toLocaleString()} to ₱${s.balanceMax.toLocaleString()}`):s.balanceMin!==void 0?l.push(`Balance: Min ₱${s.balanceMin.toLocaleString()}`):s.balanceMax!==void 0&&l.push(`Balance: Max ₱${s.balanceMax.toLocaleString()}`)),l},[s]),P=i.useMemo(()=>{const l=[];if(s.dateFrom&&s.dateTo){const n=new Date(s.dateFrom),t=new Date(s.dateTo);n>t&&l.push("Start date must be before end date")}return s.balanceMin!==void 0&&s.balanceMax!==void 0&&s.balanceMin>s.balanceMax&&l.push("Minimum balance must be less than maximum balance"),(s.pageSize<1||s.pageSize>100)&&l.push("Page size must be between 1 and 100"),{isValid:l.length===0,errors:l}},[s]),M=i.useMemo(()=>{const l=new URLSearchParams;return Object.entries(s).forEach(([n,t])=>{if(t!==""&&t!=="all"&&t!==void 0&&t!==null){if(n==="currentPage"&&t===1||n==="pageSize"&&t===10||n==="sortField"&&t==="created_at"||n==="sortDirection"&&t==="desc")return;l.set(n,t.toString())}}),l.toString()},[s]),A=i.useCallback(l=>{const n=new URLSearchParams(l),t={};n.forEach((p,_)=>{switch(_){case"searchTerm":case"filterUser":case"filterType":case"filterStatus":case"filterDefault":case"sortField":case"dateFrom":case"dateTo":t[_]=p;break;case"sortDirection":t.sortDirection=p;break;case"currentPage":case"pageSize":t[_]=parseInt(p,10);break;case"balanceMin":case"balanceMax":const R=parseFloat(p);isNaN(R)||(t[_]=R);break}}),Object.keys(t).length>0&&a(t)},[a]);return{filters:i.useMemo(()=>s,[s.searchTerm,s.filterUser,s.filterType,s.filterStatus,s.filterDefault,s.sortField,s.sortDirection,s.currentPage,s.pageSize,s.dateFrom,s.dateTo,s.balanceMin,s.balanceMax]),updateFilters:a,resetFilters:r,updateSearchTerm:u,updateUserFilter:h,updateTypeFilter:o,updateStatusFilter:N,updateDefaultFilter:w,updateSort:j,updatePage:y,updatePageSize:x,updateDateRange:k,updateBalanceRange:D,clearDateFilters:c,clearBalanceFilters:b,hasActiveFilters:S,getActiveFilterCount:C,getFilterSummary:z,validateFilters:P,getQueryString:M,loadFromQueryString:A}},_e=()=>{const[s,g]=i.useState(null),[a,r]=i.useState(!1),[u,h]=i.useState(!1),[o,N]=i.useState(!1),[w,j]=i.useState(!1),[y,x]=i.useState(new Date),[k,D]=i.useState(!1),[c,b]=i.useState(!1),{showSuccessToast:S,showErrorToast:C}=re(),{accounts:z,users:P,stats:M,loading:A,error:U,totalPages:l,totalItems:n,fetchAccounts:t,createAccount:p,updateAccount:_,deleteAccount:R,setDefaultAccount:d,refreshData:m}=je(),{filters:f,updateFilters:v,resetFilters:E,hasActiveFilters:W,getActiveFilterCount:G,updateSort:V,updatePage:T}=ge(),Y=i.useRef(!0),L=i.useRef(f);i.useEffect(()=>{if(Y.current){Y.current=!1,L.current=f;return}JSON.stringify(L.current)!==JSON.stringify(f)&&!A&&P.length>0&&(L.current=f,t(f))},[f,A,P.length,t]);const I=i.useCallback(async()=>{D(!0);try{await m(f),x(new Date),b(!0),setTimeout(()=>b(!1),3e3)}catch(F){console.error("Error refreshing data:",F),C("Failed to refresh account data")}finally{D(!1)}},[m,f,C]),q=i.useCallback(F=>{g(F),N(!0)},[]),K=i.useCallback(F=>{g(F),h(!0)},[]),X=i.useCallback(F=>{g(F),j(!0)},[]),ne=i.useCallback(async F=>{try{await d(F.id,F.user_id)&&await t(f)}catch($){console.error("Error setting default account:",$)}},[d,t,f]),H=i.useCallback(async F=>{try{return await p(F)?(await t(f),!0):!1}catch($){return console.error("Error adding account:",$),!1}},[p,t,f]),ie=i.useCallback(async(F,$)=>{try{return await _(F,$)?(await t(f),!0):!1}catch(ce){return console.error("Error updating account:",ce),!1}},[_,t,f]),de=i.useCallback(async F=>{try{return await R(F)?(await t(f),!0):!1}catch($){return console.error("Error deleting account:",$),!1}},[R,t,f]),Z=i.useCallback(()=>{g(null),r(!1),h(!1),N(!1),j(!1)},[]);return A?e.jsxs("div",{className:"modern-user-management",children:[e.jsx("div",{className:"d-block d-md-none py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading accounts..."})]})}),e.jsxs("div",{className:"d-none d-md-block",children:[e.jsx("div",{className:"user-management-header mb-5",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start flex-wrap",children:[e.jsx("div",{className:"header-content",children:e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"skeleton-icon mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"skeleton-line skeleton-header-title mb-2"}),e.jsx("div",{className:"skeleton-line skeleton-header-subtitle"})]})]})}),e.jsxs("div",{className:"header-actions d-flex align-items-center",children:[e.jsx("div",{className:"skeleton-line mr-3",style:{width:"150px",height:"16px"}}),e.jsx("div",{className:"skeleton-line",style:{width:"120px",height:"40px"}})]})]})}),e.jsx("div",{className:"stats-cards-container mb-5",children:e.jsx("div",{className:"row",children:Array.from({length:4}).map((F,$)=>e.jsx("div",{className:"col-xl-3 col-md-6 col-sm-12 mb-3",children:e.jsx("div",{className:"user-stat-card admin-card-loading",children:e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-icon",children:e.jsx("div",{className:"skeleton-icon"})}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"skeleton-line skeleton-stat-value mb-2"}),e.jsx("div",{className:"skeleton-line skeleton-stat-title"})]})]})})},$))})}),e.jsx("div",{className:"controls-section mb-4",children:e.jsx("div",{className:"card shadow-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"skeleton-line skeleton-search-bar"})}),e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"skeleton-line skeleton-filter"})}),e.jsx("div",{className:"col-md-3",children:e.jsx("div",{className:"skeleton-line skeleton-filter"})})]})})})}),e.jsx("div",{className:"table-section",children:e.jsxs("div",{className:"card shadow",children:[e.jsx("div",{className:"card-header py-3",children:e.jsx("div",{className:"skeleton-line skeleton-section-title"})}),e.jsx("div",{className:"card-body p-0",children:e.jsxs("div",{className:"skeleton-table",children:[e.jsx("div",{className:"skeleton-table-header mb-3"}),Array.from({length:8}).map((F,$)=>e.jsx("div",{className:"skeleton-table-row mb-2",children:e.jsx("div",{className:"skeleton-line skeleton-table-cell"})},$))]})})]})})]})]}):e.jsxs("div",{className:"modern-user-management",children:[e.jsx("div",{className:"d-block d-md-none mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800",children:"Accounts"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:I,className:"w-9 h-9 rounded-full bg-red-500 hover:bg-red-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95 disabled:opacity-50",disabled:k,"aria-label":"Refresh data",children:e.jsx("i",{className:`fas fa-sync text-xs ${k?"fa-spin":""}`})}),e.jsx("button",{onClick:()=>r(!0),className:"w-9 h-9 rounded-full bg-rose-600 hover:bg-rose-700 text-white flex items-center justify-center shadow-md transition-all active:scale-95","aria-label":"Add account",children:e.jsx("i",{className:"fas fa-plus text-xs"})})]})]})}),e.jsx("div",{className:"user-management-header mb-5 d-none d-md-block",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start flex-wrap",children:[e.jsx("div",{className:"header-content",children:e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"header-icon-container mr-3",children:e.jsx("i",{className:"fas fa-university"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"header-title mb-1",children:"Account Management"}),e.jsx("p",{className:"header-subtitle mb-0",children:"Monitor and manage user accounts across the platform with advanced filtering and analytics"})]})]})}),e.jsxs("div",{className:"header-actions d-flex align-items-center",children:[c&&e.jsxs("div",{className:"alert alert-success alert-dismissible fade show mr-3 mb-0 py-2 px-3",role:"alert",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"}),"Data updated successfully!"]}),e.jsx("div",{className:"last-updated-info mr-3",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"far fa-clock mr-1"}),"Last updated: ",y.toLocaleTimeString()]})}),e.jsxs("button",{className:"btn btn-outline-danger btn-sm shadow-sm refresh-btn mr-2",onClick:I,disabled:A||k,children:[e.jsx("i",{className:`fas fa-sync-alt mr-1 ${k?"fa-spin":""}`}),k?"Refreshing...":"Refresh"]}),e.jsxs("button",{className:"btn btn-danger btn-sm shadow-sm",onClick:()=>r(!0),disabled:A||k,children:[e.jsx("i",{className:"fas fa-plus mr-1"}),"Add Account"]})]})]})}),U&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show mb-4",role:"alert",children:[e.jsx("i",{className:"fas fa-exclamation-circle mr-2"}),e.jsx("strong",{children:"Error:"})," ",U,e.jsx("button",{type:"button",className:"close",onClick:()=>window.location.reload(),children:e.jsx("span",{children:"×"})})]}),e.jsx("div",{className:"stats-cards-container mb-5",children:e.jsx(me,{stats:M,loading:A})}),e.jsx("div",{className:"controls-section mb-4",children:e.jsx(xe,{filters:f,users:P,onFiltersChange:v,onReset:E,loading:A,hasActiveFilters:W,activeFilterCount:G})}),e.jsx("div",{className:"table-section",children:e.jsx(he,{accounts:z,filters:f,totalPages:l,totalItems:n,loading:A,onSort:V,onPageChange:T,onAccountView:q,onAccountEdit:K,onAccountDelete:X,onSetDefault:ne})}),e.jsx(ue,{show:a,onClose:Z,onAdd:H,users:P,loading:A}),e.jsx(fe,{show:u,onClose:Z,onUpdate:ie,account:s,users:P,loading:A}),e.jsx(be,{show:o,onClose:Z,account:s}),e.jsx(pe,{show:w,onClose:Z,onDelete:de,account:s,loading:A})]})};export{_e as default};
