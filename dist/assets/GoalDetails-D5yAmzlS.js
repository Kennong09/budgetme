import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{i as De,u as $e,r as n,R as Fe,L as f}from"./react-vendor-D4A9EtXC.js";import{u as Ee,b as Ae,i as Re,s as c,g as Ie,e as fe,c as te,f as h,d as B,h as Pe}from"./index-BbApZ7g3.js";import{G as Me}from"./GoalsErrorBoundary-CvmDXTvD.js";import{d as H,H as A}from"./chart-vendor-B0c7K_uV.js";/* empty css                       */const Le=()=>{const{id:l}=De(),R=$e(),{user:j}=Ee(),{showSuccessToast:ue,showErrorToast:S}=Ae(),{currencySymbol:I}=Re(),[a,J]=n.useState(null),[g,ie]=n.useState([]),[be,P]=n.useState(!0),[M,pe]=n.useState(!1),[y,re]=n.useState(null),[K,le]=n.useState(null),[W,L]=n.useState(!1),[Q,Z]=n.useState(null),[je,D]=n.useState(!1),[qe,Y]=n.useState(!1),[ze,ee]=n.useState(null),[Ue,se]=n.useState(null),[$,ye]=n.useState(!1),[T,Ne]=n.useState(!1),[C,ae]=n.useState(""),ne=n.useRef(null),oe=n.useRef(null),ve=n.useRef(null),[F,ce]=n.useState(null),[q,we]=n.useState(null),[de,_e]=n.useState(null),[me,Ce]=n.useState(null),[xe,ke]=n.useState(null),[he,Se]=n.useState(null),Te=async()=>{try{if(P(!0),!j){S("Please sign in to view goal details"),R("/login");return}const{data:s,error:i}=await Pe.fetchGoals(j.id);if(i)throw i;if(!s)throw new Error("No goals data received from service");let d=s.find(t=>t.id===l);if(!d){console.log("Goal not found in user goals, checking if it exists in database...");const{data:t,error:x}=await c.from("goals").select("*").eq("id",l).single();if(x||!t)throw new Error("Goal not found or you do not have permission to view it");d={...t,remaining_amount:Math.max(0,t.target_amount-t.current_amount),percentage_complete:t.target_amount>0?Math.min(t.current_amount/t.target_amount*100,100):0,progress_status:t.current_amount>=t.target_amount?"completed":t.current_amount/t.target_amount>=.75?"near_completion":t.current_amount/t.target_amount>=.25?"in_progress":"getting_started"}}J(d);let r,m;try{const t=await c.from("transaction_details").select("*").eq("goal_id",l).order("date",{ascending:!1});r=t.data,m=t.error}catch{console.log("Error with transaction_details view, falling back to transactions table");const x=await c.from("transactions").select("*").eq("goal_id",l).order("date",{ascending:!1});r=x.data,m=x.error}m&&!r&&(console.error("Error fetching transactions:",m.message),r=[]);let o=[];try{console.log(`Fetching goal contributions for goal ID: ${l}`);const{data:t,error:x}=await c.from("goal_contributions").select("*").eq("goal_id",l).order("contribution_date",{ascending:!1});if(x)console.error("Error fetching goal contributions:",x.message);else if(t)if(console.log(`Found ${t.length} contributions for this goal:`,t),o=t.map(p=>({id:p.id,goal_id:p.goal_id,user_id:p.user_id,amount:p.amount,date:p.contribution_date,notes:p.notes||"Goal contribution",type:"expense",category:"Goal Contribution",created_at:p.created_at})),r&&r.length>0){const p=new Set(r.map(G=>G.id)),w=o.filter(G=>!p.has(G.id));r=[...r,...w]}else r=o}catch(t){console.error("Error processing goal contributions:",t)}r&&r.length>0?(r.sort((t,x)=>new Date(x.date).getTime()-new Date(t.date).getTime()),console.log(`Sorted transactions data (${r.length} items):`,r)):console.log("No transactions data to sort"),console.log(`Final transactions data (${r?.length||0} items):`,r),ie(r||[]),d&&O(d,r||[]),P(!1),pe(!0)}catch(s){console.error("Error loading goal data:",s);const i=s instanceof Error?s.message:"Unknown error occurred";i.includes("schema cache")||i.includes("does not exist")?S("Goals system is being updated. Please try again in a moment."):i.includes("unauthorized")||i.includes("authentication")?(S("Session expired. Please sign in again."),R("/login")):i.includes("not found")||i.includes("permission")?(S("Goal not found or you do not have permission to view it."),R("/goals")):S(`Failed to load goal details: ${i}`),Z(i),P(!1)}},E=Fe.useCallback(Te,[l,j,R,S]);n.useEffect(()=>{E();const s=()=>{console.log("Window focused, refreshing goal data"),E()};return window.addEventListener("focus",s),()=>{window.removeEventListener("focus",s)}},[E]),n.useEffect(()=>{(async()=>{if(!(!j||!a))try{const{data:i,error:d}=await c.from("family_members").select(`
            id,
            family_id,
            role,
            status,
            families:family_id (
              id,
              family_name
            )
          `).eq("user_id",j.id).eq("status","active").limit(1);if(!d&&i&&i.length>0)Y(!0),ee(i[0].family_id),se(i[0].role),i[0].families&&typeof i[0].families=="object"&&"family_name"in i[0].families&&ae(i[0].families.family_name);else{const{data:m,error:o}=await c.rpc("check_user_family",{p_user_id:j.id});if(!o&&m&&(Array.isArray(m)&&m.length>0&&m[0].is_member||m.is_member)){const t=Array.isArray(m)?m[0].family_id:m.family_id;Y(!0),ee(t);const{data:x,error:p}=await c.from("family_members").select("role").eq("user_id",j.id).eq("family_id",t).single();!p&&x&&se(x.role);const{data:w,error:G}=await c.from("families").select("family_name").eq("id",t).single();!G&&w&&ae(w.family_name)}else Y(!1),ee(null),se(null)}const r=a.family_id!==void 0&&a.family_id!==null;if(ye(r),r&&a.family_id&&!C){const{data:m,error:o}=await c.from("families").select("family_name").eq("id",a.family_id).single();!o&&m&&ae(m.family_name)}Ne(a.user_id===j.id)}catch(i){console.error("Error checking family status:",i),Y(!1)}})()},[j,a,C,c]),n.useEffect(()=>{if(!j||!l)return;me&&c.removeChannel(me),xe&&c.removeChannel(xe),he&&c.removeChannel(he);const s=c.channel(`goal_${l}_changes`).on("postgres_changes",{event:"*",schema:"public",table:"goals",filter:`id=eq.${l}`},r=>{console.log("Goal update received:",r),(async()=>{try{const{data:o,error:t}=await c.from("goal_details").select("*").eq("id",l).single();if(t)throw t;o&&(J(o),g.length>0&&O(o,g))}catch(o){console.error("Error refreshing goal data:",o)}})()}).subscribe(),i=c.channel(`goal_${l}_transactions`).on("postgres_changes",{event:"*",schema:"public",table:"transactions",filter:`goal_id=eq.${l}`},r=>{console.log("Transaction update received:",r),(async()=>{try{let o;try{o=await c.from("transaction_details").select("*").eq("goal_id",l).order("date",{ascending:!1})}catch{console.log("Error with transaction_details view in subscription, falling back"),o=await c.from("transactions").select("*").eq("goal_id",l).order("date",{ascending:!1})}if(o.error&&console.error("Error refreshing transaction data:",o.error),o.data){ie(o.data);const{data:t,error:x}=await c.from("goal_details").select("*").eq("id",l).single();!x&&t?(J(t),O(t,o.data)):a&&O(a,o.data)}}catch(o){console.error("Error refreshing transaction data:",o)}})()}).subscribe(),d=c.channel(`goal_${l}_contributions`).on("postgres_changes",{event:"*",schema:"public",table:"goal_contributions",filter:`goal_id=eq.${l}`},r=>{console.log("Goal contribution update received:",r),E()}).subscribe();return Ce(s),ke(i),Se(d),()=>{console.log("Cleaning up subscriptions"),s&&c.removeChannel(s),i&&c.removeChannel(i),d&&c.removeChannel(d)}},[l,j]);const O=(s,i)=>{const d=s.current_amount/s.target_amount*100;ce({chart:{type:"solidgauge",height:200,backgroundColor:"transparent"},title:null,pane:{center:["50%","85%"],size:"140%",startAngle:-90,endAngle:90,background:{backgroundColor:"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},tooltip:{enabled:!1},yAxis:{min:0,max:100,stops:[[.3,"#e74a3b"],[.5,"#f6c23e"],[.7,"#1cc88a"]],lineWidth:0,tickWidth:0,minorTickInterval:null,tickAmount:2,labels:{enabled:!1}},plotOptions:{solidgauge:{dataLabels:{y:5,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:"Progress",data:[{y:Math.min(d,100),innerRadius:"60%",radius:"100%"}],dataLabels:{format:'<div style="text-align:center"><span style="font-size:24px;font-weight:bold">{y:.1f}%</span></div>'},rounded:!0}]}),A.seriesTypes.solidgauge||ce({chart:{type:"pie",height:200,backgroundColor:"transparent"},title:null,tooltip:{enabled:!1},plotOptions:{pie:{innerSize:"80%",dataLabels:{enabled:!1},borderWidth:0,startAngle:-90,endAngle:90,center:["50%","85%"]}},series:[{name:"Progress",data:[{name:"Completed",y:Math.min(d,100),color:d>=75?"#1cc88a":d>=40?"#f6c23e":"#e74a3b"},{name:"Remaining",y:Math.max(0,100-d),color:"#e9ecef"}],size:"170%",innerSize:"80%"}],credits:{enabled:!1}});const r={};i&&i.length>0&&i.forEach(b=>{if(b.date&&b.amount){const _=b.date.substring(0,7);r[_]||(r[_]=0),r[_]+=b.amount}});const m=Object.keys(r).sort(),o=m.map(b=>r[b]);we({chart:{type:"column",height:250,backgroundColor:"transparent",style:{fontFamily:"'Nunito', 'Segoe UI', Roboto, sans-serif"}},title:{text:null},xAxis:{categories:m.map(b=>new Date(b+"-01").toLocaleDateString("en-US",{month:"short",year:"numeric"})),crosshair:!0,labels:{style:{color:"#858796"}}},yAxis:{min:0,title:{text:null},gridLineColor:"#eaecf4",gridLineDashStyle:"dash",labels:{format:`${I}{value}`,style:{color:"#858796"}}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:`<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>${I}{point.y:.2f}</b></td></tr>`,footerFormat:"</table>",shared:!0,useHTML:!0,style:{fontSize:"12px",fontFamily:"'Nunito', 'Segoe UI', Roboto, sans-serif"}},plotOptions:{column:{pointPadding:.2,borderWidth:0,borderRadius:4},series:{animation:{duration:1e3}}},series:[{name:"Contributions",data:o,color:"#4e73df",type:"column"}],credits:{enabled:!1}});const t=new Date,x=new Date(s.target_date),p=(x.getFullYear()-t.getFullYear())*12+(x.getMonth()-t.getMonth()),w=[];i&&i.length>0&&i.reduce((b,_)=>b+(_.amount||0),0);const G=fe(s);let X=s.current_amount;w.push({x:t.getTime(),y:X,marker:{fillColor:"#4e73df",radius:5}});for(let b=1;b<=p+1;b++){const _=new Date(t);if(_.setMonth(t.getMonth()+b),X+=G,X>s.target_amount){w.push({x:_.getTime(),y:s.target_amount,marker:{fillColor:"#1cc88a",radius:6,symbol:"circle"}});break}else w.push({x:_.getTime(),y:X})}w.push({x:x.getTime(),y:s.target_amount,marker:{fillColor:"#1cc88a",radius:7,symbol:"diamond"},dataLabels:{enabled:!0,format:"Target: ${y}"}}),_e({chart:{type:"spline",height:250,backgroundColor:"transparent"},title:{text:null},xAxis:{type:"datetime",labels:{format:"{value:%b %Y}"}},yAxis:{min:0,max:Math.ceil(s.target_amount*1.1/1e3)*1e3,title:{text:null},labels:{format:`${I}{value}`},plotLines:[{value:s.target_amount,color:"#1cc88a",dashStyle:"shortdash",width:2,label:{text:`Target: ${I}${s.target_amount}`}}]},tooltip:{headerFormat:"<b>{point.x:%b %Y}</b><br>",pointFormat:`Projected Balance: ${I}{point.y:,.2f}`},plotOptions:{spline:{marker:{enabled:!1},lineWidth:3}},series:[{name:"Balance Projection",data:w,color:"#4e73df"}],credits:{enabled:!1}})},Ge=async()=>{try{if(L(!0),!j){S("You must be signed in to delete goals"),L(!1),D(!1);return}const{error:s}=await c.from("goals").delete().eq("id",l);if(s)throw new Error(`Error deleting goal: ${s.message}`);ue("Goal deleted successfully!"),D(!1),R("/goals")}catch(s){console.error("Error deleting goal:",s);const i=s instanceof Error?s.message:"Unknown error occurred";S(`Failed to delete goal: ${i}`),L(!1)}},N=(s,i)=>{if(y===s)re(null),le(null);else if(re(s),i){const d=i.currentTarget.getBoundingClientRect();le({top:d.bottom+window.scrollY,left:d.left+d.width/2+window.scrollX})}};if(be)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 font-medium",children:"Loading goal details..."})]})}),e.jsxs("div",{className:"text-center my-5 hidden md:block",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})}),e.jsx("h4",{className:"text-gray-800 mt-3 mb-2",children:"Loading goal details..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we retrieve your goal information"}),e.jsx("div",{className:"progress mt-4",style:{height:"10px",maxWidth:"300px",margin:"0 auto"},children:e.jsx("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:"100%"}})})]})]});if(Q)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center px-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-rose-100 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-database text-rose-500 text-2xl"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:"Error Loading Goal"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:Q}),e.jsxs("div",{className:"flex flex-col gap-2 w-full max-w-xs",children:[e.jsxs("button",{onClick:()=>{Z(null),P(!0),E()},className:"w-full py-2.5 bg-indigo-500 text-white text-sm font-medium rounded-xl hover:bg-indigo-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-sync-alt text-xs"}),"Try Again"]}),e.jsxs(f,{to:"/goals",className:"w-full py-2.5 bg-gray-100 text-gray-700 text-sm font-medium rounded-xl hover:bg-gray-200 transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left text-xs"}),"Back to Goals"]})]})]})}),e.jsxs("div",{className:"text-center my-5 animate__animated animate__fadeIn hidden md:block",children:[e.jsx("div",{className:"error-icon mb-4",children:e.jsx("i",{className:"fas fa-database fa-4x text-danger"})}),e.jsx("h1",{className:"h3 mb-3 font-weight-bold text-gray-800",children:"Error Loading Goal"}),e.jsxs("p",{className:"mb-4 text-gray-600",children:["Unable to load goal details: ",Q]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-600",children:"You can try one of the following:"}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-center mt-3",children:[e.jsxs("button",{onClick:()=>{Z(null),P(!0),E()},className:"btn btn-primary mb-2 mb-md-0 mr-md-3",children:[e.jsx("i",{className:"fas fa-sync-alt mr-2"})," Try Again"]}),e.jsxs(f,{to:"/goals",className:"btn btn-secondary mb-2 mb-md-0 mr-md-3",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"})," Back to Goals"]}),e.jsxs(f,{to:"/goals/create",className:"btn btn-success",children:[e.jsx("i",{className:"fas fa-plus-circle mr-2"})," Create New Goal"]})]})]})]})]});if(!a)return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"block md:hidden py-12 animate__animated animate__fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center px-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-amber-500 text-2xl"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:"Goal not found"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"The goal you're looking for does not exist or has been deleted."}),e.jsxs("div",{className:"flex flex-col gap-2 w-full max-w-xs",children:[e.jsxs(f,{to:"/goals",className:"w-full py-2.5 bg-indigo-500 text-white text-sm font-medium rounded-xl hover:bg-indigo-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-arrow-left text-xs"}),"View All Goals"]}),e.jsxs(f,{to:"/goals/create",className:"w-full py-2.5 bg-emerald-500 text-white text-sm font-medium rounded-xl hover:bg-emerald-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-plus text-xs"}),"Create New Goal"]})]})]})}),e.jsxs("div",{className:"text-center my-5 animate__animated animate__fadeIn hidden md:block",children:[e.jsx("div",{className:"error-icon mb-4",children:e.jsx("i",{className:"fas fa-exclamation-triangle fa-4x text-warning"})}),e.jsx("h1",{className:"h3 mb-3 font-weight-bold text-gray-800",children:"Goal not found"}),e.jsx("p",{className:"mb-4 text-gray-600",children:"The goal you're looking for does not exist or has been deleted."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-gray-600",children:"You can try one of the following:"}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-center mt-3",children:[e.jsxs(f,{to:"/goals",className:"btn btn-primary mb-2 mb-md-0 mr-md-3",children:[e.jsx("i",{className:"fas fa-arrow-left mr-2"})," View All Goals"]}),e.jsxs(f,{to:"/goals/create",className:"btn btn-success",children:[e.jsx("i",{className:"fas fa-plus-circle mr-2"})," Create New Goal"]})]})]})]})]});const u=a.current_amount/a.target_amount*100,V=a.target_amount-a.current_amount,z=Ie(a.target_date),ge=fe(a);let v,U;u>=75?(v="success",U="check-circle"):u>=40?(v="warning",U="clock"):(v="danger",U="exclamation-circle");let k;return a.priority==="high"?k="danger":a.priority==="medium"?k="warning":k="info",e.jsxs("div",{className:"container-fluid animate__animated animate__fadeIn",children:[e.jsxs("div",{className:"block md:hidden",children:[e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-base font-bold text-gray-800 truncate flex-1 mr-2",children:a.goal_name}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.status!=="completed"&&a.status!=="cancelled"&&e.jsx(f,{to:`/goals/${l}/contribute`,className:"w-9 h-9 rounded-full bg-emerald-500 hover:bg-emerald-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95","aria-label":"Contribute to goal",children:e.jsx("i",{className:"fas fa-plus text-xs"})}),T&&a.status!=="completed"&&a.status!=="cancelled"&&e.jsx(f,{to:`/goals/${l}/edit`,className:"w-9 h-9 rounded-full bg-indigo-500 hover:bg-indigo-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95","aria-label":"Edit goal",children:e.jsx("i",{className:"fas fa-edit text-xs"})}),T&&e.jsx("button",{onClick:()=>D(!0),className:"w-9 h-9 rounded-full bg-rose-500 hover:bg-rose-600 text-white flex items-center justify-center shadow-md transition-all active:scale-95","aria-label":"Delete goal",children:e.jsx("i",{className:"fas fa-trash text-xs"})}),e.jsx(f,{to:"/goals",className:"w-9 h-9 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 flex items-center justify-center shadow-sm transition-all active:scale-95","aria-label":"Back to goals",children:e.jsx("i",{className:"fas fa-arrow-left text-xs"})})]})]})}),e.jsxs("div",{className:`bg-gradient-to-br ${u>=100?"from-emerald-500 via-teal-500 to-cyan-500":u>=75?"from-blue-500 via-indigo-500 to-purple-500":u>=40?"from-amber-500 via-orange-500 to-yellow-500":"from-rose-500 via-red-500 to-orange-500"} rounded-2xl p-4 mb-3 shadow-lg`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:$?"Family Goal":"Personal Goal"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:`fas fa-${u>=100?"check-circle":"bullseye"} text-white text-sm`})})]}),e.jsx("div",{className:"text-white text-2xl font-bold mb-1",children:te(u)}),e.jsxs("div",{className:"text-white/70 text-xs mb-3",children:[h(a.current_amount)," of ",h(a.target_amount)]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(u,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-blue-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-bullseye text-blue-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Target"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:h(a.target_amount)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-emerald-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-piggy-bank text-emerald-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Saved"}),e.jsx("p",{className:"text-sm font-bold text-gray-800",children:h(a.current_amount)})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-amber-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-hourglass-half text-amber-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Remaining"}),e.jsx("p",{className:`text-sm font-bold ${V<=0?"text-emerald-600":"text-gray-800"}`,children:h(Math.max(0,V))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-100 flex items-center justify-center mb-2",children:e.jsx("i",{className:"fas fa-calendar text-indigo-500 text-xs"})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Days Left"}),e.jsx("p",{className:`text-sm font-bold ${z<=0?"text-rose-600":"text-gray-800"}`,children:z>0?z:"Overdue"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-4 mb-3 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chart-line text-white text-sm"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white/80 text-[10px] font-medium uppercase tracking-wide",children:"Monthly Saving"}),e.jsx("p",{className:"text-white text-lg font-bold",children:h(ge)}),e.jsxs("p",{className:"text-white/60 text-[10px]",children:["To reach goal by ",B(a.target_date)]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-lg bg-${v}-100 flex items-center justify-center`,children:e.jsx("i",{className:`fas fa-${U} text-${v}-500 text-[10px]`})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Status"})]}),e.jsx("p",{className:`text-xs font-bold text-${v}-600 capitalize`,children:a.status?.replace("_"," ")})]}),e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-lg bg-${k}-100 flex items-center justify-center`,children:e.jsx("i",{className:`fas fa-flag text-${k}-500 text-[10px]`})}),e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide",children:"Priority"})]}),e.jsx("p",{className:`text-xs font-bold text-${k}-600 capitalize`,children:a.priority})]})]}),$&&e.jsx("div",{className:"bg-blue-50 rounded-xl p-3 mb-3 border border-blue-100",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-users text-blue-500 text-xs"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-800",children:"Family Shared Goal"}),e.jsxs("p",{className:"text-[10px] text-blue-600",children:["Shared with ",C||"your family",!T&&" • Created by another member"]})]})]})}),a.description&&e.jsxs("div",{className:"bg-white rounded-xl p-3 shadow-sm border border-gray-100 mb-3",children:[e.jsx("p",{className:"text-[9px] text-gray-500 font-medium uppercase tracking-wide mb-1",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-700",children:a.description})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden mb-3",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("h6",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-chart-bar text-indigo-500 text-[10px]"}),"Progress Charts"]})}),e.jsxs("div",{className:"p-4",children:[M&&F&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-wide mb-2",children:"Progress Gauge"}),e.jsx(H,{highcharts:A,options:{...F,chart:{...F.chart,height:180}},ref:ne})]}),M&&q&&g.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-wide mb-2",children:"Contributions"}),e.jsx(H,{highcharts:A,options:{...q,chart:{...q.chart,height:200}},ref:oe})]}),(!g||g.length===0)&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-chart-bar text-gray-400 text-lg"})}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"No contributions yet"}),a.status!=="completed"&&a.status!=="cancelled"&&e.jsxs(f,{to:`/goals/${l}/contribute`,className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-500 text-white text-xs font-medium rounded-lg hover:bg-emerald-600 transition-colors",children:[e.jsx("i",{className:"fas fa-plus text-[10px]"}),"Add Contribution"]})]})]})]}),g&&g.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden mb-4",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsxs("h6",{className:"text-xs font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-history text-indigo-500 text-[10px]"}),"Recent Contributions",e.jsx("span",{className:"bg-indigo-100 text-indigo-600 px-1.5 py-0.5 rounded-full text-[9px]",children:g.length})]})}),e.jsx("div",{className:"divide-y divide-gray-100",children:g.slice(0,5).map(s=>e.jsx("div",{className:"px-4 py-3 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-plus text-emerald-500 text-xs"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-800",children:h(s.amount)}),e.jsx("p",{className:"text-[10px] text-gray-500",children:B(s.date)})]})]})},s.id))})]})]}),e.jsxs("div",{className:"hidden md:block",children:[je&&e.jsx("div",{className:"modal",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Confirm Deletion"}),e.jsx("button",{type:"button",className:"close",onClick:()=>{D(!1),L(!1)},disabled:W,children:e.jsx("span",{"aria-hidden":"true",children:"×"})})]}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"rounded-circle mx-auto d-flex align-items-center justify-content-center",style:{width:"80px",height:"80px",backgroundColor:"rgba(246, 194, 62, 0.2)"},children:e.jsx("i",{className:"fas fa-exclamation-triangle fa-3x text-warning"})})}),e.jsx("p",{children:"Are you sure you want to delete this goal? This action cannot be undone."}),a&&e.jsxs("div",{className:"alert alert-secondary mt-3",children:[e.jsx("strong",{children:"Goal:"})," ",a.goal_name,e.jsx("br",{}),e.jsx("strong",{children:"Current Amount:"})," ",h(a.current_amount)," of ",h(a.target_amount)]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-center",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{D(!1),L(!1)},disabled:W,children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:Ge,disabled:W,children:W?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm mr-2",role:"status","aria-hidden":"true"}),"Delete"]}):"Delete"})]})]})})}),e.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[e.jsxs("h1",{className:"h3 mb-0 text-gray-800",children:[a?a.goal_name:"Goal Details",a&&a.is_family_goal?e.jsxs("span",{className:"badge badge-info ml-2",children:[e.jsx("i",{className:"fas fa-users mr-1"})," Family"]}):e.jsxs("span",{className:"badge badge-secondary ml-2",children:[e.jsx("i",{className:"fas fa-user mr-1"})," Personal"]})]}),e.jsxs("div",{className:"d-flex",children:[a&&e.jsxs(e.Fragment,{children:[a.status==="completed"||a.status==="cancelled"?e.jsxs("button",{className:"btn btn-success shadow-sm mr-2 d-flex align-items-center",disabled:!0,children:[e.jsx("i",{className:"fas fa-plus-circle mr-2"})," Contribute"]}):e.jsxs(f,{to:`/goals/${l}/contribute`,className:"btn btn-success shadow-sm mr-2 d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-plus-circle mr-2"})," Contribute"]}),T&&a.status!=="completed"&&a.status!=="cancelled"&&e.jsxs(f,{to:`/goals/${l}/edit`,className:"btn btn-primary shadow-sm mr-2 d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-edit mr-2"})," Edit"]}),T&&e.jsxs("button",{className:"btn btn-danger shadow-sm mr-2 d-flex align-items-center",onClick:()=>D(!0),children:[e.jsx("i",{className:"fas fa-trash mr-2"})," Delete"]})]}),e.jsxs(f,{to:"/goals",className:"btn btn-secondary shadow-sm d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-arrow-left fa-sm mr-2"})," Back to Goals"]})]})]}),$&&e.jsx("div",{className:"card mb-4 border-left-info shadow-sm animate__animated animate__fadeIn",children:e.jsx("div",{className:"card-body py-3",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsx("div",{className:"col-auto pr-3",children:e.jsx("i",{className:"fas fa-users-cog fa-2x text-info"})}),e.jsxs("div",{className:"col",children:[e.jsxs("div",{className:"font-weight-bold text-info mb-1 d-flex align-items-center",children:["Family Shared Goal",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("sharedGoal",s),"aria-label":"Shared Goal Information",style:{cursor:"pointer"}})})]}),e.jsxs("div",{className:"text-gray-800",children:["This goal is shared with ",C?`the "${C}" family`:"your family",".",!T&&e.jsx("span",{children:" Created by another family member."})]})]}),e.jsx("div",{className:"col-auto",children:e.jsxs("div",{className:"badge badge-light p-2",children:[e.jsx("i",{className:"fas fa-eye mr-1"})," Visible to family members"]})})]})})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-3 col-md-6 mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.1s"},children:e.jsx("div",{className:"card border-left-primary shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1 d-flex align-items-center",children:["Target Amount",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("targetAmount",s),"aria-label":"Target Amount information",style:{cursor:"pointer"}})})]}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:h(a.target_amount)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-bullseye fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6 mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.2s"},children:e.jsx("div",{className:"card border-left-success shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-weight-bold text-success text-uppercase mb-1 d-flex align-items-center",children:["Current Amount",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("currentAmount",s),"aria-label":"Current Amount information",style:{cursor:"pointer"}})})]}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:h(a.current_amount)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-piggy-bank fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6 mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.3s"},children:e.jsx("div",{className:"card border-left-warning shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-weight-bold text-warning text-uppercase mb-1 d-flex align-items-center",children:["Remaining",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("remaining",s),"aria-label":"Remaining amount information",style:{cursor:"pointer"}})})]}),e.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:h(V)})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-hourglass-half fa-2x text-gray-300"})})]})})})}),e.jsx("div",{className:"col-xl-3 col-md-6 mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.4s"},children:e.jsx("div",{className:"card border-left-info shadow h-100 py-2",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row no-gutters align-items-center",children:[e.jsxs("div",{className:"col mr-2",children:[e.jsxs("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1 d-flex align-items-center",children:["Time Remaining",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("timeRemaining",s),"aria-label":"Time Remaining information",style:{cursor:"pointer"}})})]}),e.jsxs("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:[z," days"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Target: ",B(a.target_date)]})]}),e.jsx("div",{className:"col-auto",children:e.jsx("i",{className:"fas fa-calendar fa-2x text-gray-300"})})]})})})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-8 mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.5s"},children:e.jsxs("div",{className:"card shadow",children:[e.jsxs("div",{className:"card-header py-3 d-flex flex-row align-items-center justify-content-between",children:[e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center",children:["Goal Progress",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("goalProgress",s),"aria-label":"Goal Progress information",style:{cursor:"pointer"}})}),$&&e.jsxs("span",{className:"badge badge-info ml-2",children:[e.jsx("i",{className:"fas fa-users mr-1"})," Family Goal"]})]}),e.jsx("div",{className:`badge badge-${v}`,children:te(u)})]}),e.jsxs("div",{className:"card-body",children:[$&&e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between p-2 bg-light-info rounded",style:{background:"rgba(78, 115, 223, 0.05)",border:"1px dashed rgba(78, 115, 223, 0.3)"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-share-alt text-info mr-2"}),e.jsxs("span",{children:["Shared with ",C?e.jsx("strong",{children:C}):"family members"]})]}),T&&e.jsx("span",{className:"badge badge-light",children:"You created this goal"})]})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-5",children:e.jsx("div",{className:"position-relative",children:M&&F&&e.jsxs(e.Fragment,{children:[e.jsx(H,{highcharts:A,options:F,ref:ne}),F.chart?.type==="pie"&&e.jsxs("div",{className:"position-absolute",style:{top:"50%",left:"50%",transform:"translate(-50%, -20%)",textAlign:"center"},children:[e.jsx("div",{className:"font-weight-bold",style:{fontSize:"24px"},children:te(u)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Complete"})]})]})})}),e.jsxs("div",{className:"col-md-7",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"mb-2 d-flex justify-content-between",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[h(a.current_amount)," of ",h(a.target_amount)]})]}),e.jsx("div",{className:"progress mb-4",style:{height:"8px"},children:e.jsx("div",{className:`progress-bar bg-${v}`,role:"progressbar",style:{width:`${u>100?100:u}%`},"aria-valuenow":u>100?100:u,"aria-valuemin":0,"aria-valuemax":100})})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"small font-weight-bold mb-1",children:"Status"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:`bg-${v} p-2 rounded mr-2`,style:{opacity:.5},children:e.jsx("i",{className:`fas fa-${U} text-${v}`})}),e.jsx("span",{className:"text-gray-800 font-weight-bold",children:a.status?.replace("_"," ").toUpperCase()})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"small font-weight-bold mb-1",children:"Priority"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:`bg-${k} p-2 rounded mr-2`,style:{opacity:.5},children:e.jsx("i",{className:`fas fa-flag text-${k}`})}),e.jsx("span",{className:`text-${k} font-weight-bold`,children:a.priority.toUpperCase()})]})]})})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"font-weight-bold text-primary mb-3 d-flex align-items-center justify-content-between",children:e.jsxs("span",{className:"d-flex align-items-center",children:["Goal Timeline Projection",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("goalTimeline",s),"aria-label":"Goal Timeline Projection information",style:{cursor:"pointer"}})})]})}),M&&de&&e.jsx(H,{highcharts:A,options:de,ref:ve})]}),a.description&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"small font-weight-bold",children:"Description"}),e.jsx("div",{className:"p-3 bg-light rounded",children:e.jsx("p",{className:"mb-0 text-gray-700",children:a.description})})]}),e.jsx("div",{className:"text-center mt-4",children:a.status==="completed"&&e.jsxs("div",{className:"text-success mt-2",children:[e.jsx("i",{className:"fas fa-check-circle mr-1"})," Goal target reached!"]})})]})]})}),e.jsxs("div",{className:"col-lg-4 animate__animated animate__fadeIn",style:{animationDelay:"0.6s"},children:[e.jsxs("div",{className:"card shadow mb-4",children:[e.jsx("div",{className:"card-header py-3",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center",children:["Saving Recommendation",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("savingRec",s),"aria-label":"Saving Recommendation information",style:{cursor:"pointer"}})})]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:"rounded-circle bg-success p-2 mx-auto mb-3",style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("i",{className:"fas fa-chart-line fa-lg text-white"})}),e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Recommended Monthly Saving"}),e.jsx("div",{className:"h3 mb-0 font-weight-bold text-gray-800",children:h(ge)}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1 mb-3",children:["to reach your goal by ",B(a.target_date)]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 bg-light rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Time Left"}),e.jsxs("div",{className:"font-weight-bold",children:[z," days"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Remaining"}),e.jsx("div",{className:"font-weight-bold",children:h(V)})]})]})]})]}),e.jsxs("div",{className:"card shadow mb-4",children:[e.jsx("div",{className:"card-header py-3",children:e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center",children:["Contribution History",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("contHistory",s),"aria-label":"Contribution History information",style:{cursor:"pointer"}})})]})}),e.jsx("div",{className:"card-body",children:!g||g.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-chart-bar fa-3x text-gray-300"})}),e.jsx("h5",{className:"text-gray-800 mb-2",children:"No Contribution History"}),e.jsx("p",{className:"text-gray-600 mb-3",children:"Track your progress by making contributions to this goal"}),e.jsxs(f,{to:`/goals/${l}/contribute`,className:"btn btn-sm btn-success",children:[e.jsx("i",{className:"fas fa-plus-circle mr-1"})," Add Contribution"]})]}):e.jsx(e.Fragment,{children:M&&q&&e.jsxs("div",{className:"animate__animated animate__fadeIn",children:[e.jsx(H,{highcharts:A,options:q,ref:oe}),e.jsx("div",{className:"text-center mt-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),g.length," contribution",g.length!==1?"s":""," recorded"]})})]})})})]})]})]}),e.jsxs("div",{className:"card shadow mb-4 animate__animated animate__fadeIn",style:{animationDelay:"0.7s"},children:[e.jsxs("div",{className:"card-header py-3 d-flex flex-row align-items-center justify-content-between",children:[e.jsxs("h6",{className:"m-0 font-weight-bold text-primary d-flex align-items-center",children:["Goal Transactions",e.jsx("div",{className:"ml-2 position-relative",children:e.jsx("i",{className:"fas fa-info-circle text-gray-400 cursor-pointer",onClick:s=>N("goalTransactions",s),"aria-label":"Goal Transactions information",style:{cursor:"pointer"}})})]}),e.jsx("div",{className:"d-flex align-items-center",children:e.jsxs("div",{className:"dropdown no-arrow",children:[e.jsx("button",{className:"btn btn-link btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:e.jsx("i",{className:"fas fa-ellipsis-v text-gray-400"})}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-right shadow animated--fade-in","aria-labelledby":"dropdownMenuButton",children:[e.jsx("a",{className:"dropdown-item",href:"#",children:"Export to CSV"}),e.jsx("a",{className:"dropdown-item",href:"#",children:"Filter Transactions"}),e.jsx("div",{className:"dropdown-divider"}),e.jsx("a",{className:"dropdown-item",href:"#",children:"View All Transactions"})]})]})})]}),e.jsx("div",{className:"card-body",children:!g||g.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-receipt fa-4x text-gray-300"})}),e.jsx("h4",{className:"text-gray-800 mb-2",children:"No Transactions Yet"}),e.jsx("p",{className:"text-gray-600",children:"No contributions have been made towards this goal yet."}),e.jsx("div",{className:"mt-4",children:e.jsxs(f,{to:`/goals/${l}/contribute`,className:"btn btn-primary shadow-sm d-inline-flex align-items-center",children:[e.jsx("i",{className:"fas fa-plus-circle mr-2"})," Make First Contribution"]})})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",width:"100%",cellSpacing:"0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Category"}),e.jsx("th",{className:"text-right",children:"Amount"})]})}),e.jsx("tbody",{children:g.map(s=>e.jsxs("tr",{className:"animate__animated animate__fadeIn",children:[e.jsx("td",{width:"20%",children:B(s.date)}),e.jsx("td",{children:e.jsx(f,{to:`/transactions/${s.id}`,className:"font-weight-bold text-primary",children:s.description||"Contribution to goal"})}),e.jsx("td",{width:"20%",children:e.jsx("span",{className:"badge badge-light",children:s.category||"Goal Contribution"})}),e.jsx("td",{className:"text-right font-weight-bold",width:"20%",children:h(s.amount)})]},s.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("td",{colSpan:3,className:"font-weight-bold",children:"Total Contributions"}),e.jsx("td",{className:"text-right font-weight-bold text-success",children:h(g.reduce((s,i)=>s+(i.amount||0),0))})]})})]})})})]})]}),y&&K&&e.jsxs("div",{className:"tip-box light",style:{position:"absolute",top:`${K.top}px`,left:`${K.left}px`,transform:"translateX(-50%)",zIndex:1e3,background:"white",padding:"12px 15px",borderRadius:"8px",boxShadow:"0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15)",maxWidth:"300px",border:"1px solid rgba(0, 0, 0, 0.05)"},children:[y==="targetAmount"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Target Amount"}),e.jsx("p",{className:"tip-description",children:"The total amount you're aiming to save for this goal. This is your financial destination."})]}),y==="currentAmount"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Current Amount"}),e.jsx("p",{className:"tip-description",children:"The amount you've already saved towards this goal. This represents your progress so far."})]}),y==="remaining"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Remaining Amount"}),e.jsx("p",{className:"tip-description",children:"The amount still needed to reach your goal. This is the gap between your current savings and your target."})]}),y==="timeRemaining"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Time Remaining"}),e.jsx("p",{className:"tip-description",children:"The number of days left until your target date. This helps you plan your saving schedule to reach your goal on time."})]}),y==="goalProgress"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Goal Progress"}),e.jsxs("p",{className:"tip-description",children:["Visual representation of your progress toward this financial goal. The percentage shows how much of your target amount you've already saved.",$&&e.jsxs("span",{className:"d-block mt-2 text-info",children:[e.jsx("i",{className:"fas fa-users mr-1"})," This is a shared family goal. All family members can see and contribute to it."]})]})]}),y==="savingRec"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Saving Recommendation"}),e.jsx("p",{className:"tip-description",children:"Suggested monthly contribution amount to help you reach your goal by the target date. This is calculated based on your remaining amount and time left."})]}),y==="contHistory"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Contribution History"}),e.jsx("p",{className:"tip-description",children:"Chart showing your historical contributions to this goal over time. This helps you track your saving consistency and patterns."})]}),y==="goalTransactions"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Goal Transactions"}),e.jsx("p",{className:"tip-description",children:"Detailed list of all contributions made toward this goal, including dates, descriptions, and amounts. This provides a complete history of your saving activity."})]}),y==="goalTimeline"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Goal Timeline Projection"}),e.jsx("p",{className:"tip-description",children:"This chart shows the projected growth of your savings towards this goal over time. It visualizes how your current saving rate will help you reach your target amount by the target date."})]}),y==="sharedGoal"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"tip-title",children:"Family Shared Goal"}),e.jsxs("p",{className:"tip-description",children:["This goal is shared with all members of your family. Everyone in the family can see this goal and contribute towards it.",C&&e.jsxs("span",{className:"d-block mt-1",children:["Family: ",e.jsx("strong",{children:C})]})]})]})]})]})},Xe=()=>e.jsx(Me,{children:e.jsx(Le,{})});export{Xe as default};
