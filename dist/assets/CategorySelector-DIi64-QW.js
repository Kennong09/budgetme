import{j as e}from"./ui-vendor-Cn1Vfl4w.js";import{r as d}from"./react-vendor-D4A9EtXC.js";const $=({selectedCategoryId:l,onCategorySelect:g,transactionType:t,incomeCategories:f,expenseCategories:b,required:p=!1,disabled:n=!1,className:j="",label:N="Category",showIcons:w=!0})=>{const[a,m]=d.useState(!1),[u,x]=d.useState(""),[r,c]=d.useState(null),i=t==="income"?f:b,h=i.filter(s=>s.category_name.toLowerCase().includes(u.toLowerCase()));d.useEffect(()=>{if(console.log("ðŸ·ï¸ CategorySelector: selectedCategoryId prop changed",{selectedCategoryId:l,categoriesLength:i.length,transactionType:t}),l&&i.length>0){const s=i.find(o=>o.id===l);console.log("ðŸ·ï¸ CategorySelector: Found category for selectedCategoryId",{selectedCategoryId:l,foundCategory:s?{id:s.id,name:s.category_name}:null,allCategories:i.map(o=>({id:o.id,name:o.category_name}))}),c(s||null)}else console.log("ðŸ·ï¸ CategorySelector: Clearing selected category",{selectedCategoryId:l,categoriesLength:i.length}),c(null)},[l,i,t]);const v=s=>{c(s),g(s),m(!1),x("")},C=()=>{c(null),g(null),m(!1),x("")};return e.jsxs("div",{className:`form-group selector-container ${j}`,children:[e.jsxs("label",{className:"font-weight-bold text-gray-800",children:[N," ",p&&e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"position-relative",children:[e.jsxs("div",{className:`d-flex align-items-center justify-content-between px-3 py-2 border bg-white ${n?"bg-light":""} ${a?"border-primary":"border-secondary"}`,onClick:()=>!n&&m(!a),style:{cursor:n?"not-allowed":"pointer",borderRadius:"0.375rem",minHeight:"38px"},children:[r?e.jsx("div",{className:"d-flex align-items-center",children:e.jsx("div",{children:e.jsx("div",{className:"font-weight-medium text-gray-800",children:r.category_name})})}):e.jsxs("span",{className:"text-muted",children:["Select ",t==="contribution"?"expense":t," category"]}),e.jsxs("div",{className:"d-flex align-items-center",children:[r&&!n&&e.jsx("button",{type:"button",className:"btn btn-sm text-danger mr-2",onClick:s=>{s.stopPropagation(),C()},title:"Clear selection",style:{border:"none",background:"none",padding:"2px 6px"},children:e.jsx("i",{className:"fas fa-times"})}),e.jsx("i",{className:`fas fa-chevron-${a?"up":"down"} text-gray-400`})]})]}),a&&!n&&e.jsxs("div",{className:"position-absolute w-100 bg-white border shadow-lg",style:{zIndex:1050,maxHeight:"300px",overflowY:"auto",top:"100%",borderRadius:"0.375rem",borderColor:"#dee2e6"},children:[e.jsx("div",{className:"p-3 border-bottom",children:e.jsx("input",{type:"text",className:"px-3 py-2 w-100 border",placeholder:`Search ${t==="contribution"?"expense":t} categories...`,value:u,onChange:s=>x(s.target.value),autoFocus:!0,style:{borderRadius:"0.25rem",fontSize:"14px",borderColor:"#dee2e6",outline:"none"}})}),e.jsx("div",{className:"py-1",children:h.length===0?e.jsxs("div",{className:"px-3 py-2 text-muted text-center",children:["No ",t==="contribution"?"expense":t," categories found"]}):h.map(s=>e.jsxs("div",{className:`px-3 py-2 d-flex align-items-center ${r?.id===s.id?"bg-primary text-white":""}`,onClick:()=>v(s),style:{cursor:"pointer",transition:"background-color 0.15s ease-in-out"},onMouseEnter:o=>{r?.id!==s.id&&(o.currentTarget.style.backgroundColor="#f8f9fc")},onMouseLeave:o=>{r?.id!==s.id&&(o.currentTarget.style.backgroundColor="")},children:[e.jsx("div",{className:"flex-grow-1",children:e.jsx("div",{className:"font-weight-medium",children:s.category_name})}),r?.id===s.id&&e.jsx("i",{className:"fas fa-check text-white"})]},s.id))})]})]}),r&&e.jsx("div",{className:"card mt-3 border-left-primary",children:e.jsx("div",{className:"card-body py-3",children:e.jsx("div",{className:"row no-gutters align-items-center",children:e.jsxs("div",{className:"col mr-2",children:[e.jsx("div",{className:"d-flex align-items-center mb-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-weight-bold text-gray-800",children:[r.category_name,e.jsxs("span",{className:`badge ml-2 ${t==="income"?"badge-success":t==="contribution"?"badge-info":"badge-warning"}`,children:[e.jsx("i",{className:`fas ${t==="income"?"fa-plus-circle":t==="contribution"?"fa-flag":"fa-minus-circle"} mr-1`}),t==="income"?"Income":t==="contribution"?"Contribution":"Expense"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[r.category_name," Category"]})]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-xs font-weight-bold text-gray-600 text-uppercase",children:"Category Type"}),e.jsx("span",{className:`font-weight-bold ${t==="income"?"text-success":t==="contribution"?"text-info":"text-warning"}`,children:t==="income"?"Revenue Source":t==="contribution"?"Goal Contribution":"Expense Category"})]})]})})})})]})};export{$ as C};
